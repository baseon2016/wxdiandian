{"version": 3,"file": "",
"sourceroot": "",
"sources": ["pages/diy/index.js","pages/diy/template/index.js","pages/foxui/index.js","pages/goods/detail/poster/poster.js","pages/integral/order/detail/index.js","pages/order/logistics/index.js","pages/order/pay/sharecoupon/index.js","pages/sale/coupon/my/index.js","utils/base64.js","utils/biz/area.js","utils/biz/cart.js","utils/biz/diyform.js","utils/biz/diypage.js","utils/biz/goodspicker.js","utils/biz/group_order.js","utils/biz/order.js","utils/biz/selectdate.js","utils/core.js","utils/foxui.js","utils/icons.js","utils/jquery.js","utils/util.js","utils/wxParse/html2json.js","utils/wxParse/htmlparser.js","utils/wxParse/showdown.js","utils/wxParse/wxDiscode.js","utils/wxParse/wxParse.js","app.js","pages/commission/return/index.js","pages/transfer/commission/return/index.js","pages/index/index.js","pages/custom/index.js","pages/creditshop/detail/index.js","pages/creditshop/comment/index.js","pages/creditshop/express/index.js","pages/shop/notice/index/index.js","pages/shop/notice/detail/detail.js","pages/shop/caregory/index.js","pages/goods/index/index.js","pages/goods/region/index.js","pages/goods/detail/index.js","pages/goods/package/index.js","pages/goods/package/detail/index.js","pages/goods/poster/poster.js","pages/order/index.js","pages/order/detail/index.js","pages/order/express/index.js","pages/order/comment/index.js","pages/order/refund/index.js","pages/order/singlerefund/index.js","pages/order/create/index.js","pages/order/store/index.js","pages/order/store/map.js","pages/order/pay/index.js","pages/member/index/index.js","pages/member/info/index.js","pages/member/bind/index.js","pages/member/favorite/index.js","pages/member/history/index.js","pages/member/recharge/index.js","pages/member/withdraw/index.js","pages/member/log/index.js","pages/member/address/index.js","pages/member/address/post.js","pages/member/address/select.js","pages/member/cart/index.js","pages/verifygoods/index.js","pages/verifygoods/detail/index.js","pages/sale/coupon/index/index.js","pages/sale/coupon/detail/index.js","pages/sale/coupon/my/detail/index.js","pages/sale/coupon/my/index/index.js","pages/sale/coupon/my/showcoupons2/index.js","pages/public/coupon/index.js","pages/message/auth/index.js","pages/web/index.js","pages/map/index.js","pages/order/pay/share/share.js","pages/order/pay/coupons/coupons.js","pages/creditshop/log/index.js","pages/creditshop/log/detail/index.js","pages/creditshop/lists/index.js","pages/creditshop/creditlog/index.js","pages/creditshop/create/index.js","pages/creditshop/verify/index.js","pages/creditshop/index.js","pages/order/cycle/index.js","pages/order/cycle/address.js","pages/order/cycle/order.js","pages/order/express/number.js","pages/member/membercard/index.js","pages/member/membercard/detail/index.js","pages/member/membercard/pay/index.js","pages/transfer/groups/index.js","pages/transfer/bargain/index.js","pages/transfer/seckill/index.js","pages/quickbuy/index.js","friendcoupon/index.js","pages/transfer/commission/index.js","pages/auth/index.js"],
"names": ["app","getApp","core","requirejs","Page","data","route","indicatorDots","autoplay","interval","duration","circular","hotimg","saleout1","saleout2","saleout3","icons","diypage","onReady","onShow","$this","this","get","result","loading","setData","onHide","onUnload","onLoad","options","foxui","accredit","errMsg","Image","previewImage","wx","current","urls","savePicture","getSetting","success","res","authSetting","showLoading","title","setTimeout","hideLoading","downloadFile","url","saveImageToPhotosAlbum","filePath","tempFilePath","toast","fail","ret","authorize","scope","getmsg","onPullDownRefresh","onReachBottom","onShareAppMessage","_keyStr","_utf8_encode","string","replace","utftext","n","length","c","charCodeAt","String","fromCharCode","_utf8_decode","i","c2","c3","module","exports","encode","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","isNaN","charAt","decode","indexOf","getAreas","callback","provinces","areas","province","citys","j","city","countys","k","county","hasOwnProperty","county_name","push","city_name","province_name","add","id","$","getIndex","str","trim","isArray","arr","split","index","name","Number","ii","iii","area","onConfirm","e","val","pval","field","bindAreaField","isEmptyObject","diyform","f_data","areaKey","areaObj","areaDetail","noArea","diyform.f_data","showPicker","onCancel","onChange","value","detail","type","pdata","postData","bindChange","oldValue","pvalOld","newValue","selectArea","currentTarget","dataset","hasarea","areakey","obj","DiyFormHandler","target","data_type","datatype","_typeof","fields","diy_type","tp_text","upload","file","images","filename","count","newdata","verify","tp_must","tp_name","name1","name2","tp_name2","JSON","stringify","test","items","topmenu","customData","customer","phone","phonecolor","phonenumber","customercolor","pages","page","usediypage","startadv","diytitle","error","undefined","each","item","style","showtype","topmenuheight","Math","ceil","istopmenu","linkurl","dataurl","goods","list","diypages","topmenuDataType","showmore","tabbarDataType","tabbarData","setNavigationBarTitle","setNavigationBarColor","frontColor","titlebarcolor","backgroundColor","titlebarbg","number","min","optionid","max","action","parseInt","stock","total","inputNumber","maxbuy","minbuy","chooseGift","giftid","buyNow","event","hasOption","hasoption","diydata","selectDate","checkedDate","post","diyformdata","isgift","redirectTo","gdid","giftinfo","gifts","navigateTo","getCart","quickbuy","formdataval","addCartquick","goods.cartcount","cartcount","active","slider","isSelected","tempname","message","tempdata","selectpicker","modeltakeout","home","checkAuth","specsData","specsTitle","goods.member_discount","show","presellstartstatus","ispresell","presellendstatus","pickerOption","canbuy","buyType","buytype","minpicker","goods.thistime","thistime","specs","lastdata","pagepicker","presellstatustitle","sortNumber","a","b","specsTap","idx","optionTitle","optionids","forEach","newOptionids","sort","join","thumb","goods.thumb","goods.total","goods.maxprice","marketprice","goods.minprice","goods.marketprice","member_discount","goods.seecommission","seecommission","goods.presellprice","presellprice","optionCommission","canBuy","cancelArray","order","cancel","remark","cancel_reason","delete","userdeleted","self","confirm","get_list","finish","refundcancel","codeshow","orderid","json","code","qrcode","alert","codehidden","doDay","currentObj","Y","getFullYear","m","getMonth","d","getDate","key","Date","week","currentDate","getDay","currentYear","currentMonth","setSchedule","getCurrentDayString","initDate","objDate","date","currentDayNum","getUTCDay","firstKey","currentDayList","f","currentdate","y","isdelay","unit_date","periodic","cycelbuy_periodic","period_index","period_rest","maxday","week_index","no_optional","checked","f1","parse","selectDay","day","create","currentDay","currentDa","receipttime","require","toQueryPair","encodeURIComponent","getUrl","routes","params","full","getConfig","api","param","args","hasloading","ispost","session","userinfo_openid","getCache","usermid","authkey","comefrom","openid","mid","merchid","op","method","header","Content-type","Cookie","setCache","sysset","isclose","closetext","request","getDistanceByLnglat","lng1","lat1","lng2","lat2","rad","PI","rad1","rad2","s","asin","sqrt","pow","sin","cos","round","msg","showModal","content","showCancel","confirm_callback","cancel_callback","showToast","icon","hideToast","uploadCallback","chooseImage","tempFilePaths","uploadFile","files","makePhoneCall","phoneNumber","pay","succalback","requestPayment","customtitle","share","userinfo_id","shopname","desc","description","path","str2Obj","oldArr","countDown","timePoint","time","now","leftTime","floor","hour","minute","second","text","FoxUIToast","notify","FoxUINotify","voice","mute","home_red","cate","cate_red","cart","cart_red","people","people_red","shop","cartWhite","like","likeactive","likefill","footprint","notice","location","setting","paying48","deliver48","box48","refund48","store","storeWhite","search","money","coupon","card","car48","cry220","group","mobile","labelGreen","labelRed","back","nopic","dingdan","tianjia","service","service2","my","buildParams","prefix","traditional","jQuery","v","rbracket","isArraylike","isWindow","nodeType","class2type","core_deletedIds","core_push","core_indexOf","core_toString","toString","core_hasOwn","core_trim","r20","isFunction","Array","window","isNumeric","parseFloat","isFinite","call","isPlainObject","constructor","prototype","support","ownLast","apply","rtrim","makeArray","results","Object","merge","inArray","elem","len","first","l","isMobile","toFixed","RangeError","x","substring","extend","src","copy","copyIsArray","clone","arguments","deep","jquery","formatNumber","formatTime","year","month","getHours","getMinutes","getSeconds","map","makeMap","removeDOCTYPE","html","trimHtml","transEmojiStr","emojiObjs","__emojisReg","__emojis","emojiObj","node","array","eReg","RegExp","ele","tag","baseSrc","__emojisBaseSrc","__placeImgeUrlHttps","wxDiscode","HTMLParser","block","inline","closeSelf","html2json","bindName","strDiscode","bufArray","nodes","imageUrls","start","attrs","unary","parent","tagType","attr","reduce","pre","classStr","styleStr","match","imgIndex","imgUrl","splice","urlToHttpUrl","from","fontSize","styleAttrs","color","face","size","source","unshift","end","shift","console","chars","textArray","comment","emojisInit","reg","emojis","startTag","endTag","empty","fillAttrs","special","handler","parseEndTag","tagName","toLowerCase","pos","stack","last","all","rest","escaped","getDefaultOpts","simple","defaultOptions","omitExtraWLInCodeBlocks","defaultValue","describe","noHeaderId","prefixHeaderId","headerLevelStart","parseImgDimensions","simplifiedAutoLink","literalMidWordUnderscores","strikethrough","tables","tablesHeaderId","ghCodeBlocks","tasklists","smoothLivePreview","smartIndentationFix","opt","validate","extension","valid","showdown","helper","baseMsg","ext","isString","isUndefined","listeners","filter","regex","ln","escapeCharactersCallback","wholeMatch","m1","parsers","extensions","globalOptions","flavor","github","vanilla","setOption","getOption","getOptions","resetOptions","setFlavor","preset","option","getDefaultOptions","subParser","func","Error","stdExtName","validExtension","getAllExtensions","removeExtension","resetExtensions","validateExtension","warn","getType","escapeCharacters","charsToEscape","afterBackslash","regexString","rgxFindMatchPos","left","right","flags","t","g","exec","lastIndex","matchRecursiveRegExp","matchPos","slice","replaceRecursiveRegExp","replacement","repStr","finalStr","lng","bits","log","Converter","converterOptions","_parseExtension","legacyExtensionLoading","validExt","langExtensions","outputModifiers","listen","rTrimInputText","rsp","rgx","gOpt","_constructor","_dispatch","evtName","globals","ei","nText","makeHtml","gHtmlBlocks","gHtmlMdBlocks","gHtmlSpans","gUrls","gTitles","gDimensions","gListLevel","hashLinkCounts","converter","addExtension","useExtension","extensionName","language","writeAnchorTag","m2","m3","m4","m5","m6","m7","linkText","linkId","replaceLink","wm","link","lnkTxt","replaceMail","unescapedStr","simpleURLRegex","delimUrlRegex","simpleMailRegex","delimMailRegex","bq","pattern","codeblock","nextChar","leadingText","numSpaces","addr","ch","random","r","blockText","blockTags","txt","config","matches","headerId","escapedId","prefixHeader","setextRegexH1","setextRegexH2","spanGamut","hID","hLevel","hashBlock","matchFound","span","writeImageTag","altText","width","height","gDims","inlineRegExp","referenceRegExp","processListItems","listStr","trimTrailing","isParagraphed","taskbtn","bulletStyle","otp","parseConsecutiveLists","listType","counterRxg","subLists","parseCL","wholeList","grafs","grafsOut","grafsOutIt","codeFlag","delim","$1","num","$2","re","blankLines","parseStyles","sLine","parseHeaders","tableHeaderId","parseCells","cell","buildTable","headers","cells","tb","tblLgn","tableRgx","rawTable","tableLines","rawHeaders","rawStyles","rawCells","styles","row","charCodeToReplace","strNumDiscode","strGreeceDiscode","strcharacterDiscode","strOtherDiscode","strMoreDiscode","rep","wxParseImgTap","that","nowImgUrl","tagFrom","wxParseImgLoad","calMoreImageInfo","_that$setData","temData","temImages","recal","wxAutoImageCal","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","err","return","keyW","keyH","_defineProperty","imageWidth","imageheight","originalWidth","originalHeight","windowWidth","autoWidth","autoHeight","padding","view","imagePadding","realWindowWidth","realWindowHeight","getSystemInfo","windowHeight","wxParse","transData","HtmlToJson","bindData","wxParseTemArray","temArrayName","bindNameReg","simArr","App","onLaunch","model","setStorageSync","ww","hh","globalData","currentPages","getCurrentPages","currentPage","routeData","paramsArr","decodeURIComponent","scene","userinfo","settings","jsname","approot","appid","getExtConfigSync","getStorageSync","expire","removeCache","rt","removeStorageSync","close","globalDataClose","flag","reLaunch","getSet","cacheset","version","update","arg","user","impower","limit","confirmText","openSetting","switchTab","userInfo","parser","goodspicker","getDiypage","stopPullDownRefresh","imgUrls","indicatorDotss","autoplays","intervals","durations","circulars","adveradmin","clock","storeRecommand","loaded","indicatorDotsHot","autoplayHot","intervalHot","durationHOt","circularHot","notification","play","_data","getShop","copyright","getRecommand","concat","pagesize","hideTabBar","isblack","sceneObj","diypageGet","response","force_auth","cover","showvideo","swiperheight","showTabBar","status","get_nopayorder","timer","autoclose","count_down","countdown","showtime","startadvtime","nowtime","unpaid","getSystemInfoSync","get_hasnewcoupon","get_cpinfos","limits","pagetitle","screenWidth","goodsicon","iconheight","iconwidth","endtime","starttime","initSeckill","imagesHeight","bindInput","inputValue","t1","fixedsearch","startplay","videoContext","createVideoContext","unpaidcolse","unpaidcolse2","unpaidhide","hasinfo","nopaygoods","nopaygoodstotal","goodstotal","nopayorder","hasnewcoupon","showcoupontips","hascpinfos","showcoupon","cpinfos","adverclose","indexChangebtn","_Page","select","sound","soundpic","modelShow","appurl","navigateToMiniProgram","appId","topmenuindex","lastIndexOf","pageid","itemid","paramsType","seckillinfo","lasttime","currenttime","clearInterval","setTimer","setTimerInterval","times","formatSeconds","sec","setInterval","theTime","theTime1","theTime2","pauseOther","url_arr","item_id","audiosObj","pause","audios","innerAudioContext","createInnerAudioContext","onPlay","Time","currentTime","seconds","audiowidth","audiotime","audio","pausestop","loopplay","onEnded","paused","loop","seek","tabinfo","tabreplay","tablog","goodsoptions","logmore","logpage","replays","replaysmore","replaypage","stores","goodsrec","selectspecs","optionselect","optionbtn","onTab","tab","getlog","more","getreply","getDetail","navigateBack","goodsdetail","subdetail","noticedetail","usedetail","replys","replymore","istime","timestart","timeend","leftsecond","optionclick","optiongoods","buymsg","specselect","specid","specsitem","class","optiongoods.thumb","optiongoods.total","goods.credit","credit","goods.money","optiongoods.credit","optiongoods.money","goods.canbuy","goods.buymsg","closepicker","openActionSheet","isIpx","iphonexnavbar","stars_class","stars_text","normalSrc","selectedSrc","imgs","is_openmerch","change","submit","logid","comments","goodsid","level","getList","createtime","category","selector","advimg","advurl","recommands","child","tabCategory","cateChild","backParent","getCategory","set","isFilterShow","listmode","listsort","allcategory","catlevel","opencategory","category_child","category_third","filterBtns","isfilter","defaults","keywords","isrecommand","ishot","isnew","isdiscount","issendfree","by","lastcat","fromsearch","searchRecords","canload","initCategory","getRecord","setFocus","category_parent","changeMode","bindSort","listorder","sort_selected","showFilter","btnFilterBtns","bindFilterCancel","cateogry_parent_selected","category_child_selected","category_third_selected","bindFilterSubmit","bindCategoryEvents","category_parent_selected","bindSearch","setRecord","bindFocus","bindback","bindnav","records","newArr","delRecord","focusin","selectPicker","emptyActive","cancelclick","confirmclick","region","onlysent","selectdate","info","preselltimeend","presellsendstatrttime","advWidth","dispatchpriceObj","discountTitle","istimeTitle","commentObj","commentObjTab","commentEmpty","commentPage","commentTotal","commentLevel","commentList","closeBtn","animationData","uid","stararr","nav_mask","nav_mask2","nav","showgoods","can_share_goodscircle","imageLoad","h","w","advHeight","favorite","isfavorite","goods.isfavorite","goodsTab","tap","para","retlist","commentType","objType","comentTap","preview","nowTime","coupons","MaxHeight","thumbMaxHeight","goodscircle","thumbMaxWidth","coupon_l","packagegoods","packagegoodsid","credittext","activity","bottomFixedImageUrls","showDate","show_goods","package","buycontent","minprice","maxprice","labelstyle","navbar","labels","dispatchprice","isdiscount_time","preselltimestart","presellisstart","getComments","fullbackgoods","maxfullbackratio","maxallfullbackallratio","nowDate","show_cycelbuydate","cityPicker","giftPicker","gift","couponPicker","couponrecived","timeType","timeOut","timeout","goods_hint_show","goodslist","cycledate","packageList","isgoods","getStorage","removeStorage","pageScrollTo","scrollTop","showpic","bindfullscreenchange","fullScreen","sharePoster","showshade","nav2","changevoice","radioChange","giftgoodsid","gift_title","activityPicker","fadein","actOutPicker","hintclick","sendclick","syclecancle","sycleconfirm","editdate","option_mask","pid","packgoods","good","setStorage","choose","option_title","packageprice","sum","option_active","optionname","buy","getImage","loadImg","cancelindex","can_sync_goodscircle","selected","consume","diyshow","city_express_state","paddingb","nogift","fullbackratio","ordervirtualtype","ordervirtual","invoice","invoicename","membercard_info","toggle","rtypeArr","rtypeArrText","rtypeIndex","reasonArr","reasonIndex","rtype","reason","price","edit","order.refundstate","sendtime","order.single_refundstate","fefundreceive","single_refundid","refund","dispatchtype","realname","street","address","streetIndex","showaddressview","dayList","cycelbuy_showdate","bargainid","selectcard","ispackage","getGoodsList","comboprice","originalprice","goodsprice","card_info","cardid","cardname","carddiscountprice","iscycel","fromquick","hasinvoice","merchs","getQuickAddressDetail","list.address","caculate","list.carrierInfo","list.storeInfo","data.couponid","data.couponname","couponid","discountprice","isdiscountprice","$goodsarr","kk","vv","data.dispatchtype","dflag","addressid","packageid","bargain_id","dispatch_price","enoughdeduct","deductenough_money","enoughmoney","deductenough_enough","taskdiscountprice","seckill_price","deductcredit2","deductmoney","deductcredit","deduct","realprice","deduct2","deductprice","coupon.deductprice","coupon_deductprice","card_free_dispatch","goods.gifts","carrierInfo","subdata","fromcart","carrierid","carriers","isvirtual","isverify","carrier_realname","member","carrier_mobile","storename","storeInfo","set_realname","set_mobile","isforceverifystore","isonlyverifygoods","dataChange","listChange","datavalue","getStreet","areaDetail.detail","onChange2","vname","bindtype","streetdatavalue","openstreet","areaDetail.detail.street","submitaddress","posting","clearform","new_fdata","showinvoicepicker","invoice_type","invoice_info","entity","invoicepicker","noinvoicepicker","clearinvoice","chaninvoice","changeType","company","invoicetitle","invoicenumber","confirminvoice","str1","str2","str3","selectCard","cancalCard","changecard","carddiscount_rate","totalprice","card_obj","closeCardModal","show_distance","ids","getLocation","lat","latitude","longitude","old_list","new_list","storeid","markers","getInfo","successData","wechat","payinfo","check_json","complete","pay_json","closecoupon","iscycelbuy","bargain","navigate","openbind","template_flag","weixin","birthday","memberdata","binded","subtext","smsimgcode","verifycode_img","password","password1","endTime","inputChange","getCode","verifyImg","verifyImgCode","ret2","postData.confirm","imageChange","isedit","isCheckAll","checkObj","checkNum","itemClick","btnClick","checkAllClick","disabled","coupon.id","coupon.name","minimumcharge","js","objectArray","checkedIndex","bankChecked","chargeShow","realInfo","isSubmit","last_data","alipay","alipay1","bankcard","bankcard1","bankname","type_array","bankCheckedIndex","lastbankindex","withdrawmoney","moneyChange","bankChange","moneytext","bindAll","allow","withdrawcharge","deductionmoney","withdrawbegin","withdrawend","realmoney","typeChange","banklist","realinfo","bank","applytype","confirm_msg","isopen","myTab","chooseAddress","can","userName","telNumber","detailInfo","provinceName","cityName","countyName","is_from_wx","setDefault","deleteItem","fui","detail.street","merch_list","edit_list","get_cart","ismerch","ischeckall","allgoods","checked_allgoods","checkall","check","editcheckall","editischecked","verifygoods","get_detail","canverify","canverify_message","verifygoodlogs","verifynum","limitdatestr","verifycode","cates","cateid","getCate","setSpeed","lastratio","angle","context","createContext","beginPath","arc","setFillStyle","setStrokeStyle","setLineWidth","stroke","setLineCap","canvasId","drawCanvas","actions","getActions","bindTab","jump","receive","buying","canget","gettypestr","payResult","getstr","coupontype","confirm_text","dataid","closecenter","goodsinfo","couponname","bindBtn","bind","bindGetUserInfo","keys","redirectUrl","login","login_res","encryptedData","iv","sessionKey","session_key","auth_res","openId","uniacid","domain","scale","tel1","tel2","logo","iconPath","label","borderRadius","bgColor","display","textAlign","circles","fillColor","radius","strokeWidth","regionchange","markertap","controltap","cityexpress","zoom","markers[0].longitude","markers[0].latitude","markers[0].label.content","circles[0].longitude","circles[0].latitude","circles[0].radius","range","listout","listin","calldown","callup","tel","paperplane","transmit","hidepaperplane","showcode","load","notgoods","sm","onpage","next_page","datas","replyset","ordercredit","ordermoney","carrier","allmoney","togglestore","togglecode","iswechat","paymentmodal","_$this$setData","dispatch","allprice","lenght","paydispatch","paytype","showNavigationBarLoading","hideNavigationBarLoading","focus","showbtn","doinput","showmodal","successmodal","iscredit","successmessage","successstatus","goodstype","payClick","lottery","eno","swiperCurrent","links","lotterydraws","exchanges","balances","hidden","get_index","changeTo","gid","advs","redbags","cycelData","cycelid","refundstate","cycle","newDate","isall","is_all","notStart","confirm_receipt","applyid","updateAll","express","expresscom","express_number","singlerefund","inputPrickChange","express_list","refundid","hasmembercard","all_total","my_total","startbuy","order_id","modal","getlist","swiperchange","issend","month_coupon","isget_month_coupon","isget_month_point","pay_type","pay_fee","fee","orderno","pay_msg","startPullDownRefresh","arrLabel","clickCar","systemInfo","busPos","goodsH","arrLab","shopstyle","logostyle","main","goodsArr","arrCart","cartdata","goodslength","arrscroll","quickid","numtotal","simple_list","menunavigage","gobigimg","clickLab","shopCarList","cartcartArr","cartList","tempcartid","shopCarHid","closespecs","onPageScroll","numbers","addtype","typevalue","cantclick","clearcart","addGoodToCartFn","canadd","morechose","mouse","diyformtype","storenum","maxnum","animate","finger","topPoint","touches","clientX","clientY","abs","linePos","bezier","startAnimation","pots","amount","pot","lines","points","rate","pointA","pointB","pointDistance","xDistance","yDistance","tan","radian","tmpPointDistance","atan","pointLine","bezier_points","hide_good_box","bus_x","bus_y","clearShopCartFn","closemulti","gopay","gotocart","cartaddcart","opid","carttype","goodsOptionTotal","scrollfn","arrtemp","activity_setting","shareid","share_id","listlength","pindex","getCoupon","isGet","form_id","formId","isLogin","invalidMessage","carve","mycoupon","currentActivityInfo","activity_id","headerid","activitySetting","activityList","enough","activityData","mylink","overTime","shop_logo","shop_name","_this","sysSet","shoplogo","delta"],
"mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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",
"sourcesContent": ["// pages/diy/index.js\r\nvar app = getApp();\r\nvar icons = app.requirejs('icons');\r\nvar core = app.requirejs('core');\r\nvar Base64 = app.requirejs('base64');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nPage({\r\n  data: {\r\n        route: 'home',\r\n        indicatorDots: true,\r\n        autoplay: true,\r\n        interval: 5000,\r\n        duration: 500,\r\n        circular: true,\r\n        hotimg: \"/static/images/hotdot.jpg\",\r\n        saleout1: \"/static/images/saleout-1.png\",\r\n        saleout2: \"/static/images/saleout-2.png\",\r\n        saleout3: \"/static/images/saleout-3.png\",\r\n        icons: app.requirejs('icons'),\r\n        diypage:''\r\n       },\r\n    onReady:function(){\r\n      // 页面渲染完成\r\n      \r\n    },\r\n    onShow:function(){\r\n      var $this = this;\r\n      core.get('diypage&id=1', {}, function (result) {\r\n        var data = { loading: false, diypage: result.diypage};\r\n        $this.setData(data);\r\n      });\r\n    },\r\n    onHide:function(){\r\n      // 页面隐藏\r\n    },\r\n    onUnload:function(){\r\n      // 页面关闭\r\n    }\r\n  })","// pages/diy/template/index.js\r\nPage({\r\n  data:{},\r\n  onLoad:function(options){\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n  },\r\n  onReady:function(){\r\n    // 页面渲染完成\r\n  },\r\n  onShow:function(){\r\n    // 页面显示\r\n  },\r\n  onHide:function(){\r\n    // 页面隐藏\r\n  },\r\n  onUnload:function(){\r\n    // 页面关闭\r\n  }\r\n})","// pages/foxui/index.js\r\nPage({\r\n  data:{},\r\n  onLoad:function(options){\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n  },\r\n  onReady:function(){\r\n    // 页面渲染完成\r\n  },\r\n  onShow:function(){\r\n    // 页面显示\r\n  },\r\n  onHide:function(){\r\n    // 页面隐藏\r\n  },\r\n  onUnload:function(){\r\n    // 页面关闭\r\n  }\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n  data: {\r\n  \taccredit: '',\r\n  \terrMsg: '',\r\n  \tImage: 'https://api.clubmall.cn/attachment/images/7/2017/11/r13oT11buG60bn2ntVp1q4pe3B6EGQ.jpeg'\r\n  },\r\n  \r\n  onLoad: function (options) {\r\n  \r\n  },\r\n\t/*图片预览*/\r\n\tpreviewImage: function(){\r\n\t\twx.previewImage({\r\n\t\t  current: 'https://api.clubmall.cn/attachment/images/7/2017/11/r13oT11buG60bn2ntVp1q4pe3B6EGQ.jpeg', // 当前显示图片的http链接\r\n\t\t  urls: ['https://api.clubmall.cn/attachment/images/7/2017/11/r13oT11buG60bn2ntVp1q4pe3B6EGQ.jpeg'] // 需要预览的图片http链接列表\r\n\t\t})\r\n\t},\r\n\t/*点击保存图片*/\r\n  savePicture: function(){\r\n  \tvar $this = this;\r\n  \twx.getSetting({\r\n\t\t  success: function(res){\r\n\t\t  \tvar accredit = res.authSetting['scope.writePhotosAlbum']\r\n\t\t  \tif(accredit){\r\n\t\t  \t\twx.showLoading({\r\n\t\t\t\t\t  title: '图片下载中...',\r\n\t\t\t\t\t})\r\n\t\t  \t\tsetTimeout(function(){\r\n\t\t\t\t\t  wx.hideLoading()\r\n\t\t\t\t\t},1000)\r\n\t\t  \t\twx.downloadFile({\r\n\t\t  \t\t\turl: 'https://api.clubmall.cn/attachment/images/7/2017/11/r13oT11buG60bn2ntVp1q4pe3B6EGQ.jpeg',\r\n\t\t  \t\t\tsuccess: function(res) {\r\n  \t\t\t\t\t\twx.saveImageToPhotosAlbum({\r\n\t\t\t\t  \t\t\tfilePath: res.tempFilePath,\r\n\t\t\t\t\t    \tsuccess(result) {\r\n\t\t\t\t\t    \t\tfoxui.toast($this, \"保存图片成功\");\r\n\t\t\t\t\t\t\t  },\r\n\t\t\t\t\t    \tfail:function(ret){\r\n\t\t\t\t\t    \t\t$this.setData({errMsg: ret.errMsg})\r\n\t\t\t\t\t    \t\tfoxui.toast($this, \"保存图片失败\");\r\n\t\t\t\t\t    \t}\r\n\t\t\t\t\t\t\t})\r\n\t\t  \t\t\t}\r\n\t\t  \t\t})\r\n\t\t  \t}else{\r\n\t\t  \t\twx.authorize({\r\n\t          scope: 'scope.writePhotosAlbum',\r\n\t\t\t  \t\tfail: function(){\r\n              app.getmsg('writePhotosAlbum', '使用保存图片功能');\r\n\t\t  \t\t\t}\r\n\t\t  \t\t})\r\n\t\t  \t}\r\n\t\t\t}\r\n\t\t})\t\r\n  }\r\n\r\n})","// pages/integral/order/detail/index.js\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  }\r\n})","// pages/order/logistics/index.js\r\nPage({\r\n  data:{},\r\n  onLoad:function(options){\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n  },\r\n  onReady:function(){\r\n    // 页面渲染完成\r\n  },\r\n  onShow:function(){\r\n    // 页面显示\r\n  },\r\n  onHide:function(){\r\n    // 页面隐藏\r\n  },\r\n  onUnload:function(){\r\n    // 页面关闭\r\n  }\r\n})","// pages/order/pay/sharecoupon/index.js\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  }\r\n})","// pages/sale/coupon/my/index.js\r\nPage({\r\n  data:{},\r\n  onLoad:function(options){\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n  },\r\n  onReady:function(){\r\n    // 页面渲染完成\r\n  },\r\n  onShow:function(){\r\n    // 页面显示\r\n  },\r\n  onHide:function(){\r\n    // 页面隐藏\r\n  },\r\n  onUnload:function(){\r\n    // 页面关闭\r\n  }\r\n})","\r\n// private property  \r\nvar _keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\n\r\n\r\n// private method for UTF-8 encoding  \r\nvar _utf8_encode = function (string) {\r\n\tstring = string.replace(/\\r\\n/g, \"\\n\");\r\n\tvar utftext = \"\";\r\n\tfor (var n = 0; n < string.length; n++) {\r\n\t\tvar c = string.charCodeAt(n);\r\n\t\tif (c < 128) {\r\n\t\t\tutftext += String.fromCharCode(c);\r\n\t\t} else if ((c > 127) && (c < 2048)) {\r\n\t\t\tutftext += String.fromCharCode((c >> 6) | 192);\r\n\t\t\tutftext += String.fromCharCode((c & 63) | 128);\r\n\t\t} else {\r\n\t\t\tutftext += String.fromCharCode((c >> 12) | 224);\r\n\t\t\tutftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n\t\t\tutftext += String.fromCharCode((c & 63) | 128);\r\n\t\t}\r\n\r\n\t}\r\n\treturn utftext;\r\n}\r\n\r\n// private method for UTF-8 decoding  \r\nvar _utf8_decode = function (utftext) {\r\n\tvar string = \"\";\r\n\tvar i = 0,c = 0,c1 = 0,c2 = 0,c3 = 0;\r\n\twhile (i < utftext.length) {\r\n\t\tc = utftext.charCodeAt(i);\r\n\t\tif (c < 128) {\r\n\t\t\tstring += String.fromCharCode(c);\r\n\t\t\ti++;\r\n\t\t} else if ((c > 191) && (c < 224)) {\r\n\t\t\tc2 = utftext.charCodeAt(i + 1);\r\n\t\t\tstring += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\r\n\t\t\ti += 2;\r\n\t\t} else {\r\n\t\t\tc2 = utftext.charCodeAt(i + 1);\r\n\t\t\tc3 = utftext.charCodeAt(i + 2);\r\n\t\t\tstring += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n\t\t\ti += 3;\r\n\t\t}\r\n\t}\r\n\treturn string;\r\n}\r\n\r\n// public method for encoding  \r\nmodule.exports.encode = function (input) {\r\n\tvar output = \"\";\r\n\tvar chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n\tvar i = 0;\r\n\tinput = _utf8_encode(input);\r\n\twhile (i < input.length) {\r\n\t\tchr1 = input.charCodeAt(i++);\r\n\t\tchr2 = input.charCodeAt(i++);\r\n\t\tchr3 = input.charCodeAt(i++);\r\n\t\tenc1 = chr1 >> 2;\r\n\t\tenc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n\t\tenc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n\t\tenc4 = chr3 & 63;\r\n\t\tif (isNaN(chr2)) {\r\n\t\t\tenc3 = enc4 = 64;\r\n\t\t} else if (isNaN(chr3)) {\r\n\t\t\tenc4 = 64;\r\n\t\t}\r\n\t\toutput = output +\r\n\t\t\t_keyStr.charAt(enc1) + _keyStr.charAt(enc2) +\r\n\t\t\t_keyStr.charAt(enc3) + _keyStr.charAt(enc4);\r\n\t}\r\n\treturn output;\r\n}\r\n\r\n// public method for decoding  \r\nmodule.exports.decode = function (input) {\r\n\tvar output = \"\";\r\n\tvar chr1, chr2, chr3;\r\n\tvar enc1, enc2, enc3, enc4;\r\n\tvar i = 0;\r\n\tinput = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n\twhile (i < input.length) {\r\n\t\tenc1 = _keyStr.indexOf(input.charAt(i++));\r\n\t\tenc2 = _keyStr.indexOf(input.charAt(i++));\r\n\t\tenc3 = _keyStr.indexOf(input.charAt(i++));\r\n\t\tenc4 = _keyStr.indexOf(input.charAt(i++));\r\n\t\tchr1 = (enc1 << 2) | (enc2 >> 4);\r\n\t\tchr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n\t\tchr3 = ((enc3 & 3) << 6) | enc4;\r\n\t\toutput = output + String.fromCharCode(chr1);\r\n\t\tif (enc3 != 64) {\r\n\t\t\toutput = output + String.fromCharCode(chr2);\r\n\t\t}\r\n\t\tif (enc4 != 64) {\r\n\t\t\toutput = output + String.fromCharCode(chr3);\r\n\t\t}\r\n\t}\r\n\toutput = _utf8_decode(output);\r\n\treturn output;\r\n}  ","var app = getApp();\r\nvar core = app.requirejs('core');\r\nmodule.exports.getAreas = function(callback){\r\n\r\n    core.get('shop/get_areas',{}, function(ret){\r\n \r\n\r\n        var provinces =[];\r\n        \r\n        for(var i in  ret.areas.province){\r\n            if(i==0){\r\n                continue;\r\n            }\r\n            var province_name =ret.areas.province[i]['@attributes']['name'];\r\n            //provinces.push( province_name);\r\n            \r\n            var citys = [];\r\n            for(var j in ret.areas.province[i].city){\r\n               if(j==0){\r\n                 continue;\r\n               }\r\n               var countys = [];\r\n               var city_name =ret.areas.province[i].city[j]['name'];\r\n               for(var k in ret.areas.province[i].city[j].county){\r\n                     if( ret.areas.province[i].city[j].county[k].hasOwnProperty('@attributes')){\r\n                          var county_name =ret.areas.province[i].city[j].county[k]['@attributes']['name'];\r\n                      } else{\r\n                          var county_name =ret.areas.province[i].city[j].county[k]['name'];\r\n                      }\r\n                      countys.push(county_name );\r\n               }\r\n               citys.push( { city_name : countys });\r\n            }\r\n\r\n            provinces.push({ province_name : citys});\r\n \r\n\r\n        }\r\n        if(typeof(callback)==='function'){\r\n            callback(ret.areas);\r\n        }\r\n\r\n    })\r\n\r\n}","//购物车\r\nmodule.exports.add = function (id) {\r\n    \r\n};","var app=getApp(),$ = app.requirejs('jquery'),core = app.requirejs('core'),foxui = app.requirejs('foxui');\r\nmodule.exports = {\r\n    getIndex: function (str, areas) {\r\n        if($.trim(str)=='' || !$.isArray(areas)){\r\n            return [0,0,0];\r\n        }\r\n        var arr = str.split(\" \");\r\n        var index = [0,0,0];\r\n        for (var i in areas){\r\n            if(areas[i].name==arr[0]){\r\n                index[0] = Number(i);\r\n                for (var ii in areas[i].city){\r\n                    if(areas[i].city[ii].name==arr[1]){\r\n                        index[1] = Number(ii);\r\n                        for (var iii in areas[i].city[ii].area){\r\n                            if(areas[i].city[ii].area[iii].name==arr[2]){\r\n                                index[2] = Number(iii);\r\n                                break;\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        return index;\r\n    },\r\n    onConfirm: function ($this, e) {\r\n        var val = $this.data.pval;\r\n        var field = $this.data.bindAreaField;\r\n        var data = $.isEmptyObject($this.data.diyform.f_data)?{}:$this.data.diyform.f_data;\r\n        var areas = $this.data.areas;\r\n        data[field] = data[field] || {};\r\n        data[field].province = areas[val[0]].name;\r\n        data[field].city = areas[val[0]].city[val[1]].name;\r\n\r\n        // if ($this.data.areaKey){\r\n        //   var areaObj = {\r\n        //     province: areas[val[0]].name,\r\n        //     city: areas[val[0]].city[val[1]].name\r\n        //   };\r\n        // }\r\n\r\n        if ($this.data.areaKey) {\r\n          var areaObj = $this.data.areaDetail[$this.data.areaKey]\r\n          areaObj.province = areas[val[0]].name;\r\n          areaObj.city = areas[val[0]].city[val[1]].name;\r\n        }\r\n\r\n        if(!$this.data.noArea){\r\n            data[field].area = areas[val[0]].city[val[1]].area[val[2]].name;\r\n            if ($this.data.areaKey){\r\n              areaObj.area = areas[val[0]].city[val[1]].area[val[2]].name;\r\n            }\r\n        }\r\n        \r\n        $this.setData({\"diyform.f_data\": data, showPicker: false, bindAreaField: false});\r\n\r\n        if ($this.data.areaKey){\r\n          var areaDetail = $this.data.areaDetail || {};\r\n          areaDetail[$this.data.areaKey] = areaObj;\r\n          $this.setData({areaDetail: areaDetail});\r\n\r\n\r\n        }\r\n    },\r\n    onCancel: function ($this, e) {\r\n        $this.setData({showPicker: false});\r\n    },\r\n    onChange: function ($this, e) {\r\n        var value = e.detail.value;\r\n        var type = core.pdata(e).type;\r\n        var postData = $this.data.postData;\r\n        postData[type] = $.trim(value);\r\n        $this.setData({postData: postData});\r\n    },\r\n    bindChange: function($this, e) {\r\n        var oldValue = $this.data.pvalOld;\r\n        var newValue = e.detail.value;\r\n        if(oldValue[0]!=newValue[0]){\r\n            newValue[1] = 0;\r\n        }\r\n        if(oldValue[1]!=newValue[1]){\r\n            newValue[2] = 0;\r\n        }\r\n        $this.setData({pval: newValue, pvalOld: newValue});\r\n    },\r\n    selectArea: function ($this, e) {\r\n        var area = e.currentTarget.dataset.area;\r\n        var field = e.currentTarget.dataset.field;\r\n        var noArea = e.currentTarget.dataset.hasarea==1?false:true;\r\n        var index = $this.getIndex(area, $this.data.areas);\r\n        // 自定义区域key\r\n        var areaKey = e.currentTarget.dataset.areakey;\r\n        var obj = {pval: index, pvalOld: index, showPicker: true, noArea: noArea, bindAreaField: field};\r\n        if (areaKey){\r\n          obj.areaKey = areaKey;\r\n        }\r\n        $this.setData(obj);\r\n    },\r\n    DiyFormHandler: function($this, e){\r\n        var dataset = e.target.dataset;\r\n        var type = dataset.type;\r\n        var field = dataset.field;\r\n        var data_type = dataset.datatype;\r\n        var data = $this.data.diyform.f_data;\r\n\r\n        if($.isArray(data) || typeof(data) !='object'){\r\n            data = {};\r\n        }\r\n        var fields =$this.data.diyform.fields;\r\n        if(type=='input' || type=='textarea' || type=='checkbox' || type=='date' || type=='datestart' || type=='dateend' || type=='time' || type=='timestart' || type=='timeend' || type=='radio'){\r\n            if(type=='datestart' || type=='timestart'){\r\n                if(!$.isArray(data[field])){\r\n                    data[field] = [];\r\n                }\r\n                data[field][0] = e.detail.value;\r\n            }else if(type=='dateend' || type=='timeend'){\r\n                if(!$.isArray(data[field])){\r\n                    data[field] = [];\r\n                }\r\n                data[field][1] = e.detail.value;\r\n            }else if(type=='checkbox'){\r\n                data[field] = {};\r\n                for (var ii in e.detail.value){\r\n                    var  val = e.detail.value[ii];\r\n                    data[field][val] = 1\r\n                }\r\n            }else if(type=='radio'){\r\n                data[field] = e.detail.value;\r\n            }else{\r\n                if(data_type==10){\r\n                    if ($.isEmptyObject(data[field])){\r\n                        data[field] = {};\r\n                    }\r\n                    data[field][dataset.name] = e.detail.value;\r\n                }else{\r\n                    data[field] = e.detail.value;\r\n                }\r\n            }\r\n        }else if(type=='picker'){\r\n            for(var i in data){\r\n                if( i== field){\r\n                    for(var j in  fields){\r\n                        if( fields[j].diy_type==field ){\r\n                            data[field] = [ e.detail.value, fields[j].tp_text[e.detail.value] ]\r\n                            break;\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }else if(type=='image'){\r\n            core.upload(function(file){\r\n                for(var i in data){\r\n                    if( i == field){\r\n                        if(!data[field]){\r\n                            data[field] = {};\r\n                        }\r\n                        if(!data[field].images){\r\n                            data[field].images = [];\r\n                        }\r\n                        data[field].images.push({'url': file.url ,'filename': file.filename});\r\n                        break;\r\n                    }\r\n                }\r\n                data[field].count = data[field].images.length;\r\n                $this.setData({\"diyform.f_data\": data});\r\n            });\r\n        }else if(type=='image-remove'){\r\n            for(var i in data){\r\n                if( i == field){\r\n                    var newdata = { images:[] };\r\n                    for(var j in data[field].images){\r\n                        if( data[field].images[j].filename!= dataset.filename ){\r\n                            newdata.images.push( data[field].images[j] );\r\n                        }\r\n                    }\r\n                    newdata.count = newdata.images.length;\r\n                    data[field] =newdata;\r\n                    break;\r\n                }\r\n            }\r\n        }else if(type=='image-preview'){\r\n            for(var i in data){\r\n                if( i == field){\r\n                    var images = [];\r\n                    for(var j in data[field].images){\r\n                        images.push( data[field].images[j].url);\r\n                    }\r\n                    wx.previewImage({\r\n                        current: images[dataset.index],\r\n                        urls: images\r\n                    })\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        $this.setData({\"diyform.f_data\": data});\r\n    },\r\n    verify: function ($this, diyform) {\r\n        for (var index in diyform.fields){\r\n            var field = diyform.fields[index];\r\n            var type = field.diy_type;\r\n            if(field.tp_must==1){\r\n                if(field.data_type==5){\r\n                    if(!diyform.f_data[type] || diyform.f_data[type].count<1){\r\n                        foxui.toast($this, \"请选择\"+field.tp_name);\r\n                        return false;\r\n                    }\r\n                }\r\n                else if(field.data_type==9){\r\n                    if($.isEmptyObject(diyform.f_data[type])||!diyform.f_data[type].province||!diyform.f_data[type].city){\r\n                        foxui.toast($this, \"请选择\"+field.tp_name);\r\n                        return false;\r\n                    }\r\n                }\r\n                else if(field.data_type==10){\r\n                    if($.isEmptyObject(diyform.f_data[type]) || !diyform.f_data[type].name1){\r\n                        foxui.toast($this, \"请填写\"+field.tp_name);\r\n                        return false;\r\n                    }\r\n                    if(!diyform.f_data[type].name2 || diyform.f_data[type].name2==''){\r\n                        foxui.toast($this, \"请填写\"+field.tp_name2)\r\n                        return false;\r\n                    }\r\n                } else if (field.data_type == 11){\r\n                  if (!diyform.f_data[type]) {\r\n                    foxui.toast($this, \"请填写\" + field.tp_name);\r\n                    return false;\r\n                  }\r\n                } else if (field.data_type == 3){\r\n                  if (!diyform.f_data[type] || JSON.stringify(diyform.f_data[type]) == '{}') {\r\n                    foxui.toast($this, \"请填写\" + field.tp_name);\r\n                    return false;\r\n                  }\r\n                }\r\n                else{\r\n                    if(!diyform.f_data[type]){\r\n                        foxui.toast($this, \"请填写\"+field.tp_name);\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n            if(field.data_type==6){\r\n                var reg = /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/;\r\n                if (!reg.test(diyform.f_data[type])) {\r\n                    foxui.toast($this, \"请填写正确的\"+field.tp_name);\r\n                    return false;\r\n                }\r\n            }\r\n            if(field.data_type==10){\r\n                if($.isEmptyObject(diyform.f_data[type]) || diyform.f_data[type].name1 != diyform.f_data[type].name2){\r\n                    foxui.toast($this, field.tp_name+\"与\"+field.tp_name2+\"不一致\")\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n};","var app = getApp(), $ = app.requirejs('jquery'), core = app.requirejs('core'), foxui = app.requirejs('foxui');\r\nmodule.exports = {  \r\n  get:function($this, type, callback){\r\n    var self = this;\r\n    core.get('diypage', {type: type}, function (result) {\r\n     \r\n      result.diypage = result.diypage || {};\r\n      for (var i in result.diypage.items){\r\n        if (result.diypage.items[i].id == 'topmenu'){\r\n          $this.setData({ topmenu: result.diypage.items[i]})\r\n        } \r\n      }\r\n      // $this.setData({\r\n      //   customer: result.customer,\r\n      //   phone: result.phone,\r\n      //   phonecolor: result.phonecolor,\r\n      //   phonenumber: result.phonenumber,\r\n      //   customercolor: result.customercolor\r\n      // })\r\n      var customData = {};\r\n      if (result.customer){\r\n        customData.customer = result.customer\r\n      }\r\n      if (result.phone) {\r\n        customData.phone = result.phone\r\n      }\r\n      if (result.phonecolor) {\r\n        customData.phonecolor = result.phonecolor\r\n      }\r\n      if (result.phonenumber) {\r\n        customData.phonenumber = result.phonenumber\r\n      }\r\n      if (result.customercolor) {\r\n        customData.customercolor = result.customercolor\r\n      }\r\n      if (customData){\r\n        $this.setData(customData)\r\n      }\r\n      // var data = {loading: false,diypages: result.diypage, pages: result.diypage.page, usediypage: true,startadv: result.startadv};\r\n      var data = { loading: false, pages: result.diypage.page, usediypage: true, startadv: result.startadv }\r\n  \r\n      if (result.diypage.page){\r\n        $this.setData({\r\n          diytitle: result.diypage.page.title,\r\n        });\r\n      }\r\n      if (result.error!=0){\r\n        $this.setData({\r\n          diypages:false,\r\n          loading: false\r\n        });\r\n        return;\r\n      }\r\n\r\n      if (result.diypage.items != undefined) {\r\n        var arr = [];\r\n        $.each(result.diypage.items, function (id, item) {\r\n          arr.push(item.id);\r\n          if (item.id == 'topmenu') {\r\n            if (item.style.showtype == 2){\r\n              var l = Math.ceil(item.data.length / 4);\r\n              var topmenuheight = 78 * l;\r\n              $this.setData({ topmenuheight: topmenuheight });\r\n            }else{\r\n              var topmenuheight = 78 ;\r\n              $this.setData({ topmenuheight: topmenuheight });\r\n            }\r\n            $this.setData({ topmenu: item, istopmenu: true});\r\n            if (item.data[0] == undefined){\r\n              var linkurl = '';\r\n            }else{\r\n              var linkurl = item.data[0].linkurl;\r\n              core.get('diypage/getInfo', { dataurl: linkurl }, function (ret) {\r\n                item.data[0].data = ret.goods.list;\r\n                data.diypages = result.diypage;\r\n                data.topmenuDataType = ret.type;\r\n                $this.setData(data);\r\n              });\r\n            }\r\n            \r\n          \r\n          } else if (item.id == 'tabbar') {\r\n            if (item.data[0] == undefined) {\r\n              var linkurl = '';\r\n            } else { \r\n              var linkurl = item.data[0].linkurl;  \r\n                core.get('diypage/getInfo', { dataurl: linkurl }, function (ret) {\r\n                  item.data[0].data = ret.goods.list\r\n                  item.type = ret.type;\r\n                  // var diypages = item; \r\n                  if (item.data[0].data !== undefined){\r\n                    if (item.data[0].data.length == ret.goods.count) {\r\n                      item.data[0].showmore = true;\r\n                    }\r\n                  }else{\r\n                    item.data[0].showmore = false;\r\n                  }\r\n                  data.diypages = result.diypage;\r\n                  data.tabbarDataType = ret.type;\r\n                  data.tabbarData = ret.goods;\r\n                  $this.setData(data);\r\n                });\r\n               \r\n            }\r\n          }\r\n        });\r\n   \r\n        wx.setNavigationBarTitle({\r\n          title: data.pages.title\r\n        });\r\n        wx.setNavigationBarColor({\r\n          frontColor: data.pages.titlebarcolor,\r\n          backgroundColor: data.pages.titlebarbg\r\n        });\r\n  \r\n        if (callback) {\r\n          callback(result);\r\n        }\r\n        if(arr.indexOf('topmenu') != -1 || arr.indexOf('tabbar') != -1){\r\n          return\r\n        }\r\n        data.diypages = result.diypage;\r\n        $this.setData(data);\r\n      }\r\n      wx.setNavigationBarTitle({\r\n        title:data.pages.title\r\n      });\r\n      wx.setNavigationBarColor({\r\n        frontColor: data.pages.titlebarcolor,\r\n        backgroundColor: data.pages.titlebarbg\r\n      });\r\n      if (callback){\r\n        callback(result);\r\n      }\r\n    });\r\n  }\r\n \r\n}","var app = getApp(), $ = app.requirejs('jquery'), core = app.requirejs('core'), foxui = app.requirejs('foxui'),diyform = app.requirejs('biz/diyform');\r\nmodule.exports = {\r\n  number: function (e,$this) {\r\n    var dataset = core.pdata(e), val = foxui.number($this, e), id = dataset.id, optionid = dataset.optionid, min = dataset.min, max = dataset.max;\r\n    if ((val == 1 && dataset.value == 1 && e.target.dataset.action == 'minus') || (val < min && e.target.dataset.action == 'minus')){\r\n      foxui.toast($this, \"单次最少购买\" + dataset.value + '件');\r\n      return;\r\n    }\r\n    if (dataset.value == dataset.max && e.target.dataset.action == 'plus'){\r\n      return;\r\n    }\r\n    if (parseInt($this.data.stock) < parseInt(val)) {\r\n      foxui.toast($this, \"库存不足\");\r\n      return;\r\n      }\r\n    $this.setData({ total:val});\r\n  },\r\n  //数量输入绑定事件\r\n  inputNumber: function (e,$this) {\r\n    var maxbuy = $this.data.goods.maxbuy;\r\n    var minbuy = $this.data.goods.minbuy;\r\n    var total = e.detail.value;\r\n    if (total > 0) {\r\n      if (maxbuy > 0 && maxbuy <= parseInt(e.detail.value)) {\r\n        total = maxbuy;\r\n        foxui.toast($this, \"单次最多购买\" + maxbuy + '件');\r\n      }\r\n      if (minbuy > 0 && minbuy > parseInt(e.detail.value)) {\r\n        total = minbuy;\r\n        foxui.toast($this, \"单次最少购买\" + minbuy + '件');\r\n      }\r\n      if (parseInt($this.data.stock) < parseInt(total)) {\r\n        foxui.toast($this, \"库存不足\");\r\n        return;\r\n      }\r\n    } else {\r\n      if (minbuy > 0) {\r\n        total = minbuy;\r\n      } else {\r\n        total = 1;\r\n      }\r\n    }\r\n    $this.setData({ total: total });\r\n  },\r\n  chooseGift(e,$this) {\r\n    \r\n    $this.setData({ giftid: e.currentTarget.dataset.id })\r\n  },\r\n  //立即购买\r\n  buyNow: function (event,$this,page) {\r\n    if (event.currentTarget.dataset.type) {\r\n      page = event.currentTarget.dataset.type\r\n    }\r\n    var optionid = $this.data.optionid;\r\n    var hasOption = $this.data.goods.hasoption;\r\n    var diydata = $this.data.diyform;\r\n    var giftid = $this.data.giftid;\r\n    \r\n    //判断周期购\r\n    if($this.data.goods.type == 9){\r\n      var selectDate = $this.data.checkedDate / 1000;\r\n    }\r\n\r\n    //是否有规格\r\n    if (hasOption > 0 && !optionid) {\r\n      foxui.toast($this, \"请选择规格\");\r\n      return;\r\n    }\r\n    //是否存在自定义表单\r\n    if (diydata && diydata.fields.length > 0) {\r\n  \r\n      var verify = diyform.verify($this,diydata);\r\n      if (!verify){\r\n        return;\r\n      } else {\r\n      \r\n        core.post('order/create/diyform',{\r\n          id: $this.data.id,\r\n          diyformdata: diydata.f_data\r\n        },function (ret) {\r\n          if ($this.data.goods.isgift == 0 || page!='goods_detail') {\r\n            wx.redirectTo({\r\n              url: '/pages/order/create/index?id=' + $this.data.id + '&total=' + $this.data.total + '&optionid=' + optionid + '&gdid=' + ret.gdid + '&selectDate=' + selectDate,\r\n            });\r\n          } else {\r\n            if (giftid) {\r\n              wx.redirectTo({\r\n                url: '/pages/order/create/index?id=' + $this.data.id + '&total=' + $this.data.total + '&optionid=' + optionid + '&gdid=' + ret.gdid + '&giftid=' + giftid,\r\n              });\r\n            }\r\n             else if (giftid != \"\") {//如果选择了赠品或者赠品只有一个\r\n              if ($this.data.goods.giftinfo && $this.data.goods.giftinfo.length == 1) {\r\n                giftid = $this.data.goods.giftinfo[0].id\r\n              }\r\n              if ($this.data.goods.gifts && $this.data.goods.gifts.length == 1) {\r\n                  giftid = $this.data.goods.gifts[0].id//如果赠品只有一个  赋值giftid\r\n                }\r\n                wx.redirectTo({\r\n                  url: '/pages/order/create/index?id=' + $this.data.id + '&total=' + $this.data.total + '&optionid=' + optionid + '&gdid=' + ret.gdid + '&giftid=' + giftid,\r\n                });\r\n              }else{\r\n                foxui.toast($this, \"请选择赠品\");\r\n              }\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      if (giftid) {\r\n        wx.navigateTo({\r\n          url: '/pages/order/create/index?id=' + $this.data.id + '&total=' + $this.data.total + '&optionid=' + optionid + '&giftid=' + giftid,\r\n        });\r\n      }\r\n      else if ($this.data.goods.isgift == 0 || page != 'goods_detail'){\r\n        wx.navigateTo({\r\n          url: '/pages/order/create/index?id=' + $this.data.id + '&total=' + $this.data.total + '&optionid=' + optionid + '&selectDate=' + selectDate,\r\n        });\r\n      }else{\r\n        if (giftid != \"\") {\r\n          if ($this.data.goods.giftinfo && $this.data.goods.giftinfo.length == 1) {\r\n            giftid = $this.data.goods.giftinfo[0].id\r\n          }\r\n          if ($this.data.goods.gifts && $this.data.goods.gifts.length == 1) {\r\n            giftid = $this.data.goods.gifts[0].id;\r\n          }\r\n          wx.navigateTo({\r\n            url: '/pages/order/create/index?id=' + $this.data.id + '&total=' + $this.data.total + '&optionid=' + optionid + '&giftid=' + giftid,\r\n          });\r\n        } else {\r\n          foxui.toast($this, \"请选择赠品\");\r\n        }\r\n      }\r\n    }\r\n  },\r\n  // //加入购物车\r\n  getCart: function (event,$this){\r\n    var optionid = $this.data.optionid;\r\n    \r\n    \r\n    var hasOption = $this.data.goods.hasoption;\r\n    var diydata = $this.data.diyform;\r\n\r\n\r\n    //是否有规格\r\n    if (hasOption > 0 && !optionid) {\r\n      foxui.toast($this, \"请选择规格\");\r\n      return;\r\n    }\r\n    if ($this.data.quickbuy) {\r\n     \r\n      \r\n      \r\n      //是否存在自定义表单\r\n      if (diydata && diydata.fields.length > 0) {\r\n        var verify = diyform.verify($this, diydata);\r\n        if (!verify) {\r\n          return;\r\n        } else {\r\n          // 设置值存储自定义表单\r\n          $this.setData({\r\n            formdataval: {\r\n              diyformdata: diydata.f_data\r\n            }\r\n          })\r\n         \r\n        }\r\n      }\r\n\r\n\r\n      $this.addCartquick(optionid, $this.data.total)\r\n      \r\n    } else {\r\n      \r\n      //是否存在自定义表单\r\n      if (diydata && diydata.fields.length > 0) {\r\n        var verify = diyform.verify($this, diydata);\r\n        if (!verify) {\r\n          return;\r\n        } else {\r\n          // 先提交至diyform_temp\r\n          core.post('order/create/diyform', {\r\n            id: $this.data.id,\r\n            diyformdata: diydata.f_data\r\n          }, function (ret) {\r\n            \r\n            core.post('member/cart/add', {\r\n              id: $this.data.id,\r\n              total: $this.data.total,\r\n              optionid: optionid,\r\n              diyformdata: diydata.f_data\r\n            }, function (ret) {\r\n              if (ret.error == 0) {\r\n                $this.setData({\r\n                  'goods.cartcount': ret.cartcount,\r\n                  active: '',\r\n                  slider: 'out',\r\n                  isSelected: true,\r\n                  tempname: ''\r\n                });\r\n                foxui.toast($this, \"添加成功\");\r\n              }else{\r\n                foxui.toast($this, ret.message);\r\n                return;\r\n              }\r\n            });\r\n          });\r\n        }\r\n      } else {\r\n        core.post('member/cart/add', {\r\n          id: $this.data.id,\r\n          total: $this.data.total,\r\n          optionid: optionid\r\n        }, function (ret) {\r\n          if (ret.error == 0) {\r\n            foxui.toast($this, \"添加成功\");\r\n            var tempdata = $this.data.goods;\r\n            $this.setData({ 'goods.cartcount': ret.cartcount, active: '', slider: 'out', isSelected: true, tempname: '',goods: tempdata });\r\n          }else{\r\n            foxui.toast($this, ret.message);\r\n            return;\r\n          }\r\n        });\r\n      }\r\n    }\r\n    \r\n\r\n\r\n\r\n    \r\n  },\r\n  selectpicker: function (e, $this, page, modeltakeout) {\r\n    if(e.currentTarget.dataset.home==1) {\r\n      $this.setData({ giftid: '', })\r\n    }\r\n    app.checkAuth();\r\n     \r\n    $this.setData({ optionid: '', specsData: '', specsTitle: '', 'goods.member_discount':''}); \r\n    var active = $this.data.active\r\n    var id = e.currentTarget.dataset.id\r\n    if (active =='') {\r\n      $this.setData({slider:'in', show:true})\r\n    }\r\n   \r\n    core.get('goods/get_picker', {id:id }, function (result) {\r\n      if (!result.goods.presellstartstatus && result.goods.presellstartstatus != undefined && result.goods.ispresell == '1'){\r\n        foxui.toast($this, result.goods.presellstatustitle);\r\n        return;\r\n      }\r\n      if (!result.goods.presellendstatus && result.goods.presellstartstatus != undefined && result.goods.ispresell == '1') {\r\n        foxui.toast($this, result.goods.presellstatustitle);\r\n        return;\r\n      }\r\n      if (result.goods && result.goods.giftinfo) {\r\n      \r\n        if (result.goods.giftinfo.length ==1) {\r\n          $this.setData({ giftid: result.goods.giftinfo[0].id })\r\n        }\r\n      }\r\n      var options = result.options;  \r\n      if(page=='goodsdetail'){\r\n        $this.setData({\r\n          pickerOption: result,\r\n          canbuy: $this.data.goods.canbuy,\r\n          buyType: e.currentTarget.dataset.buytype,\r\n          options: options,\r\n          minpicker: page,\r\n          \"goods.thistime\": result.goods.thistime,\r\n        });\r\n        if (result.goods.minbuy != 0 && $this.data.total < result.goods.minbuy) {\r\n          var total = result.goods.minbuy\r\n        } else {\r\n          var total = $this.data.total\r\n        }    \r\n      }else{\r\n        $this.setData({\r\n          pickerOption: result,\r\n          goods: result.goods,\r\n          options: options,\r\n          minpicker: page,\r\n        });\r\n        // var tempdata = $this.data.goods;\r\n        // tempdata.optionid = false;\r\n        // var goods = $this.data.goods;\r\n       \r\n        $this.setData({\r\n          optionid: false,\r\n          specsData: [],\r\n          specs: []\r\n        })\r\n        \r\n        if (result.goods.minbuy != 0 && $this.data.total < result.goods.minbuy) {\r\n          var total = result.goods.minbuy\r\n        } else {\r\n          var total = 1\r\n        }\r\n      } \r\n      \r\n      if (result.diyform) {\r\n        $this.setData({\r\n          diyform: { fields: result.diyform.fields, f_data: result.diyform.lastdata }\r\n        });\r\n      }\r\n      $this.setData({\r\n        id: id,\r\n        pagepicker: page,\r\n        total: total,\r\n        tempname: 'select-picker',\r\n        active: 'active',\r\n        show: true,\r\n        modeltakeout: modeltakeout\r\n      })\r\n    });\r\n  },\r\n  //此方法处理sort方法判断的时候,根据第一个数字的大小来排序导致错误.例如 1456<945; author by sunc;\r\n  sortNumber:function(a,b){\r\n    return (a - b);\r\n  },\r\n  //选规格\r\n  specsTap:function (event, $this){ \r\n    var specs = $this.data.specs;\r\n    var idx = event.target.dataset.idx;\r\n    specs[idx] ={id: event.target.dataset.id, title: event.target.dataset.title };\r\n    var title ='';\r\n    var optionTitle = '';\r\n    var optionids = [];\r\n    specs.forEach(function (e){\r\n      title += e.title + ';';\r\n      // optionTitle += e.id + '_';\r\n      optionids.push(e.id);\r\n    });\r\n    // var newOptionids = optionids.sort();\r\n    var newOptionids = optionids.sort(this.sortNumber);\r\n    optionTitle = newOptionids.join('_');\r\n    // optionTitle = optionTitle.substring(0, optionTitle.length - 1);\r\n    var options = $this.data.options;\r\n    if (event.target.dataset.thumb != '') {\r\n      $this.setData({\r\n        'goods.thumb': event.target.dataset.thumb,\r\n      })\r\n    }\r\n  \r\n    options.forEach(function (e){\r\n    \r\n      if (e.specs == optionTitle) {\r\n        $this.setData({\r\n          optionid: e.id,\r\n          'goods.total': e.stock,\r\n          'goods.maxprice': e.marketprice,\r\n          'goods.minprice': e.marketprice,\r\n          'goods.marketprice': e.marketprice,\r\n          'goods.member_discount': e.member_discount,\r\n          'goods.seecommission': e.seecommission,\r\n          'goods.presellprice': $this.data.goods.ispresell > 0 ? e.presellprice : $this.data.goods.presellprice,\r\n          optionCommission:true\r\n        });\r\n      \r\n        if (parseInt(e.stock) < parseInt($this.data.total)) {\r\n          $this.setData({\r\n            canBuy: '库存不足',\r\n            stock: e.stock\r\n          })\r\n          foxui.toast($this, \"库存不足\");\r\n        } else {\r\n          $this.setData({\r\n            canBuy:'',\r\n            stock: e.stock\r\n          })\r\n        }\r\n      }\r\n    });\r\n    \r\n    $this.setData({\r\n      specsData:specs,\r\n      specsTitle: title,\r\n    });\r\n  },\r\n\r\n}\r\n\r\n","/**\r\n *\r\n * order.js\r\n *\r\n * @create 2017-1-15\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-15\r\n *\r\n */\r\nvar app = getApp(), core = app.requirejs('core');\r\nmodule.exports = {\r\n    url:function (url) {\r\n        wx.redirectTo({\r\n            url: url\r\n        })\r\n    },\r\n    cancelArray: ['我不想买了', '信息填写错误，重新拍', '同城见面交易', '其他原因'],\r\n    order: [\r\n        '确认要取消该订单吗?',\r\n        '确认要删除该订单吗?',\r\n        '确认要彻底删除该订单吗?',\r\n        '确认要恢复该订单吗?',\r\n        '确认已收到货了吗?',\r\n        '确定您要取消申请?'\r\n    ],\r\n    cancel: function (id, index,url) {\r\n        var $this=this,remark = this.cancelArray[index];\r\n        core.post('groups/order/cancel', { id: id, cancel_reason: remark}, function (data) {\r\n            if (data.error == 0) {\r\n                $this.url(url);\r\n            }\r\n        }, true);\r\n    },\r\n    delete: function (id, userdeleted,url,self) {\r\n        var $this=this;\r\n        core.confirm(userdeleted==0?this.order[3]:this.order[userdeleted],function () {\r\n            core.post('order/op/delete', {id: id, userdeleted: userdeleted}, function (data) {\r\n                if (data.error == 0) {\r\n                    if (typeof self != 'undefined'){\r\n                        self.setData({\r\n                            page:1,\r\n                            list:[]\r\n                        });\r\n                        self.get_list()\r\n                    }else{\r\n                        $this.url(url);\r\n                    }\r\n                    return;\r\n                }\r\n                core.toast(data.message,'loading');\r\n            }, true)\r\n        });\r\n    },\r\n    finish: function (id,url) {\r\n        var $this=this;\r\n        core.confirm(this.order[4],function () {\r\n            core.post('order/op/finish', {id: id}, function (data) {\r\n                if (data.error == 0) {\r\n                    $this.url(url);\r\n                    return;\r\n                }\r\n                core.toast(data.message,'loading');\r\n            }, true)\r\n        });\r\n    },\r\n    refundcancel:function (id,callback) {\r\n        var $this=this;\r\n        core.confirm(this.order[5],function () {\r\n            core.post('order/refund/cancel', {id: id}, function (data) {\r\n                if (data.error == 0) {\r\n                    if (typeof callback == 'function'){\r\n                        callback();\r\n                    }else{\r\n                        $this.url(callback);\r\n                    }\r\n                    return;\r\n                }\r\n                core.toast(data.message,'loading');\r\n            }, true)\r\n        });\r\n    },\r\n    codeshow: function (page,e) {\r\n        var orderid=core.data(e).orderid;\r\n        core.post('verify/qrcode',{id:orderid},function (json) {\r\n            if (json.error==0){\r\n                $this.setData({\r\n                    code: true,\r\n                    qrcode: json.url\r\n                })\r\n            }else{\r\n                core.alert(json.message);\r\n            }\r\n        },true);\r\n    },\r\n    codehidden: function (page) {\r\n        page.setData({\r\n            code: false,\r\n        })\r\n    },\r\n};","/**\r\n *\r\n * order.js\r\n *\r\n * @create 2017-1-15\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-15\r\n *\r\n */\r\nvar app = getApp(), core = app.requirejs('core');\r\nmodule.exports = {\r\n    url:function (url) {\r\n        wx.redirectTo({\r\n            url: url\r\n        })\r\n    },\r\n    cancelArray: ['我不想买了', '信息填写错误，重新拍', '同城见面交易', '其他原因'],\r\n    order: [\r\n        '确认要取消该订单吗?',\r\n        '确认要删除该订单吗?',\r\n        '确认要彻底删除该订单吗?',\r\n        '确认要恢复该订单吗?',\r\n        '确认已收到货了吗?',\r\n        '确定您要取消申请?'\r\n    ],\r\n    cancel: function (id, index,url) {\r\n        var $this=this,remark = this.cancelArray[index];\r\n        core.post('order/op/cancel', {id: id, remark: remark}, function (data) {\r\n            if (data.error == 0) {\r\n                $this.url(url);\r\n            }\r\n        }, true);\r\n    },\r\n    delete: function (id, userdeleted,url,self) {\r\n        var $this=this;\r\n        core.confirm(userdeleted==0?this.order[3]:this.order[userdeleted],function () {\r\n            core.post('order/op/delete', {id: id, userdeleted: userdeleted}, function (data) {\r\n                if (data.error == 0) {\r\n                    if (typeof self != 'undefined'){\r\n                        self.setData({\r\n                            page:1,\r\n                            list:[]\r\n                        });\r\n                        self.get_list()\r\n                    }else{\r\n                        $this.url(url);\r\n                    }\r\n                    return;\r\n                }\r\n                core.toast(data.message,'loading');\r\n            }, true)\r\n        });\r\n    },\r\n    finish: function (id,url) {\r\n        var $this=this;\r\n        core.confirm(this.order[4],function () {\r\n            core.post('order/op/finish', {id: id}, function (data) {\r\n                if (data.error == 0) {\r\n                    $this.url(url);\r\n                    return;\r\n                }\r\n                core.toast(data.message,'loading');\r\n            }, true)\r\n        });\r\n    },\r\n    refundcancel:function (id,callback) {\r\n        var $this=this;\r\n        core.confirm(this.order[5],function () {\r\n            core.post('order/refund/cancel', {id: id}, function (data) {\r\n                if (data.error == 0) {\r\n                    if (typeof callback == 'function'){\r\n                        callback();\r\n                    }else{\r\n                        $this.url(callback);\r\n                    }\r\n                    return;\r\n                }\r\n                core.toast(data.message,'loading');\r\n            }, true)\r\n        });\r\n    },\r\n    codeshow: function (page,e) {\r\n        var orderid=core.data(e).orderid;\r\n        core.post('verify/qrcode',{id:orderid},function (json) {\r\n            if (json.error==0){\r\n                $this.setData({\r\n                    code: true,\r\n                    qrcode: json.url\r\n                })\r\n            }else{\r\n                core.alert(json.message);\r\n            }\r\n        },true);\r\n    },\r\n    codehidden: function (page) {\r\n        page.setData({\r\n            code: false,\r\n        })\r\n    },\r\n};","/**\r\n * Created by ELINKINT on 2018/3/9.\r\n */\r\nmodule.exports = {\r\n    //时间选择器 前后月份选择\r\n    doDay: function (e,$this) {\r\n        var currentObj = $this.data.currentObj\r\n        var Y = currentObj.getFullYear();\r\n        var m = currentObj.getMonth() + 1;\r\n        var d = currentObj.getDate();\r\n        var str = ''\r\n        if (e.currentTarget.dataset.key == 'left') {\r\n            m -= 1\r\n            if (m <= 0) {\r\n                str = (Y - 1) + '/' + 12 + '/' + d\r\n            } else {\r\n                str = Y + '/' + m + '/' + d\r\n            }\r\n        } else {\r\n            m += 1\r\n            if (m <= 12) {\r\n                str = Y + '/' + m + '/' + d\r\n            } else {\r\n                str = (Y + 1) + '/' + 1 + '/' + d\r\n            }\r\n        }\r\n        currentObj = new Date(str);\r\n        var week = ['周日','周一','周二','周三','周四','周五','周六'];\r\n        $this.setData({\r\n            currentDate: currentObj.getFullYear() + '年' + (currentObj.getMonth() + 1) + '月' + currentObj.getDate()+'日'+week[currentObj.getDay()],\r\n            // currentDate: currentObj.getFullYear() + '年' + (currentObj.getMonth() + 1) + '月' + currentObj.getDate()+'日',\r\n            currentObj: currentObj,\r\n            /*  获取当前的年、月  */\r\n            currentYear: currentObj.getFullYear(),\r\n            currentMonth: (currentObj.getMonth() + 1),\r\n        })\r\n        this.setSchedule($this);\r\n    },\r\n    //返回初始日期\r\n    getCurrentDayString: function ($this,initDate) {\r\n        var objDate = $this.data.currentObj\r\n        if (objDate != '') {\r\n            return objDate\r\n        } else {\r\n            var date=initDate.replace(/^(\\d{4})(\\d{2})(\\d{2})$/, \"$1/$2/$3\");\r\n            return  new Date(date);\r\n        }\r\n    },\r\n    //重绘日历\r\n    setSchedule: function ($this) {\r\n        var m = $this.data.currentObj.getMonth() + 1\r\n        var Y = $this.data.currentObj.getFullYear()\r\n        var d = $this.data.currentObj.getDate();\r\n        var dayString = Y + '/' + m + '/' + $this.data.currentObj.getDate()\r\n        var currentDayNum = new Date(Y, m, 0).getDate()\r\n        var currentDayWeek = $this.data.currentObj.getUTCDay() + 1\r\n        var result = currentDayWeek - (d % 7 - 1);\r\n        var firstKey = result <= 0 ? 7 + result : result;\r\n        var currentDayList = [];\r\n        var f = 0\r\n        var currentdate = {}\r\n        currentdate.y = Y;\r\n        currentdate.m = m;\r\n        if(m < 10){\r\n            currentdate.m = '0' + m\r\n        }\r\n        var week = ['周一','周二','周三','周四','周五','周六','周日'];\r\n\r\n        if ($this.data.isdelay==1) {\r\n            var unit_date = [1, 7, 30];\r\n            var periodic = [];\r\n            periodic = $this.data.cycelbuy_periodic.split(\",\");\r\n            var interval = periodic[0] * (unit_date[periodic[1]]);\r\n            var period_index = $this.data.period_index;\r\n            if (period_index==0){\r\n              period_index=1;\r\n            }\r\n            \r\n            var period_rest=periodic[2]-period_index+1;\r\n        }\r\n        var maxday=$this.data.maxday;//可选的天数\r\n        var initDate = $this.data.initDate;//初始时间\r\n        var checkedDate=$this.data.checkedDate;//选中的时间\r\n        for (var i = 0; i < 42; i++) {\r\n            var week_index = i % 7;\r\n            let data = []\r\n            if (i < firstKey - 1) {\r\n                currentDayList[i] = { id: '',week:'',no_optional: true, checked: false}\r\n            } else {\r\n                if (f < currentDayNum) {\r\n                    currentdate.d = f +1;\r\n                    if (f < 9) {\r\n                        var f1 = f + 1\r\n                        currentdate.d = '0' + f1\r\n                    }\r\n                    var no_optional = false;//是否不可选\r\n                    var checked = false;//是否选中\r\n                    var date = Date.parse(currentdate.y +'/' +currentdate.m +'/'+currentdate.d);\r\n\r\n                    //第一天之前不可选择\r\n                    if (date < initDate){\r\n                        no_optional = true;\r\n                    }\r\n                    \r\n                    //如果是延期\r\n                    if($this.data.isdelay==1){\r\n                        //根据时间间隔，算出选中状态\r\n                        //当前日期减掉被选择的日期跟时间间隔求余等于零 and 当前日期小于被选择的日期的最后一期  and 当前日期大于被选择的日期时则选中\r\n                      if ((date - checkedDate) % (interval*86400000) == 0 &&  \r\n                        date < (checkedDate + (period_rest * interval*86400000)) && date > checkedDate){\r\n                            checked = true;\r\n                        }\r\n                    }\r\n\r\n                    //如果当前时间大于可延期的截至日期时则不可选\r\n                    if(date>(initDate+((maxday-1)*86400000))){\r\n                        no_optional = true;\r\n                    }\r\n\r\n                    //选中当天\r\n                    if (date == checkedDate) {\r\n                        no_optional = false;\r\n                        checked = true;\r\n                    }\r\n                    currentDayList[i] = { id: f + 1,week:week[week_index], no_optional: no_optional, checked: checked};\r\n                    f = currentDayList[i].id\r\n\r\n                } else if (f >= currentDayNum) {\r\n                    currentDayList[i] = { id: '',week:'',no_optional: true, checked: false}\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        $this.setData({\r\n            currentDayList: currentDayList\r\n        })\r\n    },\r\n\r\n    //选择具体日期方法\r\n    selectDay: function (e,$this) {\r\n        if (!e.target.dataset.day) {\r\n            return;\r\n        }\r\n        \r\n        //如果是订单创建，则将年月日分割文字替换为点\r\n        \r\n        if($this.data.create){\r\n            var currentDate=$this.data.currentYear + '.' + $this.data.currentMonth + '.' + e.target.dataset.day+' '+ e.target.dataset.week;//真实选择数据\r\n        }else{\r\n            var currentDate=$this.data.currentYear + '年' + $this.data.currentMonth + '月' + e.target.dataset.day+'日 '+ e.target.dataset.week;//真实选择数据\r\n        }\r\n        $this.setData({\r\n            currentDay: e.target.dataset.day,//选择的数据，非真实当前日期\r\n            currentDa: e.target.dataset.day, //选择某月具体的一天\r\n            currentDate: currentDate,//真实选择数据\r\n            checkedDate:Date.parse($this.data.currentYear + '/' + $this.data.currentMonth + '/' + e.target.dataset.day),\r\n            receipttime:Date.parse($this.data.currentYear + '/' + $this.data.currentMonth + '/' + e.target.dataset.day) / 1000,\r\n        })\r\n        \r\n    \r\n    }\r\n}","var $ = require('jquery');\r\nmodule.exports = {\r\n    toQueryPair: function (key, value) {\r\n        if (typeof value == 'undefined') {\r\n            return key\r\n        }\r\n        return key + '=' + encodeURIComponent(value === null ? '' : String(value))\r\n    },\r\n    getUrl: function (routes, params, full) {\r\n        routes = routes.replace(/\\//ig, \".\");\r\n        var config = getApp().getConfig();\r\n        var url = config.api + \"&r=\" + routes;\r\n        if (params) {\r\n            if (typeof(params) == 'object') {\r\n                url += \"&\" + $.param(params)\r\n            } else if (typeof(params) == 'string') {\r\n                url += \"&\" + params\r\n            }\r\n        }\r\n        return url\r\n    },\r\n    json: function (routes, args, callback, hasloading, ispost, session) {\r\n        var app = getApp(), userinfo_openid = app.getCache('userinfo_openid'),usermid=app.getCache('usermid'),authkey = app.getCache('authkey'),$this=this;\r\n        args = args || {};\r\n        args.comefrom = 'wxapp';\r\n        args.openid = 'sns_wa_' + userinfo_openid;\r\n        \r\n        \r\n        if (usermid) {\r\n            args.mid = usermid.mid;\r\n            args.merchid = args.merchid || usermid.merchid;\r\n        }\r\n        var self = this;\r\n        if (hasloading) {\r\n            self.loading();\r\n        }\r\n        if (args){\r\n            args.authkey = authkey || '';\r\n        }\r\n        var url = ispost ? this.getUrl(routes) : this.getUrl(routes, args);\r\n        var op = {\r\n            url: url + \"&timestamp=\" + (+new Date()),\r\n            method: ispost ? 'POST' : 'GET',\r\n            header: {\r\n                'Content-type': ispost ? 'application/x-www-form-urlencoded' : 'application/json',\r\n                'Cookie': 'PHPSESSID=' + userinfo_openid\r\n            }\r\n        };\r\n        if (!session) {\r\n            delete op.header.Cookie;\r\n        }\r\n        if (ispost) {\r\n            op.data = $.param(args);\r\n        }\r\n        if (callback) {\r\n            op.success = function (res) {\r\n                //session\r\n                if (hasloading) {\r\n                    self.hideLoading();\r\n                }\r\n                if (res.errMsg == 'request:ok')\r\n                    if (typeof(callback) === 'function') {\r\n                        app.setCache('authkey',res.data.authkey || '');\r\n                        if (typeof (res.data.sysset) !== 'undefined') {\r\n\r\n\r\n                          if (res.data.sysset.isclose == 1) {\r\n                            wx.redirectTo({\r\n                              url: '/pages/message/auth/index?close=1&text=' + res.data.sysset.closetext\r\n                            })\r\n                            return;\r\n                          }\r\n                          app.setCache(\"sysset\", res.data.sysset);\r\n\r\n                        }\r\n                        callback(res.data);\r\n                        \r\n                    }\r\n            }\r\n        } \r\n        op.fail = function (res) {\r\n           if (hasloading) {\r\n              self.hideLoading();\r\n           }\r\n           self.alert(res.errMsg);\r\n        }\r\n\r\n        wx.request(op);\r\n    },\r\n    post: function (routes, args, callback, hasloading, session) {\r\n        this.json(routes, args, callback, hasloading, true, session)\r\n    },\r\n    get: function (routes, args, callback, hasloading, session) {\r\n        this.json(routes, args, callback, hasloading, false, session)\r\n    },\r\n    getDistanceByLnglat: function (lng1, lat1, lng2, lat2) {\r\n        function rad(d) {\r\n            return d * Math.PI / 180.0\r\n        }\r\n\r\n        var rad1 = rad(lat1), rad2 = rad(lat2);\r\n        var a = rad1 - rad2, b = rad(lng1) - rad(lng2);\r\n        var s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) + Math.cos(rad1) * Math.cos(rad2) * Math.pow(Math.sin(b / 2), 2)));\r\n        s = s * 6378137.0;\r\n        s = Math.round(s * 10000) / 10000000;\r\n        return s\r\n    },\r\n    alert: function (msg, callback) {\r\n        if (typeof(msg) === 'object') {\r\n            msg = JSON.stringify(msg);\r\n        }\r\n        wx.showModal({\r\n            title: '提示',\r\n            content: msg,\r\n            showCancel: false,\r\n            success: function (res) {\r\n                if (res.confirm) {\r\n                    typeof(confirm) === 'function' && callback();\r\n                }\r\n            }\r\n        })\r\n    },\r\n    confirm: function (msg, confirm_callback, cancel_callback) {\r\n        if (typeof(msg) === 'object') {\r\n            msg = JSON.stringify(msg);\r\n        }\r\n        wx.showModal({\r\n            title: '提示',\r\n            content: msg,\r\n            showCancel: true,\r\n            success: function (res) {\r\n                if (res.confirm) {\r\n                    typeof(confirm_callback) === 'function' && confirm_callback();\r\n                } else {\r\n                    typeof(cancel_callback) === 'function' && cancel_callback();\r\n                }\r\n            }\r\n        })\r\n    },\r\n    loading: function (msg) {\r\n\r\n        if (typeof(msg) === 'undefined' || msg == '') {\r\n            msg = '加载中';\r\n        }\r\n        wx.showToast({\r\n            title: msg,\r\n            icon: 'loading',\r\n            duration: 5000000\r\n        });\r\n    },\r\n    hideLoading: function () {\r\n        wx.hideToast();\r\n    },\r\n    toast: function (msg, type) {\r\n        if (!type) {\r\n            type = 'success';\r\n        }\r\n        wx.showToast({\r\n            title: msg,\r\n            icon: type,\r\n            duration: 1000\r\n        });\r\n    },\r\n    success: function (msg) {\r\n\r\n        wx.showToast({\r\n            title: msg,\r\n            icon: 'success',\r\n            duration: 1000\r\n        });\r\n    },\r\n    upload: function (uploadCallback) {\r\n\r\n        var self = this;\r\n        wx.chooseImage({\r\n            success: function (res) {\r\n                self.loading('正在上传...');\r\n\r\n                var url = self.getUrl('util/uploader/upload', {file: 'file'})\r\n                var tempFilePaths = res.tempFilePaths;\r\n                //  if( typeof(chooseCallback)==='function'){\r\n                //      chooseCallback(res.tempFilePaths[0] );\r\n                //  }\r\n                wx.uploadFile({\r\n                    url: url,\r\n                    filePath: tempFilePaths[0],\r\n                    name: 'file',\r\n                    success: function (res) {\r\n                        self.hideLoading();\r\n                        var result = JSON.parse(res.data);\r\n                        if (result.error == 0) {\r\n                            if (typeof(uploadCallback) === 'function') {\r\n                                var file = result.files[0];\r\n                                uploadCallback(file);\r\n                            }\r\n                            return;\r\n                        }\r\n                        self.alert(\"上传失败\");\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    },\r\n    pdata: function (e) {\r\n        return e.currentTarget.dataset;\r\n    },\r\n    data: function (e) {\r\n        return e.target.dataset;\r\n    },\r\n    phone: function (e) {\r\n        var phone = this.pdata(e).phone;\r\n        wx.makePhoneCall({\r\n            phoneNumber: phone\r\n        });\r\n    },\r\n    /**\r\n     *\r\n     * @param obj\r\n     * @param succalback\r\n     * @param fail\r\n     * @returns {boolean}\r\n     */\r\n    pay: function (obj, succalback, fail) {\r\n        var $this = this;\r\n        if (typeof obj != 'object') {\r\n            return false;\r\n        }\r\n        if (typeof succalback != 'function') {\r\n            return false;\r\n        }\r\n        obj.success = succalback;\r\n        if (typeof fail == 'function') {\r\n            obj.fail = fail;\r\n        }\r\n        wx.requestPayment(obj);\r\n    },\r\n    cartcount: function (page) {\r\n        this.get('member/cart/count', {}, function (data) {\r\n            page.setData({\r\n                cartcount: data.cartcount\r\n            });\r\n        });\r\n    },\r\n    onShareAppMessage: function (url, customtitle) {\r\n        var app = getApp(),sysset = app.getCache('sysset'),share=sysset.share||{},userinfo_id = app.getCache('userinfo_id'),mid='';\r\n        var title = sysset.shopname||'';\r\n        var desc = sysset.description||'';\r\n        if (share.title) title = share.title;\r\n        if (customtitle) title = customtitle;\r\n        if (share.desc) desc = share.desc;\r\n        url = url || '/pages/index/index';\r\n        url = url.indexOf('?') != -1 ? url+'&' : url+'?';\r\n        return {\r\n            title: title,\r\n            desc: desc,\r\n            path: url + 'mid=' + userinfo_id\r\n        }\r\n    },\r\n\r\n    str2Obj: function (str) {\r\n        if(typeof str !='string'){\r\n            return str;\r\n        }\r\n        if(str.indexOf('&') < 0 && str.indexOf('=') < 0){\r\n            return {};\r\n        }\r\n        var oldArr = str.split('&'), obj = {};\r\n        $.each(oldArr, function (index, item) {\r\n            if(item.indexOf('=') > -1){\r\n                var arr = item.split('=');\r\n                obj[arr[0]] = arr[1];\r\n            }\r\n        });\r\n        return obj;\r\n    },\r\n\r\n  // 倒计时\r\n  //timePoint 截止时间点、时间戳\r\n  countDown: function (timePoint, time) {\r\n    // 当前时间\r\n    let now = parseInt(Date.now() / 1000);\r\n    let leftTime = 0;\r\n    if (timePoint) {\r\n      leftTime = timePoint > now ? (timePoint - now) : (now - timePoint); //时间差\r\n      leftTime = parseInt(leftTime);\r\n    }\r\n    if (time) {\r\n      leftTime = parseInt(time);\r\n    }\r\n    if (leftTime == 0) {\r\n      return false;\r\n    } else {\r\n      let day = Math.floor(leftTime / (60 * 60 * 24));\r\n      let hour = Math.floor((leftTime - day * 24 * 60 * 60) / 3600);\r\n      let minute = Math.floor((leftTime - day * 24 * 60 * 60 - hour * 3600) / 60);\r\n      let second = Math.floor(leftTime - day * 24 * 60 * 60 - hour * 3600 - minute * 60);\r\n      let time = [day, hour < 10 ? '0' + hour : hour, minute < 10 ? '0' + minute : minute, second < 10 ? '0' + second : second];\r\n      return time;\r\n    }\r\n  },\r\n};","var app = getApp();\r\nvar core = app.requirejs('core');\r\nmodule.exports.number = function(page,e){\r\n    var number = e.currentTarget.dataset;\r\n    var value =     number.value;\r\n\r\n    var min = number.hasOwnProperty('min') ? parseInt(number.min) : 1,\r\n        max = number.hasOwnProperty('max') ? parseInt(number.max) : 999;\r\n    if(e.target.dataset.action==='minus'){\r\n      if (value > 1 && (value > min || min == 0)) {\r\n        value--;\r\n      } else {\r\n          if(min==0){\r\n              min=1;\r\n          }\r\n        this.toast(page, '最少购买' + min + '件')\r\n      }\r\n    } else if(e.target.dataset.action==='plus'){\r\n        if(value<max||max==0){\r\n            value++;\r\n        }else {\r\n          this.toast(page, '最多购买' + max+'件')\r\n        }\r\n    }\r\n    return value;\r\n};\r\n\r\n/**\r\n * 显示底部 toast 必须将view 放于page底部  固定变量名为为 FoxUIToast { show: 是否显示 text 显示的文字}\r\n * <view class=\"fui-toast {{FoxUIToast.show?'in':'out'}}\"><view class=\"text\">{{FoxUIToast.text}}</view></view>\r\n *  Page事件：\r\n *   core.requirejs('foxui').toast(this,text);\r\n *  text 为显示的的提示\r\n *\r\n */\r\nmodule.exports.toast = function(page, text,duration){\r\n    if(!duration){\r\n        duration = 1500;\r\n    }\r\n    page.setData({\r\n        FoxUIToast: {show:true,text:text}\r\n    });\r\n    var self = this;\r\n    setTimeout(function(){\r\n        page.setData({\r\n            FoxUIToast: {show:false}\r\n        });\r\n    },duration);\r\n};\r\n\r\n/**\r\n * 显示顶部 notify 必须将view 放于page底部  固定变量名为为 FoxUINotify { show: 是否显示 text 显示的文字 type 样式}\r\n * <view class=\"fui-notify fui-notify-{{FoxUINotify.style}} {{FoxUIToast.show?'in':'out'}}\"><view class=\"text\">{{FoxUIToast.text}}</view></view>\r\n *  Page事件：\r\n *   core.requirejs('foxui').notify(this,text,type);\r\n *   text 为显示的的提示\r\n *   style 样式 默认 default 其他 primary success danger warning\r\n *\r\n */\r\nmodule.exports.notify = function(page, text,style, duration){\r\n    if(!duration){\r\n        duration = 1500;\r\n    }\r\n    if(!style){\r\n        style = 'default';\r\n    }\r\n    page.setData({\r\n        FoxUINotify: {show:true,text:text,style:style}\r\n    });\r\n    var self = this;\r\n    setTimeout(function(){\r\n        page.setData({\r\n            FoxUINotify: {show:false}\r\n        });\r\n    },duration);\r\n};","module.exports = {\r\n    voice: '/static/images/icon/systemprompt.png',\r\n    mute: '/static/images/icon/mute.png',\r\n    home: '/static/images/icon/home.png',\r\n    home_red: '/static/images/icon-red/home.png',\r\n    cate: '/static/images/icon/cate.png',\r\n    cate_red: '/static/images/icon-red/cate.png',\r\n    cart: '/static/images/icon/cart.png',\r\n    cart_red: '/static/images/icon-red/cart.png',\r\n    people: '/static/images/icon/people.png',\r\n    people_red: '/static/images/icon-red/people.png',\r\n    shop: '/static/images/icon/shop.png',\r\n    order: '/static/images/icon/order.png',\r\n    cartWhite: '/static/images/icon-white/cart.png',\r\n    like: '/static/images/icon/like.png',\r\n    likeactive: '/static/images/icon-red/like.png',\r\n    likefill: '/static/images/icon/like_fill.png',\r\n    footprint: '/static/images/icon/footprint.png',\r\n    notice: '/static/images/icon/notice.png',\r\n    list: '/static/images/icon/list.png',\r\n    location: '/static/images/icon/dingwei.png',\r\n    setting: '/static/images/icon-white/setting.png',\r\n    paying48: '/static/images/icon/paying-48.png',\r\n    deliver48: '/static/images/icon/deliver-48.png',\r\n    box48: '/static/images/icon/box-48.png',\r\n    refund48: '/static/images/icon/refund-48.png',\r\n    store:'/static/images/icon/store.png',\r\n    storeWhite:'/static/images/icon-white/store.png',\r\n    search:'/static/images/icon/search.png',\r\n    money:'/static/images/icon/money.png',\r\n    coupon:'/static/images/icon/coupon.png',\r\n    card:'/static/images/icon/card.png',\r\n    car48:'/static/images/icon/car-48.png',\r\n    cry220:'/static/images/icon/car-220.png',\r\n    group:'/static/images/icon/group.png',\r\n    mobile:'/static/images/icon/mobile.png',\r\n    labelGreen:'/static/images/label-green.png',\r\n    labelRed:'/static/images/label-red.png',\r\n    back:'/static/images/icon/back.png',\r\n    nopic:'/static/images/nopic.png',\r\n    dingdan: '/static/images/icon/dingdan.png',\r\n    tianjia:'/static/images/icon/tianjia.png',\r\n    service: '/static/images/icon-white/service.png',\r\n    service2: '/static/images/icon/service.png',\r\n    my: '/static/images/icon/my.png'\r\n}\r\n","var\r\n    // The deferred used on DOM ready\r\n    readyList,\r\n\r\n\r\n    // [[Class]] -> type pairs\r\n    class2type = {},\r\n\r\n    // List of deleted data cache ids, so we can reuse them\r\n    core_deletedIds = [],\r\n\r\n    core_version = \"1.10.2\",\r\n\r\n    // Save a reference to some core methods\r\n    core_concat = core_deletedIds.concat,\r\n    core_push = core_deletedIds.push,\r\n    core_slice = core_deletedIds.slice,\r\n    core_indexOf = core_deletedIds.indexOf,\r\n    core_toString = class2type.toString,\r\n    core_hasOwn = class2type.hasOwnProperty,\r\n    core_trim = core_version.trim;\r\nvar r20 = /%20/g,\r\n    rbracket = /\\[\\]$/,\r\n    rCRLF = /\\r?\\n/g,\r\n    rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\r\n    rsubmittable = /^(?:input|select|textarea|keygen)/i;\r\n\r\nvar jQuery = {\r\n    // See test/unit/core.js for details concerning isFunction.\r\n    // Since version 1.3, DOM methods and functions like alert\r\n    // aren't supported. They return false on IE (#2968).\r\n    isFunction: function (obj) {\r\n        return jQuery.type(obj) === \"function\";\r\n    },\r\n\r\n    isArray: Array.isArray || function (obj) {\r\n        return jQuery.type(obj) === \"array\";\r\n    },\r\n\r\n    isWindow: function (obj) {\r\n        /* jshint eqeqeq: false */\r\n        return obj != null && obj == obj.window;\r\n    },\r\n\r\n    isNumeric: function (obj) {\r\n        return !isNaN(parseFloat(obj)) && isFinite(obj);\r\n    },\r\n\r\n    type: function (obj) {\r\n        if (obj == null) {\r\n            return String(obj);\r\n        }\r\n        return typeof obj === \"object\" || typeof obj === \"function\" ?\r\n            class2type[core_toString.call(obj)] || \"object\" :\r\n            typeof obj;\r\n    },\r\n\r\n    isPlainObject: function (obj) {\r\n        var key;\r\n\r\n        // Must be an Object.\r\n        // Because of IE, we also have to check the presence of the constructor property.\r\n        // Make sure that DOM nodes and window objects don't pass through, as well\r\n        if (!obj || jQuery.type(obj) !== \"object\" || obj.nodeType || jQuery.isWindow(obj)) {\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            // Not own constructor property must be Object\r\n            if (obj.constructor && !core_hasOwn.call(obj, \"constructor\") && !core_hasOwn.call(obj.constructor.prototype, \"isPrototypeOf\")) {\r\n                return false;\r\n            }\r\n        } catch (e) {\r\n            // IE8,9 Will throw exceptions on certain host objects #9897\r\n            return false;\r\n        }\r\n\r\n        // Support: IE<9\r\n        // Handle iteration over inherited properties before own properties.\r\n        if (jQuery.support.ownLast) {\r\n            for (key in obj) {\r\n                return core_hasOwn.call(obj, key);\r\n            }\r\n        }\r\n\r\n        // Own properties are enumerated firstly, so to speed up,\r\n        // if last one is own, then all properties are own.\r\n        for (key in obj) {\r\n        }\r\n\r\n        return key === undefined || core_hasOwn.call(obj, key);\r\n    },\r\n\r\n    isEmptyObject: function (obj) {\r\n        var name;\r\n        for (name in obj) {\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    each: function (obj, callback, args) {\r\n        var value,\r\n            i = 0,\r\n            length = obj.length,\r\n            isArray = isArraylike(obj);\r\n\r\n        if (args) {\r\n            if (isArray) {\r\n                for (; i < length; i++) {\r\n                    value = callback.apply(obj[i], args);\r\n\r\n                    if (value === false) {\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                for (i in obj) {\r\n                    value = callback.apply(obj[i], args);\r\n\r\n                    if (value === false) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // A special, fast, case for the most common use of each\r\n        } else {\r\n            if (isArray) {\r\n                for (; i < length; i++) {\r\n                    value = callback.call(obj[i], i, obj[i]);\r\n\r\n                    if (value === false) {\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                for (i in obj) {\r\n                    value = callback.call(obj[i], i, obj[i]);\r\n\r\n                    if (value === false) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return obj;\r\n    },\r\n    // Use native String.trim function wherever possible\r\n    trim: core_trim && !core_trim.call(\"\\uFEFF\\xA0\") ?\r\n        function (text) {\r\n            return text == null ?\r\n                \"\" :\r\n                core_trim.call(text);\r\n        } :\r\n\r\n        // Otherwise use our own trimming functionality\r\n        function (text) {\r\n            return text == null ?\r\n                \"\" :\r\n                ( text + \"\" ).replace(rtrim, \"\");\r\n        },\r\n\r\n    // results is for internal usage only\r\n    makeArray: function (arr, results) {\r\n        var ret = results || [];\r\n\r\n        if (arr != null) {\r\n            if (isArraylike(Object(arr))) {\r\n                jQuery.merge(ret,\r\n                    typeof arr === \"string\" ?\r\n                        [arr] : arr\r\n                );\r\n            } else {\r\n                core_push.call(ret, arr);\r\n            }\r\n        }\r\n\r\n        return ret;\r\n    },\r\n\r\n    inArray: function (elem, arr, i) {\r\n        var len;\r\n\r\n        if (arr) {\r\n            if (core_indexOf) {\r\n                return core_indexOf.call(arr, elem, i);\r\n            }\r\n\r\n            len = arr.length;\r\n            i = i ? i < 0 ? Math.max(0, len + i) : i : 0;\r\n\r\n            for (; i < len; i++) {\r\n                // Skip accessing in sparse arrays\r\n                if (i in arr && arr[i] === elem) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n\r\n        return -1;\r\n    },\r\n\r\n    merge: function (first, second) {\r\n        var l = second.length,\r\n            i = first.length,\r\n            j = 0;\r\n\r\n        if (typeof l === \"number\") {\r\n            for (; j < l; j++) {\r\n                first[i++] = second[j];\r\n            }\r\n        } else {\r\n            while (second[j] !== undefined) {\r\n                first[i++] = second[j++];\r\n            }\r\n        }\r\n\r\n        first.length = i;\r\n\r\n        return first;\r\n    },\r\n    isMobile: function (str) {\r\n        return jQuery.trim(str) !== '' && /^1[3|4|5|6|7|8|9][0-9]\\d{8}$/.test(jQuery.trim(str));\r\n    },\r\n    toFixed: function (number,n) {\r\n        var f = parseInt(n) || 0;\r\n        if( f < -20 || f > 100 ) {\r\n            throw new RangeError(\"Precision of \" + f + \" fractional digits is out of range\");\r\n        }\r\n        var x = Number(number);\r\n        if( isNaN(x) ) {\r\n            return \"NaN\";\r\n        }\r\n        var s = \"\";\r\n        if(x <= 0) {\r\n            s = \"-\";\r\n            x = -x;\r\n        }\r\n        if( x >= Math.pow(10, 21) ) {\r\n            return s + x.toString();\r\n        }\r\n        var m;\r\n        n = Math.round(x * Math.pow(10, f) );\r\n\r\n        if( n == 0 ) {\r\n            m = \"0\";\r\n        }\r\n        else {\r\n            m =  n.toString();\r\n        }\r\n        if( f == 0 ) {\r\n            return s + m;\r\n        }\r\n        var k = m.length;\r\n        if(k <= f) {\r\n            var z = Math.pow(10, f+1-k).toString().substring(1);\r\n            m = z + m;\r\n            k = f+1;\r\n        }\r\n        if(f > 0) {\r\n            var a = m.substring(0, k-f);\r\n            var b = m.substring(k-f);\r\n            m = a + \".\" + b;\r\n        }\r\n        return s + m;\r\n    }\r\n};\r\njQuery.extend = function () {\r\n    var options, name, src, copy, copyIsArray, clone,\r\n        target = arguments[0] || {},\r\n        i = 1,\r\n        length = arguments.length,\r\n        deep = false;\r\n    if (typeof target === \"boolean\") {\r\n        deep = target;\r\n        target = arguments[1] || {};\r\n        i = 2;\r\n    }\r\n    if (typeof target !== \"object\" && !jQuery.isFunction(target)) {\r\n        target = {};\r\n    }\r\n    if (length === i) {\r\n        target = this;\r\n        --i;\r\n    }\r\n    for (; i < length; i++) {\r\n        if ((options = arguments[i]) != null) {\r\n            for (name in options) {\r\n                src = target[name];\r\n                copy = options[name];\r\n                if (target === copy) {\r\n                    continue;\r\n                }\r\n                if (deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) )) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        clone = src && jQuery.isArray(src) ? src : [];\r\n                    } else {\r\n                        clone = src && jQuery.isPlainObject(src) ? src : {};\r\n                    }\r\n                    target[name] = jQuery.extend(deep, clone, copy);\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return target;\r\n};\r\njQuery.param = function (a, traditional) {\r\n    var prefix,\r\n        s = [],\r\n        add = function (key, value) {\r\n            // If value is a function, invoke it and return its value\r\n            value = jQuery.isFunction(value) ? value() : ( value == null ? \"\" : value );\r\n            s[s.length] = encodeURIComponent(key) + \"=\" + encodeURIComponent(value);\r\n        };\r\n\r\n    // Set traditional to true for jQuery <= 1.3.2 behavior.\r\n    if (traditional === undefined) {\r\n        traditional = false;\r\n    }\r\n\r\n    // If an array was passed in, assume that it is an array of form elements.\r\n    if (jQuery.isArray(a) || ( a.jquery && !jQuery.isPlainObject(a) )) {\r\n        // Serialize the form elements\r\n        jQuery.each(a, function () {\r\n            add(this.name, this.value);\r\n        });\r\n\r\n    } else {\r\n        // If traditional, encode the \"old\" way (the way 1.3.2 or older\r\n        // did it), otherwise encode params recursively.\r\n        for (prefix in a) {\r\n            buildParams(prefix, a[prefix], traditional, add);\r\n        }\r\n    }\r\n\r\n    // Return the resulting serialization\r\n    return s.join(\"&\").replace(r20, \"+\");\r\n};\r\n\r\nfunction buildParams(prefix, obj, traditional, add) {\r\n    var name;\r\n\r\n    if (jQuery.isArray(obj)) {\r\n        // Serialize array item.\r\n        jQuery.each(obj, function (i, v) {\r\n            if (traditional || rbracket.test(prefix)) {\r\n                // Treat each array item as a scalar.\r\n                add(prefix, v);\r\n\r\n            } else {\r\n                // Item is non-scalar (array or object), encode its numeric index.\r\n                buildParams(prefix + \"[\" + ( typeof v === \"object\" ? i : \"\" ) + \"]\", v, traditional, add);\r\n            }\r\n        });\r\n\r\n    } else if (!traditional && jQuery.type(obj) === \"object\") {\r\n        // Serialize object item.\r\n        for (name in obj) {\r\n            buildParams(prefix + \"[\" + name + \"]\", obj[name], traditional, add);\r\n        }\r\n\r\n    } else {\r\n        // Serialize scalar item.\r\n        add(prefix, obj);\r\n    }\r\n}\r\nfunction isArraylike(obj) {\r\n    var length = obj.length,\r\n        type = jQuery.type(obj);\r\n\r\n    if (jQuery.isWindow(obj)) {\r\n        return false;\r\n    }\r\n\r\n    if (obj.nodeType === 1 && length) {\r\n        return true;\r\n    }\r\n\r\n    return type === \"array\" || type !== \"function\" &&\r\n        ( length === 0 ||\r\n        typeof length === \"number\" && length > 0 && ( length - 1 ) in obj );\r\n}\r\nmodule.exports = jQuery;","function formatTime(date) {\r\n    var year = date.getFullYear()\r\n    var month = date.getMonth() + 1\r\n    var day = date.getDate()\r\n\r\n    var hour = date.getHours()\r\n    var minute = date.getMinutes()\r\n    var second = date.getSeconds()\r\n\r\n\r\n    return [year, month, day].map(formatNumber).join('/') + ' ' + [hour, minute, second].map(formatNumber).join(':')\r\n}\r\n\r\nfunction formatNumber(n) {\r\n    n = n.toString()\r\n    return n[1] ? n : '0' + n\r\n}\r\n\r\nmodule.exports = {\r\n    formatTime: formatTime\r\n}\r\n","/**\r\n * html2Json 改造来自: https://github.com/Jxck/html2json\r\n *\r\n *\r\n * author: Di (微信小程序开发工程师)\r\n * organization: WeAppDev(微信小程序开发论坛)(http://weappdev.com)\r\n *               垂直微信小程序开发交流社区\r\n *\r\n * github地址: https://github.com/icindy/wxParse\r\n *\r\n * for: 微信小程序富文本解析\r\n * detail : http://weappdev.com/t/wxparse-alpha0-1-html-markdown/184\r\n */\r\n\r\nvar __placeImgeUrlHttps = \"https\";\r\nvar __emojisReg = '';\r\nvar __emojisBaseSrc = '';\r\nvar __emojis = {};\r\nvar wxDiscode = require('./wxDiscode.js');\r\nvar HTMLParser = require('./htmlparser.js');\r\n// Empty Elements - HTML 5\r\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr\");\r\n// Block Elements - HTML 5\r\nvar block = makeMap(\"br,a,code,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video\");\r\n\r\n// Inline Elements - HTML 5\r\nvar inline = makeMap(\"abbr,acronym,applet,b,basefont,bdo,big,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var\");\r\n\r\n// Elements that you can, intentionally, leave open\r\n// (and which close themselves)\r\nvar closeSelf = makeMap(\"colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr\");\r\n\r\n// Attributes that have their values filled in disabled=\"disabled\"\r\nvar fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\");\r\n\r\n// Special Elements (can contain anything)\r\nvar special = makeMap(\"wxxxcode-style,script,style,view,scroll-view,block\");\r\nfunction makeMap(str) {\r\n    var obj = {}, items = str.split(\",\");\r\n    for (var i = 0; i < items.length; i++)\r\n        obj[items[i]] = true;\r\n    return obj;\r\n}\r\n\r\nfunction q(v) {\r\n    return '\"' + v + '\"';\r\n}\r\n\r\nfunction removeDOCTYPE(html) {\r\n    return html\r\n        .replace(/<\\?xml.*\\?>\\n/, '')\r\n        .replace(/<.*!doctype.*\\>\\n/, '')\r\n        .replace(/<.*!DOCTYPE.*\\>\\n/, '');\r\n}\r\n\r\nfunction trimHtml(html) {\r\n  return html\r\n        .replace(/\\r?\\n+/g, '')\r\n        .replace(/<!--.*?-->/ig, '')\r\n        .replace(/\\/\\*.*?\\*\\//ig, '')\r\n        .replace(/[ ]+</ig, '<')\r\n}\r\n\r\n\r\nfunction html2json(html, bindName) {\r\n    //处理字符串\r\n    html = removeDOCTYPE(html);\r\n    html = trimHtml(html);\r\n    html = wxDiscode.strDiscode(html);\r\n    //生成node节点\r\n    var bufArray = [];\r\n    var results = {\r\n        node: bindName,\r\n        nodes: [],\r\n        images:[],\r\n        imageUrls:[]\r\n    };\r\n    var index = 0;\r\n    HTMLParser(html, {\r\n        start: function (tag, attrs, unary) {\r\n            //debug(tag, attrs, unary);\r\n            // node for this element\r\n            var node = {\r\n                node: 'element',\r\n                tag: tag,\r\n            };\r\n\r\n            if (bufArray.length === 0) {\r\n                node.index = index.toString()\r\n                index += 1\r\n            } else {\r\n                var parent = bufArray[0];\r\n                if (parent.nodes === undefined) {\r\n                    parent.nodes = [];\r\n                }\r\n                node.index = parent.index + '.' + parent.nodes.length\r\n            }\r\n\r\n            if (block[tag]) {\r\n                node.tagType = \"block\";\r\n            } else if (inline[tag]) {\r\n                node.tagType = \"inline\";\r\n            } else if (closeSelf[tag]) {\r\n                node.tagType = \"closeSelf\";\r\n            }\r\n\r\n            if (attrs.length !== 0) {\r\n                node.attr = attrs.reduce(function (pre, attr) {\r\n                    var name = attr.name;\r\n                    var value = attr.value;\r\n                    if (name == 'class') {\r\n                        //  value = value.join(\"\")\r\n                        node.classStr = value;\r\n                    }\r\n                    // has multi attibutes\r\n                    // make it array of attribute\r\n                    if (name == 'style') {\r\n                        //  value = value.join(\"\")\r\n                        node.styleStr = value;\r\n                    }\r\n                    if (value.match(/ /)) {\r\n                        value = value.split(' ');\r\n                    }\r\n\r\n\r\n                    // if attr already exists\r\n                    // merge it\r\n                    if (pre[name]) {\r\n                        if (Array.isArray(pre[name])) {\r\n                            // already array, push to last\r\n                            pre[name].push(value);\r\n                        } else {\r\n                            // single value, make it array\r\n                            pre[name] = [pre[name], value];\r\n                        }\r\n                    } else {\r\n                        // not exist, put it\r\n                        pre[name] = value;\r\n                    }\r\n\r\n                    return pre;\r\n                }, {});\r\n            }\r\n\r\n            //对img添加额外数据\r\n            if (node.tag === 'img') {\r\n                node.imgIndex = results.images.length;\r\n                node.attr = node.attr || {};\r\n                var imgUrl = node.attr.src || [];\r\n                if (imgUrl[0] == '') {\r\n                    imgUrl.splice(0, 1);\r\n                }\r\n                imgUrl = wxDiscode.urlToHttpUrl(imgUrl, __placeImgeUrlHttps);\r\n                node.attr.src = imgUrl;\r\n                node.from = bindName;\r\n                results.images.push(node);\r\n                results.imageUrls.push(imgUrl);\r\n            }\r\n\r\n            // 处理font标签样式属性\r\n            if (node.tag === 'font') {\r\n                var fontSize = ['x-small', 'small', 'medium', 'large', 'x-large', 'xx-large', '-webkit-xxx-large'];\r\n                var styleAttrs = {\r\n                    'color': 'color',\r\n                    'face': 'font-family',\r\n                    'size': 'font-size'\r\n                };\r\n                if (!node.attr.style) node.attr.style = [];\r\n                if (!node.styleStr) node.styleStr = '';\r\n                for (var key in styleAttrs) {\r\n                    if (node.attr[key]) {\r\n                        var value = key === 'size' ? fontSize[node.attr[key]-1] : node.attr[key];\r\n                        node.attr.style.push(styleAttrs[key]);\r\n                        node.attr.style.push(value);\r\n                        node.styleStr += styleAttrs[key] + ': ' + value + ';';\r\n                    }\r\n                }\r\n            }\r\n\r\n            //临时记录source资源\r\n            if(node.tag === 'source'){\r\n                results.source = node.attr.src;\r\n            }\r\n\r\n            if (unary) {\r\n                // if this tag dosen't have end tag\r\n                // like <img src=\"hoge.png\"/>\r\n                // add to parents\r\n                var parent = bufArray[0] || results;\r\n                if (parent.nodes === undefined) {\r\n                    parent.nodes = [];\r\n                }\r\n                parent.nodes.push(node);\r\n            } else {\r\n                bufArray.unshift(node);\r\n            }\r\n        },\r\n        end: function (tag) {\r\n            //debug(tag);\r\n            // merge into parent tag\r\n            var node = bufArray.shift();\r\n            if (node.tag !== tag) console.error('invalid state: mismatch end tag');\r\n\r\n            //当有缓存source资源时于于video补上src资源\r\n            if(node.tag === 'video' && results.source){\r\n                node.attr.src = results.source;\r\n                delete results.source;\r\n            }\r\n\r\n            if (bufArray.length === 0) {\r\n                results.nodes.push(node);\r\n            } else {\r\n                var parent = bufArray[0];\r\n                if (parent.nodes === undefined) {\r\n                    parent.nodes = [];\r\n                }\r\n                parent.nodes.push(node);\r\n            }\r\n        },\r\n        chars: function (text) {\r\n            //debug(text);\r\n            var node = {\r\n                node: 'text',\r\n                text: text,\r\n                textArray:transEmojiStr(text)\r\n            };\r\n\r\n            if (bufArray.length === 0) {\r\n                node.index = index.toString()\r\n                index += 1\r\n                results.nodes.push(node);\r\n            } else {\r\n                var parent = bufArray[0];\r\n                if (parent.nodes === undefined) {\r\n                    parent.nodes = [];\r\n                }\r\n                node.index = parent.index + '.' + parent.nodes.length\r\n                parent.nodes.push(node);\r\n            }\r\n        },\r\n        comment: function (text) {\r\n            //debug(text);\r\n            // var node = {\r\n            //     node: 'comment',\r\n            //     text: text,\r\n            // };\r\n            // var parent = bufArray[0];\r\n            // if (parent.nodes === undefined) {\r\n            //     parent.nodes = [];\r\n            // }\r\n            // parent.nodes.push(node);\r\n        },\r\n    });\r\n    return results;\r\n};\r\n\r\nfunction transEmojiStr(str){\r\n  // var eReg = new RegExp(\"[\"+__reg+' '+\"]\");\r\n//   str = str.replace(/\\[([^\\[\\]]+)\\]/g,':$1:')\r\n\r\n  var emojiObjs = [];\r\n  //如果正则表达式为空\r\n  if(__emojisReg.length == 0 || !__emojis){\r\n      var emojiObj = {}\r\n      emojiObj.node = \"text\";\r\n      emojiObj.text = str;\r\n      array = [emojiObj];\r\n      return array;\r\n  }\r\n  //这个地方需要调整\r\n  str = str.replace(/\\[([^\\[\\]]+)\\]/g,':$1:')\r\n  var eReg = new RegExp(\"[:]\");\r\n  var array = str.split(eReg);\r\n  for(var i = 0; i < array.length; i++){\r\n    var ele = array[i];\r\n    var emojiObj = {};\r\n    if(__emojis[ele]){\r\n      emojiObj.node = \"element\";\r\n      emojiObj.tag = \"emoji\";\r\n      emojiObj.text = __emojis[ele];\r\n      emojiObj.baseSrc= __emojisBaseSrc;\r\n    }else{\r\n      emojiObj.node = \"text\";\r\n      emojiObj.text = ele;\r\n    }\r\n    emojiObjs.push(emojiObj);\r\n  }\r\n\r\n  return emojiObjs;\r\n}\r\n\r\nfunction emojisInit(reg='',baseSrc=\"/wxParse/emojis/\",emojis){\r\n    __emojisReg = reg;\r\n    __emojisBaseSrc=baseSrc;\r\n    __emojis=emojis;\r\n}\r\n\r\nmodule.exports = {\r\n    html2json: html2json,\r\n    emojisInit:emojisInit\r\n};","/**\r\n * \r\n * htmlParser改造自: https://github.com/blowsie/Pure-JavaScript-HTML5-Parser\r\n * \r\n * author: Di (微信小程序开发工程师)\r\n * organization: WeAppDev(微信小程序开发论坛)(http://weappdev.com)\r\n *               垂直微信小程序开发交流社区\r\n * \r\n * github地址: https://github.com/icindy/wxParse\r\n * \r\n * for: 微信小程序富文本解析\r\n * detail : http://weappdev.com/t/wxparse-alpha0-1-html-markdown/184\r\n */\r\n// Regular Expressions for parsing tags and attributes\r\nvar startTag = /^<([-A-Za-z0-9_]+)((?:\\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\\s*=\\s*(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?)*)\\s*(\\/?)>/,\r\n\tendTag = /^<\\/([-A-Za-z0-9_]+)[^>]*>/,\r\n\tattr = /([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|([^>\\s]+)))?/g;\r\n\r\n// Empty Elements - HTML 5\r\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr\");\r\n\r\n// Block Elements - HTML 5\r\nvar block = makeMap(\"a,address,code,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video\");\r\n\r\n// Inline Elements - HTML 5\r\nvar inline = makeMap(\"abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var\");\r\n\r\n// Elements that you can, intentionally, leave open\r\n// (and which close themselves)\r\nvar closeSelf = makeMap(\"colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr\");\r\n\r\n// Attributes that have their values filled in disabled=\"disabled\"\r\nvar fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\");\r\n\r\n// Special Elements (can contain anything)\r\nvar special = makeMap(\"wxxxcode-style,script,style,view,scroll-view,block\");\r\n\r\nfunction HTMLParser(html, handler) {\r\n\tvar index, chars, match, stack = [], last = html;\r\n\tstack.last = function () {\r\n\t\treturn this[this.length - 1];\r\n\t};\r\n\r\n\twhile (html) {\r\n\t\tchars = true;\r\n\r\n\t\t// Make sure we're not in a script or style element\r\n\t\tif (!stack.last() || !special[stack.last()]) {\r\n\r\n\t\t\t// Comment\r\n\t\t\tif (html.indexOf(\"<!--\") == 0) {\r\n\t\t\t\tindex = html.indexOf(\"-->\");\r\n\r\n\t\t\t\tif (index >= 0) {\r\n\t\t\t\t\tif (handler.comment)\r\n\t\t\t\t\t\thandler.comment(html.substring(4, index));\r\n\t\t\t\t\thtml = html.substring(index + 3);\r\n\t\t\t\t\tchars = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// end tag\r\n\t\t\t} else if (html.indexOf(\"</\") == 0) {\r\n\t\t\t\tmatch = html.match(endTag);\r\n\r\n\t\t\t\tif (match) {\r\n\t\t\t\t\thtml = html.substring(match[0].length);\r\n\t\t\t\t\tmatch[0].replace(endTag, parseEndTag);\r\n\t\t\t\t\tchars = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// start tag\r\n\t\t\t} else if (html.indexOf(\"<\") == 0) {\r\n\t\t\t\tmatch = html.match(startTag);\r\n\r\n\t\t\t\tif (match) {\r\n\t\t\t\t\thtml = html.substring(match[0].length);\r\n\t\t\t\t\tmatch[0].replace(startTag, parseStartTag);\r\n\t\t\t\t\tchars = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (chars) {\r\n\t\t\t\tindex = html.indexOf(\"<\");\r\n\t\t\t\tvar text = ''\r\n\t\t\t\twhile (index === 0) {\r\n                                  text += \"<\";\r\n                                  html = html.substring(1);\r\n                                  index = html.indexOf(\"<\");\r\n\t\t\t\t}\r\n\t\t\t\ttext += index < 0 ? html : html.substring(0, index);\r\n\t\t\t\thtml = index < 0 ? \"\" : html.substring(index);\r\n\r\n\t\t\t\tif (handler.chars)\r\n\t\t\t\t\thandler.chars(text);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\thtml = html.replace(new RegExp(\"([\\\\s\\\\S]*?)<\\/\" + stack.last() + \"[^>]*>\"), function (all, text) {\r\n\t\t\t\ttext = text.replace(/<!--([\\s\\S]*?)-->|<!\\[CDATA\\[([\\s\\S]*?)]]>/g, \"$1$2\");\r\n\t\t\t\tif (handler.chars)\r\n\t\t\t\t\thandler.chars(text);\r\n\r\n\t\t\t\treturn \"\";\r\n\t\t\t});\r\n\r\n\r\n\t\t\tparseEndTag(\"\", stack.last());\r\n\t\t}\r\n\r\n\t\tif (html == last)\r\n\t\t\tthrow \"Parse Error: \" + html;\r\n\t\tlast = html;\r\n\t}\r\n\r\n\t// Clean up any remaining tags\r\n\tparseEndTag();\r\n\r\n\tfunction parseStartTag(tag, tagName, rest, unary) {\r\n\t\ttagName = tagName.toLowerCase();\r\n\r\n\t\tif (block[tagName]) {\r\n\t\t\twhile (stack.last() && inline[stack.last()]) {\r\n\t\t\t\tparseEndTag(\"\", stack.last());\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (closeSelf[tagName] && stack.last() == tagName) {\r\n\t\t\tparseEndTag(\"\", tagName);\r\n\t\t}\r\n\r\n\t\tunary = empty[tagName] || !!unary;\r\n\r\n\t\tif (!unary)\r\n\t\t\tstack.push(tagName);\r\n\r\n\t\tif (handler.start) {\r\n\t\t\tvar attrs = [];\r\n\r\n\t\t\trest.replace(attr, function (match, name) {\r\n\t\t\t\tvar value = arguments[2] ? arguments[2] :\r\n\t\t\t\t\targuments[3] ? arguments[3] :\r\n\t\t\t\t\t\targuments[4] ? arguments[4] :\r\n\t\t\t\t\t\t\tfillAttrs[name] ? name : \"\";\r\n\r\n\t\t\t\tattrs.push({\r\n\t\t\t\t\tname: name,\r\n\t\t\t\t\tvalue: value,\r\n\t\t\t\t\tescaped: value.replace(/(^|[^\\\\])\"/g, '$1\\\\\\\"') //\"\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tif (handler.start) {\r\n\t\t\t\thandler.start(tagName, attrs, unary);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tfunction parseEndTag(tag, tagName) {\r\n\t\t// If no tag name is provided, clean shop\r\n\t\tif (!tagName)\r\n\t\t\tvar pos = 0;\r\n\r\n\t\t// Find the closest opened tag of the same type\r\n\t\telse {\r\n\t\t\ttagName = tagName.toLowerCase();\r\n\t\t\tfor (var pos = stack.length - 1; pos >= 0; pos--)\r\n\t\t\t\tif (stack[pos] == tagName)\r\n\t\t\t\t\tbreak;\r\n\t\t}\r\n\t\tif (pos >= 0) {\r\n\t\t\t// Close all the open elements, up the stack\r\n\t\t\tfor (var i = stack.length - 1; i >= pos; i--)\r\n\t\t\t\tif (handler.end)\r\n\t\t\t\t\thandler.end(stack[i]);\r\n\r\n\t\t\t// Remove the open elements from the stack\r\n\t\t\tstack.length = pos;\r\n\t\t}\r\n\t}\r\n};\r\n\r\n\r\nfunction makeMap(str) {\r\n\tvar obj = {}, items = str.split(\",\");\r\n\tfor (var i = 0; i < items.length; i++)\r\n\t\tobj[items[i]] = true;\r\n\treturn obj;\r\n}\r\n\r\nmodule.exports = HTMLParser;\r\n","/**\r\n * \r\n * showdown: https://github.com/showdownjs/showdown\r\n * \r\n * author: Di (微信小程序开发工程师)\r\n * organization: WeAppDev(微信小程序开发论坛)(http://weappdev.com)\r\n *               垂直微信小程序开发交流社区\r\n * \r\n * github地址: https://github.com/icindy/wxParse\r\n * \r\n * for: 微信小程序富文本解析\r\n * detail : http://weappdev.com/t/wxparse-alpha0-1-html-markdown/184\r\n */\r\n\r\nfunction getDefaultOpts(simple) {\r\n  'use strict';\r\n\r\n  var defaultOptions = {\r\n    omitExtraWLInCodeBlocks: {\r\n      defaultValue: false,\r\n      describe: 'Omit the default extra whiteline added to code blocks',\r\n      type: 'boolean'\r\n    },\r\n    noHeaderId: {\r\n      defaultValue: false,\r\n      describe: 'Turn on/off generated header id',\r\n      type: 'boolean'\r\n    },\r\n    prefixHeaderId: {\r\n      defaultValue: false,\r\n      describe: 'Specify a prefix to generated header ids',\r\n      type: 'string'\r\n    },\r\n    headerLevelStart: {\r\n      defaultValue: false,\r\n      describe: 'The header blocks level start',\r\n      type: 'integer'\r\n    },\r\n    parseImgDimensions: {\r\n      defaultValue: false,\r\n      describe: 'Turn on/off image dimension parsing',\r\n      type: 'boolean'\r\n    },\r\n    simplifiedAutoLink: {\r\n      defaultValue: false,\r\n      describe: 'Turn on/off GFM autolink style',\r\n      type: 'boolean'\r\n    },\r\n    literalMidWordUnderscores: {\r\n      defaultValue: false,\r\n      describe: 'Parse midword underscores as literal underscores',\r\n      type: 'boolean'\r\n    },\r\n    strikethrough: {\r\n      defaultValue: false,\r\n      describe: 'Turn on/off strikethrough support',\r\n      type: 'boolean'\r\n    },\r\n    tables: {\r\n      defaultValue: false,\r\n      describe: 'Turn on/off tables support',\r\n      type: 'boolean'\r\n    },\r\n    tablesHeaderId: {\r\n      defaultValue: false,\r\n      describe: 'Add an id to table headers',\r\n      type: 'boolean'\r\n    },\r\n    ghCodeBlocks: {\r\n      defaultValue: true,\r\n      describe: 'Turn on/off GFM fenced code blocks support',\r\n      type: 'boolean'\r\n    },\r\n    tasklists: {\r\n      defaultValue: false,\r\n      describe: 'Turn on/off GFM tasklist support',\r\n      type: 'boolean'\r\n    },\r\n    smoothLivePreview: {\r\n      defaultValue: false,\r\n      describe: 'Prevents weird effects in live previews due to incomplete input',\r\n      type: 'boolean'\r\n    },\r\n    smartIndentationFix: {\r\n      defaultValue: false,\r\n      description: 'Tries to smartly fix identation in es6 strings',\r\n      type: 'boolean'\r\n    }\r\n  };\r\n  if (simple === false) {\r\n    return JSON.parse(JSON.stringify(defaultOptions));\r\n  }\r\n  var ret = {};\r\n  for (var opt in defaultOptions) {\r\n    if (defaultOptions.hasOwnProperty(opt)) {\r\n      ret[opt] = defaultOptions[opt].defaultValue;\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n\r\n/**\r\n * Created by Tivie on 06-01-2015.\r\n */\r\n\r\n// Private properties\r\nvar showdown = {},\r\n    parsers = {},\r\n    extensions = {},\r\n    globalOptions = getDefaultOpts(true),\r\n    flavor = {\r\n      github: {\r\n        omitExtraWLInCodeBlocks:   true,\r\n        prefixHeaderId:            'user-content-',\r\n        simplifiedAutoLink:        true,\r\n        literalMidWordUnderscores: true,\r\n        strikethrough:             true,\r\n        tables:                    true,\r\n        tablesHeaderId:            true,\r\n        ghCodeBlocks:              true,\r\n        tasklists:                 true\r\n      },\r\n      vanilla: getDefaultOpts(true)\r\n    };\r\n\r\n/**\r\n * helper namespace\r\n * @type {{}}\r\n */\r\nshowdown.helper = {};\r\n\r\n/**\r\n * TODO LEGACY SUPPORT CODE\r\n * @type {{}}\r\n */\r\nshowdown.extensions = {};\r\n\r\n/**\r\n * Set a global option\r\n * @static\r\n * @param {string} key\r\n * @param {*} value\r\n * @returns {showdown}\r\n */\r\nshowdown.setOption = function (key, value) {\r\n  'use strict';\r\n  globalOptions[key] = value;\r\n  return this;\r\n};\r\n\r\n/**\r\n * Get a global option\r\n * @static\r\n * @param {string} key\r\n * @returns {*}\r\n */\r\nshowdown.getOption = function (key) {\r\n  'use strict';\r\n  return globalOptions[key];\r\n};\r\n\r\n/**\r\n * Get the global options\r\n * @static\r\n * @returns {{}}\r\n */\r\nshowdown.getOptions = function () {\r\n  'use strict';\r\n  return globalOptions;\r\n};\r\n\r\n/**\r\n * Reset global options to the default values\r\n * @static\r\n */\r\nshowdown.resetOptions = function () {\r\n  'use strict';\r\n  globalOptions = getDefaultOpts(true);\r\n};\r\n\r\n/**\r\n * Set the flavor showdown should use as default\r\n * @param {string} name\r\n */\r\nshowdown.setFlavor = function (name) {\r\n  'use strict';\r\n  if (flavor.hasOwnProperty(name)) {\r\n    var preset = flavor[name];\r\n    for (var option in preset) {\r\n      if (preset.hasOwnProperty(option)) {\r\n        globalOptions[option] = preset[option];\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Get the default options\r\n * @static\r\n * @param {boolean} [simple=true]\r\n * @returns {{}}\r\n */\r\nshowdown.getDefaultOptions = function (simple) {\r\n  'use strict';\r\n  return getDefaultOpts(simple);\r\n};\r\n\r\n/**\r\n * Get or set a subParser\r\n *\r\n * subParser(name)       - Get a registered subParser\r\n * subParser(name, func) - Register a subParser\r\n * @static\r\n * @param {string} name\r\n * @param {function} [func]\r\n * @returns {*}\r\n */\r\nshowdown.subParser = function (name, func) {\r\n  'use strict';\r\n  if (showdown.helper.isString(name)) {\r\n    if (typeof func !== 'undefined') {\r\n      parsers[name] = func;\r\n    } else {\r\n      if (parsers.hasOwnProperty(name)) {\r\n        return parsers[name];\r\n      } else {\r\n        throw Error('SubParser named ' + name + ' not registered!');\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Gets or registers an extension\r\n * @static\r\n * @param {string} name\r\n * @param {object|function=} ext\r\n * @returns {*}\r\n */\r\nshowdown.extension = function (name, ext) {\r\n  'use strict';\r\n\r\n  if (!showdown.helper.isString(name)) {\r\n    throw Error('Extension \\'name\\' must be a string');\r\n  }\r\n\r\n  name = showdown.helper.stdExtName(name);\r\n\r\n  // Getter\r\n  if (showdown.helper.isUndefined(ext)) {\r\n    if (!extensions.hasOwnProperty(name)) {\r\n      throw Error('Extension named ' + name + ' is not registered!');\r\n    }\r\n    return extensions[name];\r\n\r\n    // Setter\r\n  } else {\r\n    // Expand extension if it's wrapped in a function\r\n    if (typeof ext === 'function') {\r\n      ext = ext();\r\n    }\r\n\r\n    // Ensure extension is an array\r\n    if (!showdown.helper.isArray(ext)) {\r\n      ext = [ext];\r\n    }\r\n\r\n    var validExtension = validate(ext, name);\r\n\r\n    if (validExtension.valid) {\r\n      extensions[name] = ext;\r\n    } else {\r\n      throw Error(validExtension.error);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Gets all extensions registered\r\n * @returns {{}}\r\n */\r\nshowdown.getAllExtensions = function () {\r\n  'use strict';\r\n  return extensions;\r\n};\r\n\r\n/**\r\n * Remove an extension\r\n * @param {string} name\r\n */\r\nshowdown.removeExtension = function (name) {\r\n  'use strict';\r\n  delete extensions[name];\r\n};\r\n\r\n/**\r\n * Removes all extensions\r\n */\r\nshowdown.resetExtensions = function () {\r\n  'use strict';\r\n  extensions = {};\r\n};\r\n\r\n/**\r\n * Validate extension\r\n * @param {array} extension\r\n * @param {string} name\r\n * @returns {{valid: boolean, error: string}}\r\n */\r\nfunction validate(extension, name) {\r\n  'use strict';\r\n\r\n  var errMsg = (name) ? 'Error in ' + name + ' extension->' : 'Error in unnamed extension',\r\n    ret = {\r\n      valid: true,\r\n      error: ''\r\n    };\r\n\r\n  if (!showdown.helper.isArray(extension)) {\r\n    extension = [extension];\r\n  }\r\n\r\n  for (var i = 0; i < extension.length; ++i) {\r\n    var baseMsg = errMsg + ' sub-extension ' + i + ': ',\r\n        ext = extension[i];\r\n    if (typeof ext !== 'object') {\r\n      ret.valid = false;\r\n      ret.error = baseMsg + 'must be an object, but ' + typeof ext + ' given';\r\n      return ret;\r\n    }\r\n\r\n    if (!showdown.helper.isString(ext.type)) {\r\n      ret.valid = false;\r\n      ret.error = baseMsg + 'property \"type\" must be a string, but ' + typeof ext.type + ' given';\r\n      return ret;\r\n    }\r\n\r\n    var type = ext.type = ext.type.toLowerCase();\r\n\r\n    // normalize extension type\r\n    if (type === 'language') {\r\n      type = ext.type = 'lang';\r\n    }\r\n\r\n    if (type === 'html') {\r\n      type = ext.type = 'output';\r\n    }\r\n\r\n    if (type !== 'lang' && type !== 'output' && type !== 'listener') {\r\n      ret.valid = false;\r\n      ret.error = baseMsg + 'type ' + type + ' is not recognized. Valid values: \"lang/language\", \"output/html\" or \"listener\"';\r\n      return ret;\r\n    }\r\n\r\n    if (type === 'listener') {\r\n      if (showdown.helper.isUndefined(ext.listeners)) {\r\n        ret.valid = false;\r\n        ret.error = baseMsg + '. Extensions of type \"listener\" must have a property called \"listeners\"';\r\n        return ret;\r\n      }\r\n    } else {\r\n      if (showdown.helper.isUndefined(ext.filter) && showdown.helper.isUndefined(ext.regex)) {\r\n        ret.valid = false;\r\n        ret.error = baseMsg + type + ' extensions must define either a \"regex\" property or a \"filter\" method';\r\n        return ret;\r\n      }\r\n    }\r\n\r\n    if (ext.listeners) {\r\n      if (typeof ext.listeners !== 'object') {\r\n        ret.valid = false;\r\n        ret.error = baseMsg + '\"listeners\" property must be an object but ' + typeof ext.listeners + ' given';\r\n        return ret;\r\n      }\r\n      for (var ln in ext.listeners) {\r\n        if (ext.listeners.hasOwnProperty(ln)) {\r\n          if (typeof ext.listeners[ln] !== 'function') {\r\n            ret.valid = false;\r\n            ret.error = baseMsg + '\"listeners\" property must be an hash of [event name]: [callback]. listeners.' + ln +\r\n              ' must be a function but ' + typeof ext.listeners[ln] + ' given';\r\n            return ret;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (ext.filter) {\r\n      if (typeof ext.filter !== 'function') {\r\n        ret.valid = false;\r\n        ret.error = baseMsg + '\"filter\" must be a function, but ' + typeof ext.filter + ' given';\r\n        return ret;\r\n      }\r\n    } else if (ext.regex) {\r\n      if (showdown.helper.isString(ext.regex)) {\r\n        ext.regex = new RegExp(ext.regex, 'g');\r\n      }\r\n      if (!ext.regex instanceof RegExp) {\r\n        ret.valid = false;\r\n        ret.error = baseMsg + '\"regex\" property must either be a string or a RegExp object, but ' + typeof ext.regex + ' given';\r\n        return ret;\r\n      }\r\n      if (showdown.helper.isUndefined(ext.replace)) {\r\n        ret.valid = false;\r\n        ret.error = baseMsg + '\"regex\" extensions must implement a replace string or function';\r\n        return ret;\r\n      }\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n\r\n/**\r\n * Validate extension\r\n * @param {object} ext\r\n * @returns {boolean}\r\n */\r\nshowdown.validateExtension = function (ext) {\r\n  'use strict';\r\n\r\n  var validateExtension = validate(ext, null);\r\n  if (!validateExtension.valid) {\r\n    console.warn(validateExtension.error);\r\n    return false;\r\n  }\r\n  return true;\r\n};\r\n\r\n/**\r\n * showdownjs helper functions\r\n */\r\n\r\nif (!showdown.hasOwnProperty('helper')) {\r\n  showdown.helper = {};\r\n}\r\n\r\n/**\r\n * Check if var is string\r\n * @static\r\n * @param {string} a\r\n * @returns {boolean}\r\n */\r\nshowdown.helper.isString = function isString(a) {\r\n  'use strict';\r\n  return (typeof a === 'string' || a instanceof String);\r\n};\r\n\r\n/**\r\n * Check if var is a function\r\n * @static\r\n * @param {string} a\r\n * @returns {boolean}\r\n */\r\nshowdown.helper.isFunction = function isFunction(a) {\r\n  'use strict';\r\n  var getType = {};\r\n  return a && getType.toString.call(a) === '[object Function]';\r\n};\r\n\r\n/**\r\n * ForEach helper function\r\n * @static\r\n * @param {*} obj\r\n * @param {function} callback\r\n */\r\nshowdown.helper.forEach = function forEach(obj, callback) {\r\n  'use strict';\r\n  if (typeof obj.forEach === 'function') {\r\n    obj.forEach(callback);\r\n  } else {\r\n    for (var i = 0; i < obj.length; i++) {\r\n      callback(obj[i], i, obj);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * isArray helper function\r\n * @static\r\n * @param {*} a\r\n * @returns {boolean}\r\n */\r\nshowdown.helper.isArray = function isArray(a) {\r\n  'use strict';\r\n  return a.constructor === Array;\r\n};\r\n\r\n/**\r\n * Check if value is undefined\r\n * @static\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\r\n */\r\nshowdown.helper.isUndefined = function isUndefined(value) {\r\n  'use strict';\r\n  return typeof value === 'undefined';\r\n};\r\n\r\n/**\r\n * Standardidize extension name\r\n * @static\r\n * @param {string} s extension name\r\n * @returns {string}\r\n */\r\nshowdown.helper.stdExtName = function (s) {\r\n  'use strict';\r\n  return s.replace(/[_-]||\\s/g, '').toLowerCase();\r\n};\r\n\r\nfunction escapeCharactersCallback(wholeMatch, m1) {\r\n  'use strict';\r\n  var charCodeToEscape = m1.charCodeAt(0);\r\n  return '~E' + charCodeToEscape + 'E';\r\n}\r\n\r\n/**\r\n * Callback used to escape characters when passing through String.replace\r\n * @static\r\n * @param {string} wholeMatch\r\n * @param {string} m1\r\n * @returns {string}\r\n */\r\nshowdown.helper.escapeCharactersCallback = escapeCharactersCallback;\r\n\r\n/**\r\n * Escape characters in a string\r\n * @static\r\n * @param {string} text\r\n * @param {string} charsToEscape\r\n * @param {boolean} afterBackslash\r\n * @returns {XML|string|void|*}\r\n */\r\nshowdown.helper.escapeCharacters = function escapeCharacters(text, charsToEscape, afterBackslash) {\r\n  'use strict';\r\n  // First we have to escape the escape characters so that\r\n  // we can build a character class out of them\r\n  var regexString = '([' + charsToEscape.replace(/([\\[\\]\\\\])/g, '\\\\$1') + '])';\r\n\r\n  if (afterBackslash) {\r\n    regexString = '\\\\\\\\' + regexString;\r\n  }\r\n\r\n  var regex = new RegExp(regexString, 'g');\r\n  text = text.replace(regex, escapeCharactersCallback);\r\n\r\n  return text;\r\n};\r\n\r\nvar rgxFindMatchPos = function (str, left, right, flags) {\r\n  'use strict';\r\n  var f = flags || '',\r\n    g = f.indexOf('g') > -1,\r\n    x = new RegExp(left + '|' + right, 'g' + f.replace(/g/g, '')),\r\n    l = new RegExp(left, f.replace(/g/g, '')),\r\n    pos = [],\r\n    t, s, m, start, end;\r\n\r\n  do {\r\n    t = 0;\r\n    while ((m = x.exec(str))) {\r\n      if (l.test(m[0])) {\r\n        if (!(t++)) {\r\n          s = x.lastIndex;\r\n          start = s - m[0].length;\r\n        }\r\n      } else if (t) {\r\n        if (!--t) {\r\n          end = m.index + m[0].length;\r\n          var obj = {\r\n            left: {start: start, end: s},\r\n            match: {start: s, end: m.index},\r\n            right: {start: m.index, end: end},\r\n            wholeMatch: {start: start, end: end}\r\n          };\r\n          pos.push(obj);\r\n          if (!g) {\r\n            return pos;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  } while (t && (x.lastIndex = s));\r\n\r\n  return pos;\r\n};\r\n\r\n/**\r\n * matchRecursiveRegExp\r\n *\r\n * (c) 2007 Steven Levithan <stevenlevithan.com>\r\n * MIT License\r\n *\r\n * Accepts a string to search, a left and right format delimiter\r\n * as regex patterns, and optional regex flags. Returns an array\r\n * of matches, allowing nested instances of left/right delimiters.\r\n * Use the \"g\" flag to return all matches, otherwise only the\r\n * first is returned. Be careful to ensure that the left and\r\n * right format delimiters produce mutually exclusive matches.\r\n * Backreferences are not supported within the right delimiter\r\n * due to how it is internally combined with the left delimiter.\r\n * When matching strings whose format delimiters are unbalanced\r\n * to the left or right, the output is intentionally as a\r\n * conventional regex library with recursion support would\r\n * produce, e.g. \"<<x>\" and \"<x>>\" both produce [\"x\"] when using\r\n * \"<\" and \">\" as the delimiters (both strings contain a single,\r\n * balanced instance of \"<x>\").\r\n *\r\n * examples:\r\n * matchRecursiveRegExp(\"test\", \"\\\\(\", \"\\\\)\")\r\n * returns: []\r\n * matchRecursiveRegExp(\"<t<<e>><s>>t<>\", \"<\", \">\", \"g\")\r\n * returns: [\"t<<e>><s>\", \"\"]\r\n * matchRecursiveRegExp(\"<div id=\\\"x\\\">test</div>\", \"<div\\\\b[^>]*>\", \"</div>\", \"gi\")\r\n * returns: [\"test\"]\r\n */\r\nshowdown.helper.matchRecursiveRegExp = function (str, left, right, flags) {\r\n  'use strict';\r\n\r\n  var matchPos = rgxFindMatchPos (str, left, right, flags),\r\n    results = [];\r\n\r\n  for (var i = 0; i < matchPos.length; ++i) {\r\n    results.push([\r\n      str.slice(matchPos[i].wholeMatch.start, matchPos[i].wholeMatch.end),\r\n      str.slice(matchPos[i].match.start, matchPos[i].match.end),\r\n      str.slice(matchPos[i].left.start, matchPos[i].left.end),\r\n      str.slice(matchPos[i].right.start, matchPos[i].right.end)\r\n    ]);\r\n  }\r\n  return results;\r\n};\r\n\r\n/**\r\n *\r\n * @param {string} str\r\n * @param {string|function} replacement\r\n * @param {string} left\r\n * @param {string} right\r\n * @param {string} flags\r\n * @returns {string}\r\n */\r\nshowdown.helper.replaceRecursiveRegExp = function (str, replacement, left, right, flags) {\r\n  'use strict';\r\n\r\n  if (!showdown.helper.isFunction(replacement)) {\r\n    var repStr = replacement;\r\n    replacement = function () {\r\n      return repStr;\r\n    };\r\n  }\r\n\r\n  var matchPos = rgxFindMatchPos(str, left, right, flags),\r\n      finalStr = str,\r\n      lng = matchPos.length;\r\n\r\n  if (lng > 0) {\r\n    var bits = [];\r\n    if (matchPos[0].wholeMatch.start !== 0) {\r\n      bits.push(str.slice(0, matchPos[0].wholeMatch.start));\r\n    }\r\n    for (var i = 0; i < lng; ++i) {\r\n      bits.push(\r\n        replacement(\r\n          str.slice(matchPos[i].wholeMatch.start, matchPos[i].wholeMatch.end),\r\n          str.slice(matchPos[i].match.start, matchPos[i].match.end),\r\n          str.slice(matchPos[i].left.start, matchPos[i].left.end),\r\n          str.slice(matchPos[i].right.start, matchPos[i].right.end)\r\n        )\r\n      );\r\n      if (i < lng - 1) {\r\n        bits.push(str.slice(matchPos[i].wholeMatch.end, matchPos[i + 1].wholeMatch.start));\r\n      }\r\n    }\r\n    if (matchPos[lng - 1].wholeMatch.end < str.length) {\r\n      bits.push(str.slice(matchPos[lng - 1].wholeMatch.end));\r\n    }\r\n    finalStr = bits.join('');\r\n  }\r\n  return finalStr;\r\n};\r\n\r\n/**\r\n * POLYFILLS\r\n */\r\nif (showdown.helper.isUndefined(console)) {\r\n  console = {\r\n    warn: function (msg) {\r\n      'use strict';\r\n      alert(msg);\r\n    },\r\n    log: function (msg) {\r\n      'use strict';\r\n      alert(msg);\r\n    },\r\n    error: function (msg) {\r\n      'use strict';\r\n      throw msg;\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Created by Estevao on 31-05-2015.\r\n */\r\n\r\n/**\r\n * Showdown Converter class\r\n * @class\r\n * @param {object} [converterOptions]\r\n * @returns {Converter}\r\n */\r\nshowdown.Converter = function (converterOptions) {\r\n  'use strict';\r\n\r\n  var\r\n      /**\r\n       * Options used by this converter\r\n       * @private\r\n       * @type {{}}\r\n       */\r\n      options = {},\r\n\r\n      /**\r\n       * Language extensions used by this converter\r\n       * @private\r\n       * @type {Array}\r\n       */\r\n      langExtensions = [],\r\n\r\n      /**\r\n       * Output modifiers extensions used by this converter\r\n       * @private\r\n       * @type {Array}\r\n       */\r\n      outputModifiers = [],\r\n\r\n      /**\r\n       * Event listeners\r\n       * @private\r\n       * @type {{}}\r\n       */\r\n      listeners = {};\r\n\r\n  _constructor();\r\n\r\n  /**\r\n   * Converter constructor\r\n   * @private\r\n   */\r\n  function _constructor() {\r\n    converterOptions = converterOptions || {};\r\n\r\n    for (var gOpt in globalOptions) {\r\n      if (globalOptions.hasOwnProperty(gOpt)) {\r\n        options[gOpt] = globalOptions[gOpt];\r\n      }\r\n    }\r\n\r\n    // Merge options\r\n    if (typeof converterOptions === 'object') {\r\n      for (var opt in converterOptions) {\r\n        if (converterOptions.hasOwnProperty(opt)) {\r\n          options[opt] = converterOptions[opt];\r\n        }\r\n      }\r\n    } else {\r\n      throw Error('Converter expects the passed parameter to be an object, but ' + typeof converterOptions +\r\n      ' was passed instead.');\r\n    }\r\n\r\n    if (options.extensions) {\r\n      showdown.helper.forEach(options.extensions, _parseExtension);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parse extension\r\n   * @param {*} ext\r\n   * @param {string} [name='']\r\n   * @private\r\n   */\r\n  function _parseExtension(ext, name) {\r\n\r\n    name = name || null;\r\n    // If it's a string, the extension was previously loaded\r\n    if (showdown.helper.isString(ext)) {\r\n      ext = showdown.helper.stdExtName(ext);\r\n      name = ext;\r\n\r\n      // LEGACY_SUPPORT CODE\r\n      if (showdown.extensions[ext]) {\r\n        console.warn('DEPRECATION WARNING: ' + ext + ' is an old extension that uses a deprecated loading method.' +\r\n          'Please inform the developer that the extension should be updated!');\r\n        legacyExtensionLoading(showdown.extensions[ext], ext);\r\n        return;\r\n      // END LEGACY SUPPORT CODE\r\n\r\n      } else if (!showdown.helper.isUndefined(extensions[ext])) {\r\n        ext = extensions[ext];\r\n\r\n      } else {\r\n        throw Error('Extension \"' + ext + '\" could not be loaded. It was either not found or is not a valid extension.');\r\n      }\r\n    }\r\n\r\n    if (typeof ext === 'function') {\r\n      ext = ext();\r\n    }\r\n\r\n    if (!showdown.helper.isArray(ext)) {\r\n      ext = [ext];\r\n    }\r\n\r\n    var validExt = validate(ext, name);\r\n    if (!validExt.valid) {\r\n      throw Error(validExt.error);\r\n    }\r\n\r\n    for (var i = 0; i < ext.length; ++i) {\r\n      switch (ext[i].type) {\r\n\r\n        case 'lang':\r\n          langExtensions.push(ext[i]);\r\n          break;\r\n\r\n        case 'output':\r\n          outputModifiers.push(ext[i]);\r\n          break;\r\n      }\r\n      if (ext[i].hasOwnProperty(listeners)) {\r\n        for (var ln in ext[i].listeners) {\r\n          if (ext[i].listeners.hasOwnProperty(ln)) {\r\n            listen(ln, ext[i].listeners[ln]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * LEGACY_SUPPORT\r\n   * @param {*} ext\r\n   * @param {string} name\r\n   */\r\n  function legacyExtensionLoading(ext, name) {\r\n    if (typeof ext === 'function') {\r\n      ext = ext(new showdown.Converter());\r\n    }\r\n    if (!showdown.helper.isArray(ext)) {\r\n      ext = [ext];\r\n    }\r\n    var valid = validate(ext, name);\r\n\r\n    if (!valid.valid) {\r\n      throw Error(valid.error);\r\n    }\r\n\r\n    for (var i = 0; i < ext.length; ++i) {\r\n      switch (ext[i].type) {\r\n        case 'lang':\r\n          langExtensions.push(ext[i]);\r\n          break;\r\n        case 'output':\r\n          outputModifiers.push(ext[i]);\r\n          break;\r\n        default:// should never reach here\r\n          throw Error('Extension loader error: Type unrecognized!!!');\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Listen to an event\r\n   * @param {string} name\r\n   * @param {function} callback\r\n   */\r\n  function listen(name, callback) {\r\n    if (!showdown.helper.isString(name)) {\r\n      throw Error('Invalid argument in converter.listen() method: name must be a string, but ' + typeof name + ' given');\r\n    }\r\n\r\n    if (typeof callback !== 'function') {\r\n      throw Error('Invalid argument in converter.listen() method: callback must be a function, but ' + typeof callback + ' given');\r\n    }\r\n\r\n    if (!listeners.hasOwnProperty(name)) {\r\n      listeners[name] = [];\r\n    }\r\n    listeners[name].push(callback);\r\n  }\r\n\r\n  function rTrimInputText(text) {\r\n    var rsp = text.match(/^\\s*/)[0].length,\r\n        rgx = new RegExp('^\\\\s{0,' + rsp + '}', 'gm');\r\n    return text.replace(rgx, '');\r\n  }\r\n\r\n  /**\r\n   * Dispatch an event\r\n   * @private\r\n   * @param {string} evtName Event name\r\n   * @param {string} text Text\r\n   * @param {{}} options Converter Options\r\n   * @param {{}} globals\r\n   * @returns {string}\r\n   */\r\n  this._dispatch = function dispatch (evtName, text, options, globals) {\r\n    if (listeners.hasOwnProperty(evtName)) {\r\n      for (var ei = 0; ei < listeners[evtName].length; ++ei) {\r\n        var nText = listeners[evtName][ei](evtName, text, this, options, globals);\r\n        if (nText && typeof nText !== 'undefined') {\r\n          text = nText;\r\n        }\r\n      }\r\n    }\r\n    return text;\r\n  };\r\n\r\n  /**\r\n   * Listen to an event\r\n   * @param {string} name\r\n   * @param {function} callback\r\n   * @returns {showdown.Converter}\r\n   */\r\n  this.listen = function (name, callback) {\r\n    listen(name, callback);\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Converts a markdown string into HTML\r\n   * @param {string} text\r\n   * @returns {*}\r\n   */\r\n  this.makeHtml = function (text) {\r\n    //check if text is not falsy\r\n    if (!text) {\r\n      return text;\r\n    }\r\n\r\n    var globals = {\r\n      gHtmlBlocks:     [],\r\n      gHtmlMdBlocks:   [],\r\n      gHtmlSpans:      [],\r\n      gUrls:           {},\r\n      gTitles:         {},\r\n      gDimensions:     {},\r\n      gListLevel:      0,\r\n      hashLinkCounts:  {},\r\n      langExtensions:  langExtensions,\r\n      outputModifiers: outputModifiers,\r\n      converter:       this,\r\n      ghCodeBlocks:    []\r\n    };\r\n\r\n    // attacklab: Replace ~ with ~T\r\n    // This lets us use tilde as an escape char to avoid md5 hashes\r\n    // The choice of character is arbitrary; anything that isn't\r\n    // magic in Markdown will work.\r\n    text = text.replace(/~/g, '~T');\r\n\r\n    // attacklab: Replace $ with ~D\r\n    // RegExp interprets $ as a special character\r\n    // when it's in a replacement string\r\n    text = text.replace(/\\$/g, '~D');\r\n\r\n    // Standardize line endings\r\n    text = text.replace(/\\r\\n/g, '\\n'); // DOS to Unix\r\n    text = text.replace(/\\r/g, '\\n'); // Mac to Unix\r\n\r\n    if (options.smartIndentationFix) {\r\n      text = rTrimInputText(text);\r\n    }\r\n\r\n    // Make sure text begins and ends with a couple of newlines:\r\n    //text = '\\n\\n' + text + '\\n\\n';\r\n    text = text;\r\n    // detab\r\n    text = showdown.subParser('detab')(text, options, globals);\r\n\r\n    // stripBlankLines\r\n    text = showdown.subParser('stripBlankLines')(text, options, globals);\r\n\r\n    //run languageExtensions\r\n    showdown.helper.forEach(langExtensions, function (ext) {\r\n      text = showdown.subParser('runExtension')(ext, text, options, globals);\r\n    });\r\n\r\n    // run the sub parsers\r\n    text = showdown.subParser('hashPreCodeTags')(text, options, globals);\r\n    text = showdown.subParser('githubCodeBlocks')(text, options, globals);\r\n    text = showdown.subParser('hashHTMLBlocks')(text, options, globals);\r\n    text = showdown.subParser('hashHTMLSpans')(text, options, globals);\r\n    text = showdown.subParser('stripLinkDefinitions')(text, options, globals);\r\n    text = showdown.subParser('blockGamut')(text, options, globals);\r\n    text = showdown.subParser('unhashHTMLSpans')(text, options, globals);\r\n    text = showdown.subParser('unescapeSpecialChars')(text, options, globals);\r\n\r\n    // attacklab: Restore dollar signs\r\n    text = text.replace(/~D/g, '$$');\r\n\r\n    // attacklab: Restore tildes\r\n    text = text.replace(/~T/g, '~');\r\n\r\n    // Run output modifiers\r\n    showdown.helper.forEach(outputModifiers, function (ext) {\r\n      text = showdown.subParser('runExtension')(ext, text, options, globals);\r\n    });\r\n    return text;\r\n  };\r\n\r\n  /**\r\n   * Set an option of this Converter instance\r\n   * @param {string} key\r\n   * @param {*} value\r\n   */\r\n  this.setOption = function (key, value) {\r\n    options[key] = value;\r\n  };\r\n\r\n  /**\r\n   * Get the option of this Converter instance\r\n   * @param {string} key\r\n   * @returns {*}\r\n   */\r\n  this.getOption = function (key) {\r\n    return options[key];\r\n  };\r\n\r\n  /**\r\n   * Get the options of this Converter instance\r\n   * @returns {{}}\r\n   */\r\n  this.getOptions = function () {\r\n    return options;\r\n  };\r\n\r\n  /**\r\n   * Add extension to THIS converter\r\n   * @param {{}} extension\r\n   * @param {string} [name=null]\r\n   */\r\n  this.addExtension = function (extension, name) {\r\n    name = name || null;\r\n    _parseExtension(extension, name);\r\n  };\r\n\r\n  /**\r\n   * Use a global registered extension with THIS converter\r\n   * @param {string} extensionName Name of the previously registered extension\r\n   */\r\n  this.useExtension = function (extensionName) {\r\n    _parseExtension(extensionName);\r\n  };\r\n\r\n  /**\r\n   * Set the flavor THIS converter should use\r\n   * @param {string} name\r\n   */\r\n  this.setFlavor = function (name) {\r\n    if (flavor.hasOwnProperty(name)) {\r\n      var preset = flavor[name];\r\n      for (var option in preset) {\r\n        if (preset.hasOwnProperty(option)) {\r\n          options[option] = preset[option];\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Remove an extension from THIS converter.\r\n   * Note: This is a costly operation. It's better to initialize a new converter\r\n   * and specify the extensions you wish to use\r\n   * @param {Array} extension\r\n   */\r\n  this.removeExtension = function (extension) {\r\n    if (!showdown.helper.isArray(extension)) {\r\n      extension = [extension];\r\n    }\r\n    for (var a = 0; a < extension.length; ++a) {\r\n      var ext = extension[a];\r\n      for (var i = 0; i < langExtensions.length; ++i) {\r\n        if (langExtensions[i] === ext) {\r\n          langExtensions[i].splice(i, 1);\r\n        }\r\n      }\r\n      for (var ii = 0; ii < outputModifiers.length; ++i) {\r\n        if (outputModifiers[ii] === ext) {\r\n          outputModifiers[ii].splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Get all extension of THIS converter\r\n   * @returns {{language: Array, output: Array}}\r\n   */\r\n  this.getAllExtensions = function () {\r\n    return {\r\n      language: langExtensions,\r\n      output: outputModifiers\r\n    };\r\n  };\r\n};\r\n\r\n/**\r\n * Turn Markdown link shortcuts into XHTML <a> tags.\r\n */\r\nshowdown.subParser('anchors', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('anchors.before', text, options, globals);\r\n\r\n  var writeAnchorTag = function (wholeMatch, m1, m2, m3, m4, m5, m6, m7) {\r\n    if (showdown.helper.isUndefined(m7)) {\r\n      m7 = '';\r\n    }\r\n    wholeMatch = m1;\r\n    var linkText = m2,\r\n        linkId = m3.toLowerCase(),\r\n        url = m4,\r\n        title = m7;\r\n\r\n    if (!url) {\r\n      if (!linkId) {\r\n        // lower-case and turn embedded newlines into spaces\r\n        linkId = linkText.toLowerCase().replace(/ ?\\n/g, ' ');\r\n      }\r\n      url = '#' + linkId;\r\n\r\n      if (!showdown.helper.isUndefined(globals.gUrls[linkId])) {\r\n        url = globals.gUrls[linkId];\r\n        if (!showdown.helper.isUndefined(globals.gTitles[linkId])) {\r\n          title = globals.gTitles[linkId];\r\n        }\r\n      } else {\r\n        if (wholeMatch.search(/\\(\\s*\\)$/m) > -1) {\r\n          // Special case for explicit empty url\r\n          url = '';\r\n        } else {\r\n          return wholeMatch;\r\n        }\r\n      }\r\n    }\r\n\r\n    url = showdown.helper.escapeCharacters(url, '*_', false);\r\n    var result = '<a href=\"' + url + '\"';\r\n\r\n    if (title !== '' && title !== null) {\r\n      title = title.replace(/\"/g, '&quot;');\r\n      title = showdown.helper.escapeCharacters(title, '*_', false);\r\n      result += ' title=\"' + title + '\"';\r\n    }\r\n\r\n    result += '>' + linkText + '</a>';\r\n\r\n    return result;\r\n  };\r\n\r\n  // First, handle reference-style links: [link text] [id]\r\n  /*\r\n   text = text.replace(/\r\n   (\t\t\t\t\t\t\t// wrap whole match in $1\r\n   \\[\r\n   (\r\n   (?:\r\n   \\[[^\\]]*\\]\t\t// allow brackets nested one level\r\n   |\r\n   [^\\[]\t\t\t// or anything else\r\n   )*\r\n   )\r\n   \\]\r\n\r\n   [ ]?\t\t\t\t\t// one optional space\r\n   (?:\\n[ ]*)?\t\t\t\t// one optional newline followed by spaces\r\n\r\n   \\[\r\n   (.*?)\t\t\t\t\t// id = $3\r\n   \\]\r\n   )()()()()\t\t\t\t\t// pad remaining backreferences\r\n   /g,_DoAnchors_callback);\r\n   */\r\n  text = text.replace(/(\\[((?:\\[[^\\]]*]|[^\\[\\]])*)][ ]?(?:\\n[ ]*)?\\[(.*?)])()()()()/g, writeAnchorTag);\r\n\r\n  //\r\n  // Next, inline-style links: [link text](url \"optional title\")\r\n  //\r\n\r\n  /*\r\n   text = text.replace(/\r\n   (\t\t\t\t\t\t// wrap whole match in $1\r\n   \\[\r\n   (\r\n   (?:\r\n   \\[[^\\]]*\\]\t// allow brackets nested one level\r\n   |\r\n   [^\\[\\]]\t\t\t// or anything else\r\n   )\r\n   )\r\n   \\]\r\n   \\(\t\t\t\t\t\t// literal paren\r\n   [ \\t]*\r\n   ()\t\t\t\t\t\t// no id, so leave $3 empty\r\n   <?(.*?)>?\t\t\t\t// href = $4\r\n   [ \\t]*\r\n   (\t\t\t\t\t\t// $5\r\n   (['\"])\t\t\t\t// quote char = $6\r\n   (.*?)\t\t\t\t// Title = $7\r\n   \\6\t\t\t\t\t// matching quote\r\n   [ \\t]*\t\t\t\t// ignore any spaces/tabs between closing quote and )\r\n   )?\t\t\t\t\t\t// title is optional\r\n   \\)\r\n   )\r\n   /g,writeAnchorTag);\r\n   */\r\n  text = text.replace(/(\\[((?:\\[[^\\]]*]|[^\\[\\]])*)]\\([ \\t]*()<?(.*?(?:\\(.*?\\).*?)?)>?[ \\t]*((['\"])(.*?)\\6[ \\t]*)?\\))/g,\r\n                      writeAnchorTag);\r\n\r\n  //\r\n  // Last, handle reference-style shortcuts: [link text]\r\n  // These must come last in case you've also got [link test][1]\r\n  // or [link test](/foo)\r\n  //\r\n\r\n  /*\r\n   text = text.replace(/\r\n   (                // wrap whole match in $1\r\n   \\[\r\n   ([^\\[\\]]+)       // link text = $2; can't contain '[' or ']'\r\n   \\]\r\n   )()()()()()      // pad rest of backreferences\r\n   /g, writeAnchorTag);\r\n   */\r\n  text = text.replace(/(\\[([^\\[\\]]+)])()()()()()/g, writeAnchorTag);\r\n\r\n  text = globals.converter._dispatch('anchors.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\nshowdown.subParser('autoLinks', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('autoLinks.before', text, options, globals);\r\n\r\n  var simpleURLRegex  = /\\b(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+\\.[^'\">\\s]+)(?=\\s|$)(?![\"<>])/gi,\r\n      delimUrlRegex   = /<(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+)>/gi,\r\n      simpleMailRegex = /(?:^|[ \\n\\t])([A-Za-z0-9!#$%&'*+-/=?^_`\\{|}~\\.]+@[-a-z0-9]+(\\.[-a-z0-9]+)*\\.[a-z]+)(?:$|[ \\n\\t])/gi,\r\n      delimMailRegex  = /<(?:mailto:)?([-.\\w]+@[-a-z0-9]+(\\.[-a-z0-9]+)*\\.[a-z]+)>/gi;\r\n\r\n  text = text.replace(delimUrlRegex, replaceLink);\r\n  text = text.replace(delimMailRegex, replaceMail);\r\n  // simpleURLRegex  = /\\b(((https?|ftp|dict):\\/\\/|www\\.)[-.+~:?#@!$&'()*,;=[\\]\\w]+)\\b/gi,\r\n  // Email addresses: <address@domain.foo>\r\n\r\n  if (options.simplifiedAutoLink) {\r\n    text = text.replace(simpleURLRegex, replaceLink);\r\n    text = text.replace(simpleMailRegex, replaceMail);\r\n  }\r\n\r\n  function replaceLink(wm, link) {\r\n    var lnkTxt = link;\r\n    if (/^www\\./i.test(link)) {\r\n      link = link.replace(/^www\\./i, 'http://www.');\r\n    }\r\n    return '<a href=\"' + link + '\">' + lnkTxt + '</a>';\r\n  }\r\n\r\n  function replaceMail(wholeMatch, m1) {\r\n    var unescapedStr = showdown.subParser('unescapeSpecialChars')(m1);\r\n    return showdown.subParser('encodeEmailAddress')(unescapedStr);\r\n  }\r\n\r\n  text = globals.converter._dispatch('autoLinks.after', text, options, globals);\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n * These are all the transformations that form block-level\r\n * tags like paragraphs, headers, and list items.\r\n */\r\nshowdown.subParser('blockGamut', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('blockGamut.before', text, options, globals);\r\n\r\n  // we parse blockquotes first so that we can have headings and hrs\r\n  // inside blockquotes\r\n  text = showdown.subParser('blockQuotes')(text, options, globals);\r\n  text = showdown.subParser('headers')(text, options, globals);\r\n\r\n  // Do Horizontal Rules:\r\n  var key = showdown.subParser('hashBlock')('<hr />', options, globals);\r\n  text = text.replace(/^[ ]{0,2}([ ]?\\*[ ]?){3,}[ \\t]*$/gm, key);\r\n  text = text.replace(/^[ ]{0,2}([ ]?\\-[ ]?){3,}[ \\t]*$/gm, key);\r\n  text = text.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \\t]*$/gm, key);\r\n\r\n  text = showdown.subParser('lists')(text, options, globals);\r\n  text = showdown.subParser('codeBlocks')(text, options, globals);\r\n  text = showdown.subParser('tables')(text, options, globals);\r\n\r\n  // We already ran _HashHTMLBlocks() before, in Markdown(), but that\r\n  // was to escape raw HTML in the original Markdown source. This time,\r\n  // we're escaping the markup we've just created, so that we don't wrap\r\n  // <p> tags around block-level tags.\r\n  text = showdown.subParser('hashHTMLBlocks')(text, options, globals);\r\n  text = showdown.subParser('paragraphs')(text, options, globals);\r\n\r\n  text = globals.converter._dispatch('blockGamut.after', text, options, globals);\r\n\r\n  return text;\r\n});\r\n\r\nshowdown.subParser('blockQuotes', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('blockQuotes.before', text, options, globals);\r\n  /*\r\n   text = text.replace(/\r\n   (\t\t\t\t\t\t\t\t// Wrap whole match in $1\r\n   (\r\n   ^[ \\t]*>[ \\t]?\t\t\t// '>' at the start of a line\r\n   .+\\n\t\t\t\t\t// rest of the first line\r\n   (.+\\n)*\t\t\t\t\t// subsequent consecutive lines\r\n   \\n*\t\t\t\t\t\t// blanks\r\n   )+\r\n   )\r\n   /gm, function(){...});\r\n   */\r\n\r\n  text = text.replace(/((^[ \\t]{0,3}>[ \\t]?.+\\n(.+\\n)*\\n*)+)/gm, function (wholeMatch, m1) {\r\n    var bq = m1;\r\n\r\n    // attacklab: hack around Konqueror 3.5.4 bug:\r\n    // \"----------bug\".replace(/^-/g,\"\") == \"bug\"\r\n    bq = bq.replace(/^[ \\t]*>[ \\t]?/gm, '~0'); // trim one level of quoting\r\n\r\n    // attacklab: clean up hack\r\n    bq = bq.replace(/~0/g, '');\r\n\r\n    bq = bq.replace(/^[ \\t]+$/gm, ''); // trim whitespace-only lines\r\n    bq = showdown.subParser('githubCodeBlocks')(bq, options, globals);\r\n    bq = showdown.subParser('blockGamut')(bq, options, globals); // recurse\r\n\r\n    bq = bq.replace(/(^|\\n)/g, '$1  ');\r\n    // These leading spaces screw with <pre> content, so we need to fix that:\r\n    bq = bq.replace(/(\\s*<pre>[^\\r]+?<\\/pre>)/gm, function (wholeMatch, m1) {\r\n      var pre = m1;\r\n      // attacklab: hack around Konqueror 3.5.4 bug:\r\n      pre = pre.replace(/^  /mg, '~0');\r\n      pre = pre.replace(/~0/g, '');\r\n      return pre;\r\n    });\r\n\r\n    return showdown.subParser('hashBlock')('<blockquote>\\n' + bq + '\\n</blockquote>', options, globals);\r\n  });\r\n\r\n  text = globals.converter._dispatch('blockQuotes.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\n/**\r\n * Process Markdown `<pre><code>` blocks.\r\n */\r\nshowdown.subParser('codeBlocks', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('codeBlocks.before', text, options, globals);\r\n  /*\r\n   text = text.replace(text,\r\n   /(?:\\n\\n|^)\r\n   (\t\t\t\t\t\t\t\t// $1 = the code block -- one or more lines, starting with a space/tab\r\n   (?:\r\n   (?:[ ]{4}|\\t)\t\t\t// Lines must start with a tab or a tab-width of spaces - attacklab: g_tab_width\r\n   .*\\n+\r\n   )+\r\n   )\r\n   (\\n*[ ]{0,3}[^ \\t\\n]|(?=~0))\t// attacklab: g_tab_width\r\n   /g,function(){...});\r\n   */\r\n\r\n  // attacklab: sentinel workarounds for lack of \\A and \\Z, safari\\khtml bug\r\n  text += '~0';\r\n\r\n  var pattern = /(?:\\n\\n|^)((?:(?:[ ]{4}|\\t).*\\n+)+)(\\n*[ ]{0,3}[^ \\t\\n]|(?=~0))/g;\r\n  text = text.replace(pattern, function (wholeMatch, m1, m2) {\r\n    var codeblock = m1,\r\n        nextChar = m2,\r\n        end = '\\n';\r\n\r\n    codeblock = showdown.subParser('outdent')(codeblock);\r\n    codeblock = showdown.subParser('encodeCode')(codeblock);\r\n    codeblock = showdown.subParser('detab')(codeblock);\r\n    codeblock = codeblock.replace(/^\\n+/g, ''); // trim leading newlines\r\n    codeblock = codeblock.replace(/\\n+$/g, ''); // trim trailing newlines\r\n\r\n    if (options.omitExtraWLInCodeBlocks) {\r\n      end = '';\r\n    }\r\n\r\n    codeblock = '<pre><code>' + codeblock + end + '</code></pre>';\r\n\r\n    return showdown.subParser('hashBlock')(codeblock, options, globals) + nextChar;\r\n  });\r\n\r\n  // attacklab: strip sentinel\r\n  text = text.replace(/~0/, '');\r\n\r\n  text = globals.converter._dispatch('codeBlocks.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\n/**\r\n *\r\n *   *  Backtick quotes are used for <code></code> spans.\r\n *\r\n *   *  You can use multiple backticks as the delimiters if you want to\r\n *     include literal backticks in the code span. So, this input:\r\n *\r\n *         Just type ``foo `bar` baz`` at the prompt.\r\n *\r\n *       Will translate to:\r\n *\r\n *         <p>Just type <code>foo `bar` baz</code> at the prompt.</p>\r\n *\r\n *    There's no arbitrary limit to the number of backticks you\r\n *    can use as delimters. If you need three consecutive backticks\r\n *    in your code, use four for delimiters, etc.\r\n *\r\n *  *  You can use spaces to get literal backticks at the edges:\r\n *\r\n *         ... type `` `bar` `` ...\r\n *\r\n *       Turns to:\r\n *\r\n *         ... type <code>`bar`</code> ...\r\n */\r\nshowdown.subParser('codeSpans', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('codeSpans.before', text, options, globals);\r\n\r\n  /*\r\n   text = text.replace(/\r\n   (^|[^\\\\])\t\t\t\t\t// Character before opening ` can't be a backslash\r\n   (`+)\t\t\t\t\t\t// $2 = Opening run of `\r\n   (\t\t\t\t\t\t\t// $3 = The code block\r\n   [^\\r]*?\r\n   [^`]\t\t\t\t\t// attacklab: work around lack of lookbehind\r\n   )\r\n   \\2\t\t\t\t\t\t\t// Matching closer\r\n   (?!`)\r\n   /gm, function(){...});\r\n   */\r\n\r\n  if (typeof(text) === 'undefined') {\r\n    text = '';\r\n  }\r\n  text = text.replace(/(^|[^\\\\])(`+)([^\\r]*?[^`])\\2(?!`)/gm,\r\n    function (wholeMatch, m1, m2, m3) {\r\n      var c = m3;\r\n      c = c.replace(/^([ \\t]*)/g, '');\t// leading whitespace\r\n      c = c.replace(/[ \\t]*$/g, '');\t// trailing whitespace\r\n      c = showdown.subParser('encodeCode')(c);\r\n      return m1 + '<code>' + c + '</code>';\r\n    }\r\n  );\r\n\r\n  text = globals.converter._dispatch('codeSpans.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\n/**\r\n * Convert all tabs to spaces\r\n */\r\nshowdown.subParser('detab', function (text) {\r\n  'use strict';\r\n\r\n  // expand first n-1 tabs\r\n  text = text.replace(/\\t(?=\\t)/g, '    '); // g_tab_width\r\n\r\n  // replace the nth with two sentinels\r\n  text = text.replace(/\\t/g, '~A~B');\r\n\r\n  // use the sentinel to anchor our regex so it doesn't explode\r\n  text = text.replace(/~B(.+?)~A/g, function (wholeMatch, m1) {\r\n    var leadingText = m1,\r\n        numSpaces = 4 - leadingText.length % 4;  // g_tab_width\r\n\r\n    // there *must* be a better way to do this:\r\n    for (var i = 0; i < numSpaces; i++) {\r\n      leadingText += ' ';\r\n    }\r\n\r\n    return leadingText;\r\n  });\r\n\r\n  // clean up sentinels\r\n  text = text.replace(/~A/g, '    ');  // g_tab_width\r\n  text = text.replace(/~B/g, '');\r\n\r\n  return text;\r\n\r\n});\r\n\r\n/**\r\n * Smart processing for ampersands and angle brackets that need to be encoded.\r\n */\r\nshowdown.subParser('encodeAmpsAndAngles', function (text) {\r\n  'use strict';\r\n  // Ampersand-encoding based entirely on Nat Irons's Amputator MT plugin:\r\n  // http://bumppo.net/projects/amputator/\r\n  text = text.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\\w+);)/g, '&amp;');\r\n\r\n  // Encode naked <'s\r\n  text = text.replace(/<(?![a-z\\/?\\$!])/gi, '&lt;');\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n * Returns the string, with after processing the following backslash escape sequences.\r\n *\r\n * attacklab: The polite way to do this is with the new escapeCharacters() function:\r\n *\r\n *    text = escapeCharacters(text,\"\\\\\",true);\r\n *    text = escapeCharacters(text,\"`*_{}[]()>#+-.!\",true);\r\n *\r\n * ...but we're sidestepping its use of the (slow) RegExp constructor\r\n * as an optimization for Firefox.  This function gets called a LOT.\r\n */\r\nshowdown.subParser('encodeBackslashEscapes', function (text) {\r\n  'use strict';\r\n  text = text.replace(/\\\\(\\\\)/g, showdown.helper.escapeCharactersCallback);\r\n  text = text.replace(/\\\\([`*_{}\\[\\]()>#+-.!])/g, showdown.helper.escapeCharactersCallback);\r\n  return text;\r\n});\r\n\r\n/**\r\n * Encode/escape certain characters inside Markdown code runs.\r\n * The point is that in code, these characters are literals,\r\n * and lose their special Markdown meanings.\r\n */\r\nshowdown.subParser('encodeCode', function (text) {\r\n  'use strict';\r\n\r\n  // Encode all ampersands; HTML entities are not\r\n  // entities within a Markdown code span.\r\n  text = text.replace(/&/g, '&amp;');\r\n\r\n  // Do the angle bracket song and dance:\r\n  text = text.replace(/</g, '&lt;');\r\n  text = text.replace(/>/g, '&gt;');\r\n\r\n  // Now, escape characters that are magic in Markdown:\r\n  text = showdown.helper.escapeCharacters(text, '*_{}[]\\\\', false);\r\n\r\n  // jj the line above breaks this:\r\n  //---\r\n  //* Item\r\n  //   1. Subitem\r\n  //            special char: *\r\n  // ---\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n *  Input: an email address, e.g. \"foo@example.com\"\r\n *\r\n *  Output: the email address as a mailto link, with each character\r\n *    of the address encoded as either a decimal or hex entity, in\r\n *    the hopes of foiling most address harvesting spam bots. E.g.:\r\n *\r\n *    <a href=\"&#x6D;&#97;&#105;&#108;&#x74;&#111;:&#102;&#111;&#111;&#64;&#101;\r\n *       x&#x61;&#109;&#x70;&#108;&#x65;&#x2E;&#99;&#111;&#109;\">&#102;&#111;&#111;\r\n *       &#64;&#101;x&#x61;&#109;&#x70;&#108;&#x65;&#x2E;&#99;&#111;&#109;</a>\r\n *\r\n *  Based on a filter by Matthew Wickline, posted to the BBEdit-Talk\r\n *  mailing list: <http://tinyurl.com/yu7ue>\r\n *\r\n */\r\nshowdown.subParser('encodeEmailAddress', function (addr) {\r\n  'use strict';\r\n\r\n  var encode = [\r\n    function (ch) {\r\n      return '&#' + ch.charCodeAt(0) + ';';\r\n    },\r\n    function (ch) {\r\n      return '&#x' + ch.charCodeAt(0).toString(16) + ';';\r\n    },\r\n    function (ch) {\r\n      return ch;\r\n    }\r\n  ];\r\n\r\n  addr = 'mailto:' + addr;\r\n\r\n  addr = addr.replace(/./g, function (ch) {\r\n    if (ch === '@') {\r\n      // this *must* be encoded. I insist.\r\n      ch = encode[Math.floor(Math.random() * 2)](ch);\r\n    } else if (ch !== ':') {\r\n      // leave ':' alone (to spot mailto: later)\r\n      var r = Math.random();\r\n      // roughly 10% raw, 45% hex, 45% dec\r\n      ch = (\r\n        r > 0.9 ? encode[2](ch) : r > 0.45 ? encode[1](ch) : encode[0](ch)\r\n      );\r\n    }\r\n    return ch;\r\n  });\r\n\r\n  addr = '<a href=\"' + addr + '\">' + addr + '</a>';\r\n  addr = addr.replace(/\">.+:/g, '\">'); // strip the mailto: from the visible part\r\n\r\n  return addr;\r\n});\r\n\r\n/**\r\n * Within tags -- meaning between < and > -- encode [\\ ` * _] so they\r\n * don't conflict with their use in Markdown for code, italics and strong.\r\n */\r\nshowdown.subParser('escapeSpecialCharsWithinTagAttributes', function (text) {\r\n  'use strict';\r\n\r\n  // Build a regex to find HTML tags and comments.  See Friedl's\r\n  // \"Mastering Regular Expressions\", 2nd Ed., pp. 200-201.\r\n  var regex = /(<[a-z\\/!$](\"[^\"]*\"|'[^']*'|[^'\">])*>|<!(--.*?--\\s*)+>)/gi;\r\n\r\n  text = text.replace(regex, function (wholeMatch) {\r\n    var tag = wholeMatch.replace(/(.)<\\/?code>(?=.)/g, '$1`');\r\n    tag = showdown.helper.escapeCharacters(tag, '\\\\`*_', false);\r\n    return tag;\r\n  });\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n * Handle github codeblocks prior to running HashHTML so that\r\n * HTML contained within the codeblock gets escaped properly\r\n * Example:\r\n * ```ruby\r\n *     def hello_world(x)\r\n *       puts \"Hello, #{x}\"\r\n *     end\r\n * ```\r\n */\r\nshowdown.subParser('githubCodeBlocks', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  // early exit if option is not enabled\r\n  if (!options.ghCodeBlocks) {\r\n    return text;\r\n  }\r\n\r\n  text = globals.converter._dispatch('githubCodeBlocks.before', text, options, globals);\r\n\r\n  text += '~0';\r\n\r\n  text = text.replace(/(?:^|\\n)```(.*)\\n([\\s\\S]*?)\\n```/g, function (wholeMatch, language, codeblock) {\r\n    var end = (options.omitExtraWLInCodeBlocks) ? '' : '\\n';\r\n\r\n    // First parse the github code block\r\n    codeblock = showdown.subParser('encodeCode')(codeblock);\r\n    codeblock = showdown.subParser('detab')(codeblock);\r\n    codeblock = codeblock.replace(/^\\n+/g, ''); // trim leading newlines\r\n    codeblock = codeblock.replace(/\\n+$/g, ''); // trim trailing whitespace\r\n\r\n    codeblock = '<pre><code' + (language ? ' class=\"' + language + ' language-' + language + '\"' : '') + '>' + codeblock + end + '</code></pre>';\r\n\r\n    codeblock = showdown.subParser('hashBlock')(codeblock, options, globals);\r\n\r\n    // Since GHCodeblocks can be false positives, we need to\r\n    // store the primitive text and the parsed text in a global var,\r\n    // and then return a token\r\n    return '\\n\\n~G' + (globals.ghCodeBlocks.push({text: wholeMatch, codeblock: codeblock}) - 1) + 'G\\n\\n';\r\n  });\r\n\r\n  // attacklab: strip sentinel\r\n  text = text.replace(/~0/, '');\r\n\r\n  return globals.converter._dispatch('githubCodeBlocks.after', text, options, globals);\r\n});\r\n\r\nshowdown.subParser('hashBlock', function (text, options, globals) {\r\n  'use strict';\r\n  text = text.replace(/(^\\n+|\\n+$)/g, '');\r\n  return '\\n\\n~K' + (globals.gHtmlBlocks.push(text) - 1) + 'K\\n\\n';\r\n});\r\n\r\nshowdown.subParser('hashElement', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  return function (wholeMatch, m1) {\r\n    var blockText = m1;\r\n\r\n    // Undo double lines\r\n    blockText = blockText.replace(/\\n\\n/g, '\\n');\r\n    blockText = blockText.replace(/^\\n/, '');\r\n\r\n    // strip trailing blank lines\r\n    blockText = blockText.replace(/\\n+$/g, '');\r\n\r\n    // Replace the element text with a marker (\"~KxK\" where x is its key)\r\n    blockText = '\\n\\n~K' + (globals.gHtmlBlocks.push(blockText) - 1) + 'K\\n\\n';\r\n\r\n    return blockText;\r\n  };\r\n});\r\n\r\nshowdown.subParser('hashHTMLBlocks', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  var blockTags = [\r\n      'pre',\r\n      'div',\r\n      'h1',\r\n      'h2',\r\n      'h3',\r\n      'h4',\r\n      'h5',\r\n      'h6',\r\n      'blockquote',\r\n      'table',\r\n      'dl',\r\n      'ol',\r\n      'ul',\r\n      'script',\r\n      'noscript',\r\n      'form',\r\n      'fieldset',\r\n      'iframe',\r\n      'math',\r\n      'style',\r\n      'section',\r\n      'header',\r\n      'footer',\r\n      'nav',\r\n      'article',\r\n      'aside',\r\n      'address',\r\n      'audio',\r\n      'canvas',\r\n      'figure',\r\n      'hgroup',\r\n      'output',\r\n      'video',\r\n      'p'\r\n    ],\r\n    repFunc = function (wholeMatch, match, left, right) {\r\n      var txt = wholeMatch;\r\n      // check if this html element is marked as markdown\r\n      // if so, it's contents should be parsed as markdown\r\n      if (left.search(/\\bmarkdown\\b/) !== -1) {\r\n        txt = left + globals.converter.makeHtml(match) + right;\r\n      }\r\n      return '\\n\\n~K' + (globals.gHtmlBlocks.push(txt) - 1) + 'K\\n\\n';\r\n    };\r\n\r\n  for (var i = 0; i < blockTags.length; ++i) {\r\n    text = showdown.helper.replaceRecursiveRegExp(text, repFunc, '^(?: |\\\\t){0,3}<' + blockTags[i] + '\\\\b[^>]*>', '</' + blockTags[i] + '>', 'gim');\r\n  }\r\n\r\n  // HR SPECIAL CASE\r\n  text = text.replace(/(\\n[ ]{0,3}(<(hr)\\b([^<>])*?\\/?>)[ \\t]*(?=\\n{2,}))/g,\r\n    showdown.subParser('hashElement')(text, options, globals));\r\n\r\n  // Special case for standalone HTML comments:\r\n  text = text.replace(/(<!--[\\s\\S]*?-->)/g,\r\n    showdown.subParser('hashElement')(text, options, globals));\r\n\r\n  // PHP and ASP-style processor instructions (<?...?> and <%...%>)\r\n  text = text.replace(/(?:\\n\\n)([ ]{0,3}(?:<([?%])[^\\r]*?\\2>)[ \\t]*(?=\\n{2,}))/g,\r\n    showdown.subParser('hashElement')(text, options, globals));\r\n  return text;\r\n});\r\n\r\n/**\r\n * Hash span elements that should not be parsed as markdown\r\n */\r\nshowdown.subParser('hashHTMLSpans', function (text, config, globals) {\r\n  'use strict';\r\n\r\n  var matches = showdown.helper.matchRecursiveRegExp(text, '<code\\\\b[^>]*>', '</code>', 'gi');\r\n\r\n  for (var i = 0; i < matches.length; ++i) {\r\n    text = text.replace(matches[i][0], '~L' + (globals.gHtmlSpans.push(matches[i][0]) - 1) + 'L');\r\n  }\r\n  return text;\r\n});\r\n\r\n/**\r\n * Unhash HTML spans\r\n */\r\nshowdown.subParser('unhashHTMLSpans', function (text, config, globals) {\r\n  'use strict';\r\n\r\n  for (var i = 0; i < globals.gHtmlSpans.length; ++i) {\r\n    text = text.replace('~L' + i + 'L', globals.gHtmlSpans[i]);\r\n  }\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n * Hash span elements that should not be parsed as markdown\r\n */\r\nshowdown.subParser('hashPreCodeTags', function (text, config, globals) {\r\n  'use strict';\r\n\r\n  var repFunc = function (wholeMatch, match, left, right) {\r\n    // encode html entities\r\n    var codeblock = left + showdown.subParser('encodeCode')(match) + right;\r\n    return '\\n\\n~G' + (globals.ghCodeBlocks.push({text: wholeMatch, codeblock: codeblock}) - 1) + 'G\\n\\n';\r\n  };\r\n\r\n  text = showdown.helper.replaceRecursiveRegExp(text, repFunc, '^(?: |\\\\t){0,3}<pre\\\\b[^>]*>\\\\s*<code\\\\b[^>]*>', '^(?: |\\\\t){0,3}</code>\\\\s*</pre>', 'gim');\r\n  return text;\r\n});\r\n\r\nshowdown.subParser('headers', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('headers.before', text, options, globals);\r\n\r\n  var prefixHeader = options.prefixHeaderId,\r\n      headerLevelStart = (isNaN(parseInt(options.headerLevelStart))) ? 1 : parseInt(options.headerLevelStart),\r\n\r\n  // Set text-style headers:\r\n  //\tHeader 1\r\n  //\t========\r\n  //\r\n  //\tHeader 2\r\n  //\t--------\r\n  //\r\n      setextRegexH1 = (options.smoothLivePreview) ? /^(.+)[ \\t]*\\n={2,}[ \\t]*\\n+/gm : /^(.+)[ \\t]*\\n=+[ \\t]*\\n+/gm,\r\n      setextRegexH2 = (options.smoothLivePreview) ? /^(.+)[ \\t]*\\n-{2,}[ \\t]*\\n+/gm : /^(.+)[ \\t]*\\n-+[ \\t]*\\n+/gm;\r\n\r\n  text = text.replace(setextRegexH1, function (wholeMatch, m1) {\r\n\r\n    var spanGamut = showdown.subParser('spanGamut')(m1, options, globals),\r\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m1) + '\"',\r\n        hLevel = headerLevelStart,\r\n        hashBlock = '<h' + hLevel + hID + '>' + spanGamut + '</h' + hLevel + '>';\r\n    return showdown.subParser('hashBlock')(hashBlock, options, globals);\r\n  });\r\n\r\n  text = text.replace(setextRegexH2, function (matchFound, m1) {\r\n    var spanGamut = showdown.subParser('spanGamut')(m1, options, globals),\r\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m1) + '\"',\r\n        hLevel = headerLevelStart + 1,\r\n      hashBlock = '<h' + hLevel + hID + '>' + spanGamut + '</h' + hLevel + '>';\r\n    return showdown.subParser('hashBlock')(hashBlock, options, globals);\r\n  });\r\n\r\n  // atx-style headers:\r\n  //  # Header 1\r\n  //  ## Header 2\r\n  //  ## Header 2 with closing hashes ##\r\n  //  ...\r\n  //  ###### Header 6\r\n  //\r\n  text = text.replace(/^(#{1,6})[ \\t]*(.+?)[ \\t]*#*\\n+/gm, function (wholeMatch, m1, m2) {\r\n    var span = showdown.subParser('spanGamut')(m2, options, globals),\r\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m2) + '\"',\r\n        hLevel = headerLevelStart - 1 + m1.length,\r\n        header = '<h' + hLevel + hID + '>' + span + '</h' + hLevel + '>';\r\n\r\n    return showdown.subParser('hashBlock')(header, options, globals);\r\n  });\r\n\r\n  function headerId(m) {\r\n    var title, escapedId = m.replace(/[^\\w]/g, '').toLowerCase();\r\n\r\n    if (globals.hashLinkCounts[escapedId]) {\r\n      title = escapedId + '-' + (globals.hashLinkCounts[escapedId]++);\r\n    } else {\r\n      title = escapedId;\r\n      globals.hashLinkCounts[escapedId] = 1;\r\n    }\r\n\r\n    // Prefix id to prevent causing inadvertent pre-existing style matches.\r\n    if (prefixHeader === true) {\r\n      prefixHeader = 'section';\r\n    }\r\n\r\n    if (showdown.helper.isString(prefixHeader)) {\r\n      return prefixHeader + title;\r\n    }\r\n    return title;\r\n  }\r\n\r\n  text = globals.converter._dispatch('headers.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\n/**\r\n * Turn Markdown image shortcuts into <img> tags.\r\n */\r\nshowdown.subParser('images', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('images.before', text, options, globals);\r\n\r\n  var inlineRegExp    = /!\\[(.*?)]\\s?\\([ \\t]*()<?(\\S+?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*(?:(['\"])(.*?)\\6[ \\t]*)?\\)/g,\r\n      referenceRegExp = /!\\[([^\\]]*?)] ?(?:\\n *)?\\[(.*?)]()()()()()/g;\r\n\r\n  function writeImageTag (wholeMatch, altText, linkId, url, width, height, m5, title) {\r\n\r\n    var gUrls   = globals.gUrls,\r\n        gTitles = globals.gTitles,\r\n        gDims   = globals.gDimensions;\r\n\r\n    linkId = linkId.toLowerCase();\r\n\r\n    if (!title) {\r\n      title = '';\r\n    }\r\n\r\n    if (url === '' || url === null) {\r\n      if (linkId === '' || linkId === null) {\r\n        // lower-case and turn embedded newlines into spaces\r\n        linkId = altText.toLowerCase().replace(/ ?\\n/g, ' ');\r\n      }\r\n      url = '#' + linkId;\r\n\r\n      if (!showdown.helper.isUndefined(gUrls[linkId])) {\r\n        url = gUrls[linkId];\r\n        if (!showdown.helper.isUndefined(gTitles[linkId])) {\r\n          title = gTitles[linkId];\r\n        }\r\n        if (!showdown.helper.isUndefined(gDims[linkId])) {\r\n          width = gDims[linkId].width;\r\n          height = gDims[linkId].height;\r\n        }\r\n      } else {\r\n        return wholeMatch;\r\n      }\r\n    }\r\n\r\n    altText = altText.replace(/\"/g, '&quot;');\r\n    altText = showdown.helper.escapeCharacters(altText, '*_', false);\r\n    url = showdown.helper.escapeCharacters(url, '*_', false);\r\n    var result = '<img src=\"' + url + '\" alt=\"' + altText + '\"';\r\n\r\n    if (title) {\r\n      title = title.replace(/\"/g, '&quot;');\r\n      title = showdown.helper.escapeCharacters(title, '*_', false);\r\n      result += ' title=\"' + title + '\"';\r\n    }\r\n\r\n    if (width && height) {\r\n      width  = (width === '*') ? 'auto' : width;\r\n      height = (height === '*') ? 'auto' : height;\r\n\r\n      result += ' width=\"' + width + '\"';\r\n      result += ' height=\"' + height + '\"';\r\n    }\r\n\r\n    result += ' />';\r\n    return result;\r\n  }\r\n\r\n  // First, handle reference-style labeled images: ![alt text][id]\r\n  text = text.replace(referenceRegExp, writeImageTag);\r\n\r\n  // Next, handle inline images:  ![alt text](url =<width>x<height> \"optional title\")\r\n  text = text.replace(inlineRegExp, writeImageTag);\r\n\r\n  text = globals.converter._dispatch('images.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\nshowdown.subParser('italicsAndBold', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('italicsAndBold.before', text, options, globals);\r\n\r\n  if (options.literalMidWordUnderscores) {\r\n    //underscores\r\n    // Since we are consuming a \\s character, we need to add it\r\n    text = text.replace(/(^|\\s|>|\\b)__(?=\\S)([\\s\\S]+?)__(?=\\b|<|\\s|$)/gm, '$1<strong>$2</strong>');\r\n    text = text.replace(/(^|\\s|>|\\b)_(?=\\S)([\\s\\S]+?)_(?=\\b|<|\\s|$)/gm, '$1<em>$2</em>');\r\n    //asterisks\r\n    text = text.replace(/(\\*\\*)(?=\\S)([^\\r]*?\\S[*]*)\\1/g, '<strong>$2</strong>');\r\n    text = text.replace(/(\\*)(?=\\S)([^\\r]*?\\S)\\1/g, '<em>$2</em>');\r\n\r\n  } else {\r\n    // <strong> must go first:\r\n    text = text.replace(/(\\*\\*|__)(?=\\S)([^\\r]*?\\S[*_]*)\\1/g, '<strong>$2</strong>');\r\n    text = text.replace(/(\\*|_)(?=\\S)([^\\r]*?\\S)\\1/g, '<em>$2</em>');\r\n  }\r\n\r\n  text = globals.converter._dispatch('italicsAndBold.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\n/**\r\n * Form HTML ordered (numbered) and unordered (bulleted) lists.\r\n */\r\nshowdown.subParser('lists', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('lists.before', text, options, globals);\r\n  /**\r\n   * Process the contents of a single ordered or unordered list, splitting it\r\n   * into individual list items.\r\n   * @param {string} listStr\r\n   * @param {boolean} trimTrailing\r\n   * @returns {string}\r\n   */\r\n  function processListItems (listStr, trimTrailing) {\r\n    // The $g_list_level global keeps track of when we're inside a list.\r\n    // Each time we enter a list, we increment it; when we leave a list,\r\n    // we decrement. If it's zero, we're not in a list anymore.\r\n    //\r\n    // We do this because when we're not inside a list, we want to treat\r\n    // something like this:\r\n    //\r\n    //    I recommend upgrading to version\r\n    //    8. Oops, now this line is treated\r\n    //    as a sub-list.\r\n    //\r\n    // As a single paragraph, despite the fact that the second line starts\r\n    // with a digit-period-space sequence.\r\n    //\r\n    // Whereas when we're inside a list (or sub-list), that line will be\r\n    // treated as the start of a sub-list. What a kludge, huh? This is\r\n    // an aspect of Markdown's syntax that's hard to parse perfectly\r\n    // without resorting to mind-reading. Perhaps the solution is to\r\n    // change the syntax rules such that sub-lists must start with a\r\n    // starting cardinal number; e.g. \"1.\" or \"a.\".\r\n    globals.gListLevel++;\r\n\r\n    // trim trailing blank lines:\r\n    listStr = listStr.replace(/\\n{2,}$/, '\\n');\r\n\r\n    // attacklab: add sentinel to emulate \\z\r\n    listStr += '~0';\r\n\r\n    var rgx = /(\\n)?(^[ \\t]*)([*+-]|\\d+[.])[ \\t]+((\\[(x|X| )?])?[ \\t]*[^\\r]+?(\\n{1,2}))(?=\\n*(~0|\\2([*+-]|\\d+[.])[ \\t]+))/gm,\r\n        isParagraphed = (/\\n[ \\t]*\\n(?!~0)/.test(listStr));\r\n\r\n    listStr = listStr.replace(rgx, function (wholeMatch, m1, m2, m3, m4, taskbtn, checked) {\r\n      checked = (checked && checked.trim() !== '');\r\n      var item = showdown.subParser('outdent')(m4, options, globals),\r\n          bulletStyle = '';\r\n\r\n      // Support for github tasklists\r\n      if (taskbtn && options.tasklists) {\r\n        bulletStyle = ' class=\"task-list-item\" style=\"list-style-type: none;\"';\r\n        item = item.replace(/^[ \\t]*\\[(x|X| )?]/m, function () {\r\n          var otp = '<input type=\"checkbox\" disabled style=\"margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;\"';\r\n          if (checked) {\r\n            otp += ' checked';\r\n          }\r\n          otp += '>';\r\n          return otp;\r\n        });\r\n      }\r\n      // m1 - Leading line or\r\n      // Has a double return (multi paragraph) or\r\n      // Has sublist\r\n      if (m1 || (item.search(/\\n{2,}/) > -1)) {\r\n        item = showdown.subParser('githubCodeBlocks')(item, options, globals);\r\n        item = showdown.subParser('blockGamut')(item, options, globals);\r\n      } else {\r\n        // Recursion for sub-lists:\r\n        item = showdown.subParser('lists')(item, options, globals);\r\n        item = item.replace(/\\n$/, ''); // chomp(item)\r\n        if (isParagraphed) {\r\n          item = showdown.subParser('paragraphs')(item, options, globals);\r\n        } else {\r\n          item = showdown.subParser('spanGamut')(item, options, globals);\r\n        }\r\n      }\r\n      item =  '\\n<li' + bulletStyle + '>' + item + '</li>\\n';\r\n      return item;\r\n    });\r\n\r\n    // attacklab: strip sentinel\r\n    listStr = listStr.replace(/~0/g, '');\r\n\r\n    globals.gListLevel--;\r\n\r\n    if (trimTrailing) {\r\n      listStr = listStr.replace(/\\s+$/, '');\r\n    }\r\n\r\n    return listStr;\r\n  }\r\n\r\n  /**\r\n   * Check and parse consecutive lists (better fix for issue #142)\r\n   * @param {string} list\r\n   * @param {string} listType\r\n   * @param {boolean} trimTrailing\r\n   * @returns {string}\r\n   */\r\n  function parseConsecutiveLists(list, listType, trimTrailing) {\r\n    // check if we caught 2 or more consecutive lists by mistake\r\n    // we use the counterRgx, meaning if listType is UL we look for UL and vice versa\r\n    var counterRxg = (listType === 'ul') ? /^ {0,2}\\d+\\.[ \\t]/gm : /^ {0,2}[*+-][ \\t]/gm,\r\n      subLists = [],\r\n      result = '';\r\n\r\n    if (list.search(counterRxg) !== -1) {\r\n      (function parseCL(txt) {\r\n        var pos = txt.search(counterRxg);\r\n        if (pos !== -1) {\r\n          // slice\r\n          result += '\\n\\n<' + listType + '>' + processListItems(txt.slice(0, pos), !!trimTrailing) + '</' + listType + '>\\n\\n';\r\n\r\n          // invert counterType and listType\r\n          listType = (listType === 'ul') ? 'ol' : 'ul';\r\n          counterRxg = (listType === 'ul') ? /^ {0,2}\\d+\\.[ \\t]/gm : /^ {0,2}[*+-][ \\t]/gm;\r\n\r\n          //recurse\r\n          parseCL(txt.slice(pos));\r\n        } else {\r\n          result += '\\n\\n<' + listType + '>' + processListItems(txt, !!trimTrailing) + '</' + listType + '>\\n\\n';\r\n        }\r\n      })(list);\r\n      for (var i = 0; i < subLists.length; ++i) {\r\n\r\n      }\r\n    } else {\r\n      result = '\\n\\n<' + listType + '>' + processListItems(list, !!trimTrailing) + '</' + listType + '>\\n\\n';\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  // attacklab: add sentinel to hack around khtml/safari bug:\r\n  // http://bugs.webkit.org/show_bug.cgi?id=11231\r\n  text += '~0';\r\n\r\n  // Re-usable pattern to match any entire ul or ol list:\r\n  var wholeList = /^(([ ]{0,3}([*+-]|\\d+[.])[ \\t]+)[^\\r]+?(~0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+-]|\\d+[.])[ \\t]+)))/gm;\r\n\r\n  if (globals.gListLevel) {\r\n    text = text.replace(wholeList, function (wholeMatch, list, m2) {\r\n      var listType = (m2.search(/[*+-]/g) > -1) ? 'ul' : 'ol';\r\n      return parseConsecutiveLists(list, listType, true);\r\n    });\r\n  } else {\r\n    wholeList = /(\\n\\n|^\\n?)(([ ]{0,3}([*+-]|\\d+[.])[ \\t]+)[^\\r]+?(~0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+-]|\\d+[.])[ \\t]+)))/gm;\r\n    //wholeList = /(\\n\\n|^\\n?)( {0,3}([*+-]|\\d+\\.)[ \\t]+[\\s\\S]+?)(?=(~0)|(\\n\\n(?!\\t| {2,}| {0,3}([*+-]|\\d+\\.)[ \\t])))/g;\r\n    text = text.replace(wholeList, function (wholeMatch, m1, list, m3) {\r\n\r\n      var listType = (m3.search(/[*+-]/g) > -1) ? 'ul' : 'ol';\r\n      return parseConsecutiveLists(list, listType);\r\n    });\r\n  }\r\n\r\n  // attacklab: strip sentinel\r\n  text = text.replace(/~0/, '');\r\n\r\n  text = globals.converter._dispatch('lists.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\n/**\r\n * Remove one level of line-leading tabs or spaces\r\n */\r\nshowdown.subParser('outdent', function (text) {\r\n  'use strict';\r\n\r\n  // attacklab: hack around Konqueror 3.5.4 bug:\r\n  // \"----------bug\".replace(/^-/g,\"\") == \"bug\"\r\n  text = text.replace(/^(\\t|[ ]{1,4})/gm, '~0'); // attacklab: g_tab_width\r\n\r\n  // attacklab: clean up hack\r\n  text = text.replace(/~0/g, '');\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n *\r\n */\r\nshowdown.subParser('paragraphs', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('paragraphs.before', text, options, globals);\r\n  // Strip leading and trailing lines:\r\n  text = text.replace(/^\\n+/g, '');\r\n  text = text.replace(/\\n+$/g, '');\r\n\r\n  var grafs = text.split(/\\n{2,}/g),\r\n      grafsOut = [],\r\n      end = grafs.length; // Wrap <p> tags\r\n\r\n  for (var i = 0; i < end; i++) {\r\n    var str = grafs[i];\r\n    // if this is an HTML marker, copy it\r\n    if (str.search(/~(K|G)(\\d+)\\1/g) >= 0) {\r\n      grafsOut.push(str);\r\n    } else {\r\n      str = showdown.subParser('spanGamut')(str, options, globals);\r\n      str = str.replace(/^([ \\t]*)/g, '<p>');\r\n      str += '</p>';\r\n      grafsOut.push(str);\r\n    }\r\n  }\r\n\r\n  /** Unhashify HTML blocks */\r\n  end = grafsOut.length;\r\n  for (i = 0; i < end; i++) {\r\n    var blockText = '',\r\n        grafsOutIt = grafsOut[i],\r\n        codeFlag = false;\r\n    // if this is a marker for an html block...\r\n    while (grafsOutIt.search(/~(K|G)(\\d+)\\1/) >= 0) {\r\n      var delim = RegExp.$1,\r\n          num   = RegExp.$2;\r\n\r\n      if (delim === 'K') {\r\n        blockText = globals.gHtmlBlocks[num];\r\n      } else {\r\n        // we need to check if ghBlock is a false positive\r\n        if (codeFlag) {\r\n          // use encoded version of all text\r\n          blockText = showdown.subParser('encodeCode')(globals.ghCodeBlocks[num].text);\r\n        } else {\r\n          blockText = globals.ghCodeBlocks[num].codeblock;\r\n        }\r\n      }\r\n      blockText = blockText.replace(/\\$/g, '$$$$'); // Escape any dollar signs\r\n\r\n      grafsOutIt = grafsOutIt.replace(/(\\n\\n)?~(K|G)\\d+\\2(\\n\\n)?/, blockText);\r\n      // Check if grafsOutIt is a pre->code\r\n      if (/^<pre\\b[^>]*>\\s*<code\\b[^>]*>/.test(grafsOutIt)) {\r\n        codeFlag = true;\r\n      }\r\n    }\r\n    grafsOut[i] = grafsOutIt;\r\n  }\r\n  text = grafsOut.join('\\n\\n');\r\n  // Strip leading and trailing lines:\r\n  text = text.replace(/^\\n+/g, '');\r\n  text = text.replace(/\\n+$/g, '');\r\n  return globals.converter._dispatch('paragraphs.after', text, options, globals);\r\n});\r\n\r\n/**\r\n * Run extension\r\n */\r\nshowdown.subParser('runExtension', function (ext, text, options, globals) {\r\n  'use strict';\r\n\r\n  if (ext.filter) {\r\n    text = ext.filter(text, globals.converter, options);\r\n\r\n  } else if (ext.regex) {\r\n    // TODO remove this when old extension loading mechanism is deprecated\r\n    var re = ext.regex;\r\n    if (!re instanceof RegExp) {\r\n      re = new RegExp(re, 'g');\r\n    }\r\n    text = text.replace(re, ext.replace);\r\n  }\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n * These are all the transformations that occur *within* block-level\r\n * tags like paragraphs, headers, and list items.\r\n */\r\nshowdown.subParser('spanGamut', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  text = globals.converter._dispatch('spanGamut.before', text, options, globals);\r\n  text = showdown.subParser('codeSpans')(text, options, globals);\r\n  text = showdown.subParser('escapeSpecialCharsWithinTagAttributes')(text, options, globals);\r\n  text = showdown.subParser('encodeBackslashEscapes')(text, options, globals);\r\n\r\n  // Process anchor and image tags. Images must come first,\r\n  // because ![foo][f] looks like an anchor.\r\n  text = showdown.subParser('images')(text, options, globals);\r\n  text = showdown.subParser('anchors')(text, options, globals);\r\n\r\n  // Make links out of things like `<http://example.com/>`\r\n  // Must come after _DoAnchors(), because you can use < and >\r\n  // delimiters in inline links like [this](<url>).\r\n  text = showdown.subParser('autoLinks')(text, options, globals);\r\n  text = showdown.subParser('encodeAmpsAndAngles')(text, options, globals);\r\n  text = showdown.subParser('italicsAndBold')(text, options, globals);\r\n  text = showdown.subParser('strikethrough')(text, options, globals);\r\n\r\n  // Do hard breaks:\r\n  text = text.replace(/  +\\n/g, ' <br />\\n');\r\n\r\n  text = globals.converter._dispatch('spanGamut.after', text, options, globals);\r\n  return text;\r\n});\r\n\r\nshowdown.subParser('strikethrough', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  if (options.strikethrough) {\r\n    text = globals.converter._dispatch('strikethrough.before', text, options, globals);\r\n    text = text.replace(/(?:~T){2}([\\s\\S]+?)(?:~T){2}/g, '<del>$1</del>');\r\n    text = globals.converter._dispatch('strikethrough.after', text, options, globals);\r\n  }\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n * Strip any lines consisting only of spaces and tabs.\r\n * This makes subsequent regexs easier to write, because we can\r\n * match consecutive blank lines with /\\n+/ instead of something\r\n * contorted like /[ \\t]*\\n+/\r\n */\r\nshowdown.subParser('stripBlankLines', function (text) {\r\n  'use strict';\r\n  return text.replace(/^[ \\t]+$/mg, '');\r\n});\r\n\r\n/**\r\n * Strips link definitions from text, stores the URLs and titles in\r\n * hash references.\r\n * Link defs are in the form: ^[id]: url \"optional title\"\r\n *\r\n * ^[ ]{0,3}\\[(.+)\\]: // id = $1  attacklab: g_tab_width - 1\r\n * [ \\t]*\r\n * \\n?                  // maybe *one* newline\r\n * [ \\t]*\r\n * <?(\\S+?)>?          // url = $2\r\n * [ \\t]*\r\n * \\n?                // maybe one newline\r\n * [ \\t]*\r\n * (?:\r\n * (\\n*)              // any lines skipped = $3 attacklab: lookbehind removed\r\n * [\"(]\r\n * (.+?)              // title = $4\r\n * [\")]\r\n * [ \\t]*\r\n * )?                 // title is optional\r\n * (?:\\n+|$)\r\n * /gm,\r\n * function(){...});\r\n *\r\n */\r\nshowdown.subParser('stripLinkDefinitions', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  var regex = /^ {0,3}\\[(.+)]:[ \\t]*\\n?[ \\t]*<?(\\S+?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*\\n?[ \\t]*(?:(\\n*)[\"|'(](.+?)[\"|')][ \\t]*)?(?:\\n+|(?=~0))/gm;\r\n\r\n  // attacklab: sentinel workarounds for lack of \\A and \\Z, safari\\khtml bug\r\n  text += '~0';\r\n\r\n  text = text.replace(regex, function (wholeMatch, linkId, url, width, height, blankLines, title) {\r\n    linkId = linkId.toLowerCase();\r\n    globals.gUrls[linkId] = showdown.subParser('encodeAmpsAndAngles')(url);  // Link IDs are case-insensitive\r\n\r\n    if (blankLines) {\r\n      // Oops, found blank lines, so it's not a title.\r\n      // Put back the parenthetical statement we stole.\r\n      return blankLines + title;\r\n\r\n    } else {\r\n      if (title) {\r\n        globals.gTitles[linkId] = title.replace(/\"|'/g, '&quot;');\r\n      }\r\n      if (options.parseImgDimensions && width && height) {\r\n        globals.gDimensions[linkId] = {\r\n          width:  width,\r\n          height: height\r\n        };\r\n      }\r\n    }\r\n    // Completely remove the definition from the text\r\n    return '';\r\n  });\r\n\r\n  // attacklab: strip sentinel\r\n  text = text.replace(/~0/, '');\r\n\r\n  return text;\r\n});\r\n\r\nshowdown.subParser('tables', function (text, options, globals) {\r\n  'use strict';\r\n\r\n  if (!options.tables) {\r\n    return text;\r\n  }\r\n\r\n  var tableRgx = /^[ \\t]{0,3}\\|?.+\\|.+\\n[ \\t]{0,3}\\|?[ \\t]*:?[ \\t]*(?:-|=){2,}[ \\t]*:?[ \\t]*\\|[ \\t]*:?[ \\t]*(?:-|=){2,}[\\s\\S]+?(?:\\n\\n|~0)/gm;\r\n\r\n  function parseStyles(sLine) {\r\n    if (/^:[ \\t]*--*$/.test(sLine)) {\r\n      return ' style=\"text-align:left;\"';\r\n    } else if (/^--*[ \\t]*:[ \\t]*$/.test(sLine)) {\r\n      return ' style=\"text-align:right;\"';\r\n    } else if (/^:[ \\t]*--*[ \\t]*:$/.test(sLine)) {\r\n      return ' style=\"text-align:center;\"';\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  function parseHeaders(header, style) {\r\n    var id = '';\r\n    header = header.trim();\r\n    if (options.tableHeaderId) {\r\n      id = ' id=\"' + header.replace(/ /g, '_').toLowerCase() + '\"';\r\n    }\r\n    header = showdown.subParser('spanGamut')(header, options, globals);\r\n\r\n    return '<th' + id + style + '>' + header + '</th>\\n';\r\n  }\r\n\r\n  function parseCells(cell, style) {\r\n    var subText = showdown.subParser('spanGamut')(cell, options, globals);\r\n    return '<td' + style + '>' + subText + '</td>\\n';\r\n  }\r\n\r\n  function buildTable(headers, cells) {\r\n    var tb = '<table>\\n<thead>\\n<tr>\\n',\r\n        tblLgn = headers.length;\r\n\r\n    for (var i = 0; i < tblLgn; ++i) {\r\n      tb += headers[i];\r\n    }\r\n    tb += '</tr>\\n</thead>\\n<tbody>\\n';\r\n\r\n    for (i = 0; i < cells.length; ++i) {\r\n      tb += '<tr>\\n';\r\n      for (var ii = 0; ii < tblLgn; ++ii) {\r\n        tb += cells[i][ii];\r\n      }\r\n      tb += '</tr>\\n';\r\n    }\r\n    tb += '</tbody>\\n</table>\\n';\r\n    return tb;\r\n  }\r\n\r\n  text = globals.converter._dispatch('tables.before', text, options, globals);\r\n\r\n  text = text.replace(tableRgx, function (rawTable) {\r\n\r\n    var i, tableLines = rawTable.split('\\n');\r\n\r\n    // strip wrong first and last column if wrapped tables are used\r\n    for (i = 0; i < tableLines.length; ++i) {\r\n      if (/^[ \\t]{0,3}\\|/.test(tableLines[i])) {\r\n        tableLines[i] = tableLines[i].replace(/^[ \\t]{0,3}\\|/, '');\r\n      }\r\n      if (/\\|[ \\t]*$/.test(tableLines[i])) {\r\n        tableLines[i] = tableLines[i].replace(/\\|[ \\t]*$/, '');\r\n      }\r\n    }\r\n\r\n    var rawHeaders = tableLines[0].split('|').map(function (s) { return s.trim();}),\r\n        rawStyles = tableLines[1].split('|').map(function (s) { return s.trim();}),\r\n        rawCells = [],\r\n        headers = [],\r\n        styles = [],\r\n        cells = [];\r\n\r\n    tableLines.shift();\r\n    tableLines.shift();\r\n\r\n    for (i = 0; i < tableLines.length; ++i) {\r\n      if (tableLines[i].trim() === '') {\r\n        continue;\r\n      }\r\n      rawCells.push(\r\n        tableLines[i]\r\n          .split('|')\r\n          .map(function (s) {\r\n            return s.trim();\r\n          })\r\n      );\r\n    }\r\n\r\n    if (rawHeaders.length < rawStyles.length) {\r\n      return rawTable;\r\n    }\r\n\r\n    for (i = 0; i < rawStyles.length; ++i) {\r\n      styles.push(parseStyles(rawStyles[i]));\r\n    }\r\n\r\n    for (i = 0; i < rawHeaders.length; ++i) {\r\n      if (showdown.helper.isUndefined(styles[i])) {\r\n        styles[i] = '';\r\n      }\r\n      headers.push(parseHeaders(rawHeaders[i], styles[i]));\r\n    }\r\n\r\n    for (i = 0; i < rawCells.length; ++i) {\r\n      var row = [];\r\n      for (var ii = 0; ii < headers.length; ++ii) {\r\n        if (showdown.helper.isUndefined(rawCells[i][ii])) {\r\n\r\n        }\r\n        row.push(parseCells(rawCells[i][ii], styles[ii]));\r\n      }\r\n      cells.push(row);\r\n    }\r\n\r\n    return buildTable(headers, cells);\r\n  });\r\n\r\n  text = globals.converter._dispatch('tables.after', text, options, globals);\r\n\r\n  return text;\r\n});\r\n\r\n/**\r\n * Swap back in all the special characters we've hidden.\r\n */\r\nshowdown.subParser('unescapeSpecialChars', function (text) {\r\n  'use strict';\r\n\r\n  text = text.replace(/~E(\\d+)E/g, function (wholeMatch, m1) {\r\n    var charCodeToReplace = parseInt(m1);\r\n    return String.fromCharCode(charCodeToReplace);\r\n  });\r\n  return text;\r\n});\r\nmodule.exports = showdown;\r\n","// HTML 支持的数学符号\r\nfunction strNumDiscode(str){\r\n    str = str.replace(/&forall;/g, '∀');\r\n    str = str.replace(/&part;/g, '∂');\r\n    str = str.replace(/&exists;/g, '∃');\r\n    str = str.replace(/&empty;/g, '∅');\r\n    str = str.replace(/&nabla;/g, '∇');\r\n    str = str.replace(/&isin;/g, '∈');\r\n    str = str.replace(/&notin;/g, '∉');\r\n    str = str.replace(/&ni;/g, '∋');\r\n    str = str.replace(/&prod;/g, '∏');\r\n    str = str.replace(/&sum;/g, '∑');\r\n    str = str.replace(/&minus;/g, '−');\r\n    str = str.replace(/&lowast;/g, '∗');\r\n    str = str.replace(/&radic;/g, '√');\r\n    str = str.replace(/&prop;/g, '∝');\r\n    str = str.replace(/&infin;/g, '∞');\r\n    str = str.replace(/&ang;/g, '∠');\r\n    str = str.replace(/&and;/g, '∧');\r\n    str = str.replace(/&or;/g, '∨');\r\n    str = str.replace(/&cap;/g, '∩');\r\n    str = str.replace(/&cap;/g, '∪');\r\n    str = str.replace(/&int;/g, '∫');\r\n    str = str.replace(/&there4;/g, '∴');\r\n    str = str.replace(/&sim;/g, '∼');\r\n    str = str.replace(/&cong;/g, '≅');\r\n    str = str.replace(/&asymp;/g, '≈');\r\n    str = str.replace(/&ne;/g, '≠');\r\n    str = str.replace(/&le;/g, '≤');\r\n    str = str.replace(/&ge;/g, '≥');\r\n    str = str.replace(/&sub;/g, '⊂');\r\n    str = str.replace(/&sup;/g, '⊃');\r\n    str = str.replace(/&nsub;/g, '⊄');\r\n    str = str.replace(/&sube;/g, '⊆');\r\n    str = str.replace(/&supe;/g, '⊇');\r\n    str = str.replace(/&oplus;/g, '⊕');\r\n    str = str.replace(/&otimes;/g, '⊗');\r\n    str = str.replace(/&perp;/g, '⊥');\r\n    str = str.replace(/&sdot;/g, '⋅');\r\n    return str;\r\n}\r\n\r\n//HTML 支持的希腊字母\r\nfunction strGreeceDiscode(str){\r\n    str = str.replace(/&Alpha;/g, 'Α');\r\n    str = str.replace(/&Beta;/g, 'Β');\r\n    str = str.replace(/&Gamma;/g, 'Γ');\r\n    str = str.replace(/&Delta;/g, 'Δ');\r\n    str = str.replace(/&Epsilon;/g, 'Ε');\r\n    str = str.replace(/&Zeta;/g, 'Ζ');\r\n    str = str.replace(/&Eta;/g, 'Η');\r\n    str = str.replace(/&Theta;/g, 'Θ');\r\n    str = str.replace(/&Iota;/g, 'Ι');\r\n    str = str.replace(/&Kappa;/g, 'Κ');\r\n    str = str.replace(/&Lambda;/g, 'Λ');\r\n    str = str.replace(/&Mu;/g, 'Μ');\r\n    str = str.replace(/&Nu;/g, 'Ν');\r\n    str = str.replace(/&Xi;/g, 'Ν');\r\n    str = str.replace(/&Omicron;/g, 'Ο');\r\n    str = str.replace(/&Pi;/g, 'Π');\r\n    str = str.replace(/&Rho;/g, 'Ρ');\r\n    str = str.replace(/&Sigma;/g, 'Σ');\r\n    str = str.replace(/&Tau;/g, 'Τ');\r\n    str = str.replace(/&Upsilon;/g, 'Υ');\r\n    str = str.replace(/&Phi;/g, 'Φ');\r\n    str = str.replace(/&Chi;/g, 'Χ');\r\n    str = str.replace(/&Psi;/g, 'Ψ');\r\n    str = str.replace(/&Omega;/g, 'Ω');\r\n\r\n    str = str.replace(/&alpha;/g, 'α');\r\n    str = str.replace(/&beta;/g, 'β');\r\n    str = str.replace(/&gamma;/g, 'γ');\r\n    str = str.replace(/&delta;/g, 'δ');\r\n    str = str.replace(/&epsilon;/g, 'ε');\r\n    str = str.replace(/&zeta;/g, 'ζ');\r\n    str = str.replace(/&eta;/g, 'η');\r\n    str = str.replace(/&theta;/g, 'θ');\r\n    str = str.replace(/&iota;/g, 'ι');\r\n    str = str.replace(/&kappa;/g, 'κ');\r\n    str = str.replace(/&lambda;/g, 'λ');\r\n    str = str.replace(/&mu;/g, 'μ');\r\n    str = str.replace(/&nu;/g, 'ν');\r\n    str = str.replace(/&xi;/g, 'ξ');\r\n    str = str.replace(/&omicron;/g, 'ο');\r\n    str = str.replace(/&pi;/g, 'π');\r\n    str = str.replace(/&rho;/g, 'ρ');\r\n    str = str.replace(/&sigmaf;/g, 'ς');\r\n    str = str.replace(/&sigma;/g, 'σ');\r\n    str = str.replace(/&tau;/g, 'τ');\r\n    str = str.replace(/&upsilon;/g, 'υ');\r\n    str = str.replace(/&phi;/g, 'φ');\r\n    str = str.replace(/&chi;/g, 'χ');\r\n    str = str.replace(/&psi;/g, 'ψ');\r\n    str = str.replace(/&omega;/g, 'ω');\r\n    str = str.replace(/&thetasym;/g, 'ϑ');\r\n    str = str.replace(/&upsih;/g, 'ϒ');\r\n    str = str.replace(/&piv;/g, 'ϖ');\r\n    str = str.replace(/&middot;/g, '·');\r\n    return str;\r\n}\r\n\r\n// \r\n\r\nfunction strcharacterDiscode(str){\r\n    // 加入常用解析\r\n    str = str.replace(/&nbsp;/g, ' ');\r\n    str = str.replace(/&quot;/g, \"'\");\r\n    str = str.replace(/&amp;/g, '&');\r\n    // str = str.replace(/&lt;/g, '‹');\r\n    // str = str.replace(/&gt;/g, '›');\r\n\r\n    str = str.replace(/&lt;/g, '<');\r\n    str = str.replace(/&gt;/g, '>');\r\n    str = str.replace(/&#8226;/g, '•');\r\n\r\n    return str;\r\n}\r\n\r\n// HTML 支持的其他实体\r\nfunction strOtherDiscode(str){\r\n    str = str.replace(/&OElig;/g, 'Œ');\r\n    str = str.replace(/&oelig;/g, 'œ');\r\n    str = str.replace(/&Scaron;/g, 'Š');\r\n    str = str.replace(/&scaron;/g, 'š');\r\n    str = str.replace(/&Yuml;/g, 'Ÿ');\r\n    str = str.replace(/&fnof;/g, 'ƒ');\r\n    str = str.replace(/&circ;/g, 'ˆ');\r\n    str = str.replace(/&tilde;/g, '˜');\r\n    str = str.replace(/&ensp;/g, '');\r\n    str = str.replace(/&emsp;/g, '');\r\n    str = str.replace(/&thinsp;/g, '');\r\n    str = str.replace(/&zwnj;/g, '');\r\n    str = str.replace(/&zwj;/g, '');\r\n    str = str.replace(/&lrm;/g, '');\r\n    str = str.replace(/&rlm;/g, '');\r\n    str = str.replace(/&ndash;/g, '–');\r\n    str = str.replace(/&mdash;/g, '—');\r\n    str = str.replace(/&lsquo;/g, '‘');\r\n    str = str.replace(/&rsquo;/g, '’');\r\n    str = str.replace(/&sbquo;/g, '‚');\r\n    str = str.replace(/&ldquo;/g, '“');\r\n    str = str.replace(/&rdquo;/g, '”');\r\n    str = str.replace(/&bdquo;/g, '„');\r\n    str = str.replace(/&dagger;/g, '†');\r\n    str = str.replace(/&Dagger;/g, '‡');\r\n    str = str.replace(/&bull;/g, '•');\r\n    str = str.replace(/&hellip;/g, '…');\r\n    str = str.replace(/&permil;/g, '‰');\r\n    str = str.replace(/&prime;/g, '′');\r\n    str = str.replace(/&Prime;/g, '″');\r\n    str = str.replace(/&lsaquo;/g, '‹');\r\n    str = str.replace(/&rsaquo;/g, '›');\r\n    str = str.replace(/&oline;/g, '‾');\r\n    str = str.replace(/&euro;/g, '€');\r\n    str = str.replace(/&trade;/g, '™');\r\n\r\n    str = str.replace(/&larr;/g, '←');\r\n    str = str.replace(/&uarr;/g, '↑');\r\n    str = str.replace(/&rarr;/g, '→');\r\n    str = str.replace(/&darr;/g, '↓');\r\n    str = str.replace(/&harr;/g, '↔');\r\n    str = str.replace(/&crarr;/g, '↵');\r\n    str = str.replace(/&lceil;/g, '⌈');\r\n    str = str.replace(/&rceil;/g, '⌉');\r\n\r\n    str = str.replace(/&lfloor;/g, '⌊');\r\n    str = str.replace(/&rfloor;/g, '⌋');\r\n    str = str.replace(/&loz;/g, '◊');\r\n    str = str.replace(/&spades;/g, '♠');\r\n    str = str.replace(/&clubs;/g, '♣');\r\n    str = str.replace(/&hearts;/g, '♥');\r\n\r\n    str = str.replace(/&diams;/g, '♦');\r\n    str = str.replace(/&#39;/g, '\\'');\r\n    return str;\r\n}\r\n\r\nfunction strMoreDiscode(str){\r\n    str = str.replace(/\\r\\n/g,\"\");  \r\n    str = str.replace(/\\n/g,\"\");\r\n   //2018-07-12 4146微信图片在小程序前台详情页面不展示会把url里面a=wxcode给替换成a=wxxxcode-style导致的所以先把下面的这样代码注释掉\r\n    // str = str.replace(/code/g,\"wxxxcode-style\");\r\n    return str;\r\n}\r\n\r\nfunction strDiscode(str){\r\n    str = strNumDiscode(str);\r\n    str = strGreeceDiscode(str);\r\n    str = strcharacterDiscode(str);\r\n    str = strOtherDiscode(str);\r\n    str = strMoreDiscode(str);\r\n    return str;\r\n}\r\nfunction urlToHttpUrl(url,rep){\r\n    \r\n    var patt1 = new RegExp(\"^//\");\r\n    var result = patt1.test(url);\r\n    if(result){\r\n        url = rep+\":\"+url;\r\n    }\r\n    return  url;\r\n}\r\n\r\nmodule.exports = {\r\n    strDiscode:strDiscode,\r\n    urlToHttpUrl:urlToHttpUrl\r\n}","/**\r\n * author: Di (微信小程序开发工程师)\r\n * organization: WeAppDev(微信小程序开发论坛)(http://weappdev.com)\r\n *               垂直微信小程序开发交流社区\r\n * \r\n * github地址: https://github.com/icindy/wxParse\r\n * \r\n * for: 微信小程序富文本解析\r\n * detail : http://weappdev.com/t/wxparse-alpha0-1-html-markdown/184\r\n */\r\n\r\n/**\r\n * utils函数引入\r\n **/\r\nimport showdown from './showdown.js';\r\nimport HtmlToJson from './html2json.js';\r\n/**\r\n * 配置及公有属性\r\n **/\r\nvar realWindowWidth = 0;\r\nvar realWindowHeight = 0;\r\nwx.getSystemInfo({\r\n  success: function (res) {\r\n    realWindowWidth = res.windowWidth\r\n    realWindowHeight = res.windowHeight\r\n  }\r\n})\r\n/**\r\n * 主函数入口区\r\n **/\r\nfunction wxParse(bindName = 'wxParseData', type = 'html', data = '<div class=\"color:red;\">数据不能为空</div>', target, imagePadding) {\r\n  if (!data || data == '') {\r\n    return;\r\n  }\r\n  var that = target;\r\n  var transData = {};//存放转化后的数据\r\n  if (type == 'html') {\r\n    transData = HtmlToJson.html2json(data, bindName);\r\n   \r\n  } else if (type == 'md' || type == 'markdown') {\r\n    var converter = new showdown.Converter();\r\n    var html = converter.makeHtml(data);\r\n    transData = HtmlToJson.html2json(html, bindName);\r\n   \r\n  }\r\n  transData.view = {};\r\n  transData.view.imagePadding = 0;\r\n  if (typeof (imagePadding) != 'undefined') {\r\n    transData.view.imagePadding = imagePadding\r\n  }\r\n  var bindData = {};\r\n  bindData[bindName] = transData;\r\n  that.setData(bindData)\r\n  that.wxParseImgLoad = wxParseImgLoad;\r\n  that.wxParseImgTap = wxParseImgTap;\r\n}\r\n// 图片点击事件\r\nfunction wxParseImgTap(e) {\r\n  var that = this;\r\n  var nowImgUrl = e.target.dataset.src;\r\n  var tagFrom = e.target.dataset.from;\r\n  if (typeof (tagFrom) != 'undefined' && tagFrom.length > 0) {\r\n    wx.previewImage({\r\n      current: nowImgUrl, // 当前显示图片的http链接\r\n      urls: that.data[tagFrom].imageUrls // 需要预览的图片http链接列表\r\n    })\r\n  }\r\n}\r\n\r\n/**\r\n * 图片视觉宽高计算函数区 \r\n **/\r\nfunction wxParseImgLoad(e) {\r\n  var that = this;\r\n  var tagFrom = e.target.dataset.from;\r\n  var idx = e.target.dataset.idx;\r\n  if (typeof (tagFrom) != 'undefined' && tagFrom.length > 0) {\r\n    calMoreImageInfo(e, idx, that, tagFrom)\r\n  }\r\n}\r\n// 假循环获取计算图片视觉最佳宽高\r\nfunction calMoreImageInfo(e, idx, that, bindName) {\r\n  var temData = that.data[bindName];\r\n  if (!temData || temData.images.length == 0) {\r\n    return;\r\n  }\r\n  var temImages = temData.images;\r\n  //因为无法获取view宽度 需要自定义padding进行计算，稍后处理\r\n  var recal = wxAutoImageCal(e.detail.width, e.detail.height,that,bindName); \r\n  // temImages[idx].width = recal.imageWidth;\r\n  // temImages[idx].height = recal.imageheight; \r\n  // temData.images = temImages;\r\n  // var bindData = {};\r\n  // bindData[bindName] = temData;\r\n  // that.setData(bindData);\r\n  var index = temImages[idx].index\r\n  var key = `${bindName}`\r\n  for (var i of index.split('.')) key += `.nodes[${i}]`\r\n  var keyW = key + '.width'\r\n  var keyH = key + '.height'\r\n  that.setData({\r\n    [keyW]: recal.imageWidth,\r\n    [keyH]: recal.imageheight,\r\n  })\r\n\r\n\r\n\r\n}\r\n\r\n// 计算视觉优先的图片宽高\r\nfunction wxAutoImageCal(originalWidth, originalHeight,that,bindName) {\r\n  //获取图片的原始长宽\r\n  var windowWidth = 0, windowHeight = 0;\r\n  var autoWidth = 0, autoHeight = 0;\r\n  var results = {};\r\n  var padding = that.data[bindName].view.imagePadding;\r\n  windowWidth = realWindowWidth - 2 * padding;\r\n  windowHeight = realWindowHeight;\r\n  //判断按照那种方式进行缩放\r\n\r\n  if (originalWidth > windowWidth) {//在图片width大于手机屏幕width时候\r\n    autoWidth = windowWidth;\r\n   \r\n    autoHeight = (autoWidth * originalHeight) / originalWidth;\r\n    \r\n    results.imageWidth = autoWidth;\r\n    results.imageheight = autoHeight;\r\n  } else {//否则展示原来的数据\r\n    results.imageWidth = originalWidth;\r\n    results.imageheight = originalHeight;\r\n  }\r\n\r\n \r\n\r\n  if (realWindowWidth <= 0 || realWindowHeight <= 0) {\r\n    wx.getSystemInfo({\r\n      success: function (res) {\r\n        realWindowWidth = res.windowWidth;\r\n        realWindowHeight = res.windowHeight;\r\n        if (originalWidth > realWindowWidth) {\r\n          results.imageWidth = realWindowWidth - 2 * padding;\r\n        } else {\r\n          results.imageWidth = originalWidth;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  return results;\r\n}\r\n\r\nfunction wxParseTemArray(temArrayName, bindNameReg, total, that) {\r\n  var array = [];\r\n  var temData = that.data;\r\n  var obj = null;\r\n  for (var i = 0; i < total; i++) {\r\n    var simArr = temData[bindNameReg + i].nodes;\r\n    array.push(simArr);\r\n  }\r\n\r\n  temArrayName = temArrayName || 'wxParseTemArray';\r\n  obj = JSON.parse('{\"' + temArrayName + '\":\"\"}');\r\n  obj[temArrayName] = array;\r\n  that.setData(obj);\r\n}\r\n\r\n/**\r\n * 配置emojis\r\n * \r\n */\r\n\r\nfunction emojisInit(reg = '', baseSrc = \"/wxParse/emojis/\", emojis) {\r\n  HtmlToJson.emojisInit(reg, baseSrc, emojis);\r\n}\r\n\r\nmodule.exports = {\r\n  wxParse: wxParse,\r\n  wxParseTemArray: wxParseTemArray,\r\n  emojisInit: emojisInit\r\n}","/**\r\n *\r\n * app.js\r\n *\r\n * @create 2017-1-1\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-05\r\n *\r\n */\r\nvar core = require('utils/core.js');\r\n\r\nApp({\r\n    onShow: function () {\r\n      this.onLaunch();\r\n\r\n    },\r\n    onLaunch: function () {\r\n      var $this = this; \r\n      wx.getSystemInfo({\r\n        success: function (res) {\r\n          var model = res.model;\r\n          var iponeX = model.indexOf(\"iPhone X\");\r\n          if (iponeX == '0'){\r\n            $this.setCache(\"isIpx\", res.model);\r\n          }else{\r\n            $this.setCache(\"isIpx\", '');\r\n          }\r\n        }\r\n      }) \r\n      let that = this;\r\n      wx.getSystemInfo({//  获取页面的有关信息\r\n        success: function (res) {\r\n          wx.setStorageSync('systemInfo', res)\r\n          var ww = res.windowWidth;\r\n          var hh = res.windowHeight;\r\n          that.globalData.ww = ww;\r\n          that.globalData.hh = hh;\r\n        }\r\n      }); \r\n    },\r\n    /**\r\n     * 小程序检查是否授权方法，写入当前页面路径和参数缓存\r\n     * @date 2018-10-22\r\n     * @author Vencenty\r\n     */\r\n    checkAuth: function () {\r\n    \r\n      const url = '/pages/message/auth/index'\r\n      const currentPages = getCurrentPages()\r\n      const currentPage = currentPages[currentPages.length - 1]\r\n      const routeData = {\r\n        'params': currentPage.options || null,\r\n        'url': currentPage.route\r\n      }\r\n\r\n      // 处理扫码进来的商品信息\r\n      if(routeData.params.hasOwnProperty('scene')) {\r\n        const params = {}\r\n        const scene = decodeURIComponent(routeData.params.scene)\r\n        const paramsArr = scene.split('&').shift().split('=')\r\n        params.id = paramsArr[1]\r\n        routeData.params = params\r\n      }\r\n      \r\n      this.setCache('routeData', routeData)\r\n\r\n\r\n      const userinfo = this.getCache('userinfo')\r\n      wx.getSetting({\r\n        success: function (settings) {\r\n          if (!settings.authSetting['scope.userInfo']) {\r\n            wx.redirectTo({url: url})\r\n          } else {\r\n            if (!userinfo) {\r\n              wx.redirectTo({ url: url })\r\n            } else {\r\n              core.get('member', {}, function (ret) {\r\n                if (ret.error) {\r\n                  wx.redirectTo({ url: url })\r\n                }\r\n              })\r\n            }\r\n          }\r\n        }\r\n      })\r\n    },\r\n    requirejs: function (jsname) {\r\n        return require('utils/' + jsname + '.js');\r\n    },\r\n    getConfig: function () {\r\n        if (this.globalData.api !== null) {\r\n            return {\r\n                api: this.globalData.api,\r\n                approot: this.globalData.approot,\r\n                appid: this.globalData.appid\r\n            };\r\n        }\r\n        var ext = wx.getExtConfigSync();\r\n        \r\n        this.globalData.api = ext.config.api;\r\n        this.globalData.approot = ext.config.approot;\r\n        this.globalData.appid = ext.config.appid;\r\n        return ext.config;\r\n    },\r\n \r\n    getCache: function (key, defaultValue) {\r\n        var time = (+new Date()) / 1000, data = '';\r\n        time = parseInt(time);\r\n        try {\r\n            data = wx.getStorageSync(key + this.globalData.appid);\r\n            if (data.expire > time || data.expire == 0) {\r\n                data = data.value; \r\n            } else {\r\n                data = '';\r\n                this.removeCache(key);\r\n            }\r\n        } catch (e) {\r\n            data = typeof (defaultValue) === 'undefined' ? '' : defaultValue;\r\n        }\r\n        data = data || '';\r\n        return data;\r\n    },\r\n\r\n    setCache: function (key, value, expire) {\r\n        var time = (+new Date()) / 1000, rt = true;\r\n        var data = {\r\n            expire: expire ? time + parseInt(expire) : 0,\r\n            value: value\r\n        };\r\n        try {\r\n            wx.setStorageSync(key + this.globalData.appid, data);\r\n        } catch (e) {\r\n            rt = false;\r\n        }\r\n        return rt;\r\n    },\r\n    \r\n    removeCache: function (key) {\r\n        var rt = true;\r\n        try {\r\n            wx.removeStorageSync(key + this.globalData.appid);\r\n        } catch (e) {\r\n            rt = false;\r\n        }  \r\n        return rt; \r\n    },\r\n    close: function () {\r\n      this.globalDataClose.flag = true;\r\n      wx.reLaunch({\r\n        url: '/pages/index/index',\r\n      })\r\n    },\r\n    getSet: function () {\r\n      var $this = this;\r\n      var cacheset = $this.getCache(\"cacheset\");\r\n      if (cacheset == '') {\r\n        // var sysset = $this.getCache(\"sysset\");\r\n        // if (sysset == '') {\r\n        setTimeout(function () {\r\n          var cacheset = $this.getCache(\"cacheset\"); \r\n          core.get('cacheset', { version: cacheset.version }, function (result) {  \r\n            if (result.update) {\r\n              $this.setCache(\"cacheset\", result.data);\r\n            } \r\n            // $this.setCache(\"sysset\", result.sysset, 7200);\r\n          });\r\n        }, 10);\r\n      }\r\n    },\r\n    url: function (options) {\r\n        options = options || {};\r\n        var arg = {}, mid = '', merchid = '', user = this.getCache('usermid');\r\n        mid = options.mid || '';\r\n        merchid = options.merchid || '';\r\n\r\n        for (let i in user) {\r\n          if (typeof user[i] != 'undefined') {\r\n            arg[i] = user[i]\r\n          }\r\n        }\r\n\r\n        if (user != '') {\r\n           \r\n            if (user.mid == '' || typeof user.mid == 'undefined') {\r\n                arg.mid = mid;\r\n            }\r\n            if (user.merchid == '' || typeof user.merchid == 'undefined') {\r\n                arg.merchid = merchid;\r\n            }\r\n        } else {\r\n            arg.mid = mid;\r\n            arg.merchid = merchid;\r\n        }\r\n        this.setCache('usermid', arg);\r\n    },\r\n\t/*再次发起授权*/\r\n    impower: function(limit, msg, route) {\r\n    \twx.getSetting({\r\n    \t\tsuccess: function(res) {\r\n    \t\t\tvar limits = res.authSetting['scope.' + limit];\r\n    \t\t\tif(!limits) {\r\n    \t\t\t\twx.showModal({\r\n    \t\t\t\t\ttitle: '用户未授权',\r\n    \t\t\t\t\tcontent: '您点击了拒绝授权，暂时无法' + msg + '，点击去设置可重新获取授权喔~',\r\n    \t\t\t\t\tconfirmText: '去设置',\r\n    \t\t\t\t\tsuccess: function(res) {\r\n    \t\t\t\t\t\tif(res.confirm) {\r\n    \t\t\t\t\t\t\twx.openSetting({\r\n    \t\t\t\t\t\t\t\tsuccess: function(res) {}\r\n    \t\t\t\t\t\t\t})\r\n    \t\t\t\t\t\t}else{\r\n    \t\t\t\t\t\t\tif(route == 'route'){\r\n    \t\t\t\t\t\t\t\twx.switchTab({\r\n\t\t\t\t\t\t\t\t\t    url: '/pages/index/index'\r\n\t\t\t\t\t\t\t\t\t})\r\n    \t\t\t\t\t\t\t}else if(route == 'details'){\r\n    \t\t\t\t\t\t\t\t//停留在当前页面\r\n    \t\t\t\t\t\t\t}else{\r\n    \t\t\t\t\t\t\t\twx.navigateTo({\r\n\t\t\t\t\t\t\t\t\t    url: '/pages/index/index'\r\n\t\t\t\t\t\t\t\t\t})\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t})\r\n    \t\t\t}\r\n    \t\t}\r\n    \t})\r\n    },\r\n    globalDataClose: {\r\n      flag: false,\r\n    },\r\n    //晚秋\r\n    // globalData: {\r\n    //   appid:'wx3d3b2fd41970f6db',\r\n    //   api: \"https://api.clubmall.cn/app/ewei_shopv2_api.php?i=16\",\r\n    //   approot: \"https://api.clubmall.cn/addons/ewei_shopv2/\",\r\n    //   userInfo: null\r\n    // }\r\n\r\n    //姜倩\r\n    // globalData: {\r\n    //   appid: 'wx5f691ef96a19887c',\r\n    //   api: \"https://jqnyrv.ifkvip.com/app/ewei_shopv2_api.php?i=4\",\r\n    //   approot: \"https://jqnyrv.ifkvip.com/addons/ewei_shopv2/\",\r\n    //   userInfo: null\r\n    // }\r\n\r\n    // demo站点\r\n    // globalData: {\r\n    //     appid: 'wx5d7c9a63ffdf10f8',\r\n    //     api: \"https://demo.foxteam.cc/app/ewei_shopv2_api.php?i=11\",\r\n    //     approot: \"https://demo.foxteam.cc/addons/ewei_shopv2/\",\r\n    //     userInfo: null\r\n    // }\r\n\r\n    // elinkkc\r\n    // globalData: {\r\n    //   appid:'wx3d3b2fd41970f6db',\r\n    //   api: \"https://yctcs.100cms.com/app/ewei_shopv2_api.php?i=2\",\r\n    //   approot: \"https://yctcs.100cms.com/addons/ewei_shopv2/\",\r\n    //     userInfo: null\r\n    // }\r\n\r\n    // 售后\r\n    //  globalData: {\r\n    //   appid: \"wx3502a0f358ee367f\",\r\n    //   api: \"https://shn2mgo.ifkvip.com/app/ewei_shopv2_api.php?i=2\",\r\n    //   approot: \"https://shn2mgo.ifkvip.com/addons/ewei_shopv2/\",\r\n    //    userInfo: null\r\n    //  }\r\n\r\n\r\n    // 测试站\r\n    //  globalData: {\r\n    //    appid: \"wx3d3b2fd41970f6db\",\r\n    //    api: \"https://yctcs.100cms.com/app/ewei_shopv2_api.php?i=2\",\r\n    //    approot: \"https://yctcs.100cms.com/addons/ewei_shopv2/\",\r\n    //    userInfo: null\r\n    //  }\r\n    \r\n    // 姜倩\r\n    //  globalData: {\r\n    //    appid: \"wx21e66d345b76074d\",\r\n    //    api: \"https://azrrsc.100cms.com/app/ewei_shopv2_api.php?i=51\",\r\n    //    approot: \"https://azrrsc.100cms.comaddons/ewei_shopv2/\",\r\n    //    userInfo: null\r\n    //  }\r\n\r\n    //api\r\n    //  globalData: {\r\n    //    appid: \"wx3d3b2fd41970f6db\",\r\n    //    api: \"https://api.clubmall.cn/app/ewei_shopv2_api.php?i=16\",\r\n    //    approot: \"https://api.clubmall.cn/addons/ewei_shopv2/\",\r\n    //    userInfo: null\r\n    //  }\r\n\r\n    globalData: {\r\n      appid: null,\r\n      api: null,\r\n      approot: null,\r\n      userInfo: null\r\n    }\r\n})","// pages/commission/return/index.js\nPage({\n\n  /**\n   * 页面的初始数据\n   */\n  data: {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n})","// pages/transfer/commission/return/index.js\nPage({\n\n  /**\n   * 页面的初始数据\n   */\n  data: {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad: function (options) {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  onReady: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  onShow: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  onHide: function () {\n\n  },\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  onUnload: function () {\n\n  },\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  onPullDownRefresh: function () {\n\n  },\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  onReachBottom: function () {\n\n  },\n\n  /**\n   * 用户点击右上角分享\n   */\n  onShareAppMessage: function () {\n\n  }\n})","/**\r\n *\r\n * index.js\r\n *\r\n * @create 2017-01-03\r\n * @author 咖啡\r\n *\r\n * \r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar diypage = app.requirejs('biz/diypage');\r\nvar diyform = app.requirejs('biz/diyform');\r\nvar goodspicker = app.requirejs('biz/goodspicker');\r\nvar foxui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\nPage({\r\n    onPullDownRefresh: function (){\r\n     \r\n      var $this = this\r\n      diypage.get(this, 'home', function (res) {\r\n        $this.getDiypage(res)\r\n        if(res.error==0){\r\n          wx.stopPullDownRefresh()\r\n        } \r\n      })\r\n\r\n    },\r\n    data: {\r\n    \timgUrls: [\r\n\t      'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1509963648306&di=1194f5980cccf9e5ad558dfb18e895ab&imgtype=0&src=http%3A%2F%2Fd.hiphotos.baidu.com%2Fzhidao%2Fpic%2Fitem%2F9c16fdfaaf51f3de87bbdad39ceef01f3a29797f.jpg',\r\n\t      'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1509963737453&di=b1472a710a2c9ba30808fd6823b16feb&imgtype=0&src=http%3A%2F%2Fwww.qqzhi.com%2Fwenwen%2Fuploads%2Fpic.wenwen.soso.com%2Fp%2F20160830%2F20160830220016-586751007.jpg',\r\n\t      'https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3004162400,3684436606&fm=11&gp=0.jpg'\r\n\t    ],\r\n\t    indicatorDotss: true,\r\n\t    autoplays: true,\r\n\t    intervals: 2000,\r\n\t    durations: 500,\r\n\t    circulars: true,\r\n\t    adveradmin: true,\r\n      current: 0, //商品组翻页 \r\n\t    clock: '',\r\n\t    /*广告结束*/\r\n        diypage:'true',\r\n        route: 'home',\r\n        icons: app.requirejs('icons'),\r\n        shop: {},\r\n        indicatorDots: true,\r\n        autoplay: true,\r\n        interval: 5000,\r\n        duration: 500,\r\n        circular: true,\r\n        /* 店铺推荐列表 */\r\n        storeRecommand: [],\r\n        total: 1,\r\n        page: 1,\r\n        loaded:false,\r\n        loading:true,\r\n        /*滚动*/\r\n        indicatorDotsHot: false,\r\n        autoplayHot: true,\r\n        intervalHot: 5000,\r\n        durationHOt: 1000,\r\n        circularHot: true,\r\n        hotimg: \"/static/images/hotdot.jpg\",\r\n        notification: \"/static/images/notification.png\",\r\n        saleout1: \"/static/images/saleout-1.png\",\r\n        saleout2: \"/static/images/saleout-2.png\",\r\n        saleout3: \"/static/images/saleout-3.png\",\r\n        play: \"/static/images/video_play.png\",\r\n        mute: \"/static/images/icon/mute.png\",\r\n        voice: \"/static/images/icon/voice.png\",\r\n        // 购物车\r\n        specs: [],\r\n        options: [],\r\n        diyform: {},\r\n        specsTitle: '',\r\n        total: 1,\r\n        active: '',\r\n        slider: '',\r\n        tempname: '',\r\n        buyType: '',\r\n        areas: [],\r\n        closeBtn: false,\r\n        soundpic: false,\r\n        sound:true,\r\n\r\n        modelShow:false,\r\n        limits: true,\r\n        result:{},\r\n        showcoupon: false,\r\n        showcoupontips: false,\r\n        topmenu:{},\r\n        topmenuDataType:'',\r\n        tabbarData:{},\r\n        tabbarDataType:'',\r\n        istopmenu:false,\r\n        //秒杀组\r\n        seckillinfo:{},\r\n        timer:0,\r\n        lasttime: 0,\r\n        hour: '-',\r\n        min: '-',\r\n        sec: '-',\r\n    },\r\n\r\n    /* 获取首页信息 */\r\n    getShop: function () {\r\n        var $this = this;\r\n        core.get('shop/get_shopindex', {}, function (result) {\r\n            parser.wxParse('wxParseData','html', result.copyright,$this,'5');\r\n            $this.setData({shop: result});\r\n        });\r\n    },\r\n    /*加载推荐商品*/\r\n    onReachBottom:function(){\r\n        if(this.data.loaded || this.data.storeRecommand.length==this.data.total){\r\n            return;\r\n        }\r\n        this.getRecommand();\r\n    },\r\n    //店铺推荐\r\n    getRecommand: function (){\r\n        var $this = this;\r\n        if($this.data.diypage=='true'){\r\n          return\r\n        }\r\n        core.get('shop/get_recommand', {page:$this.data.page}, function (result) {\r\n            var data = {loading: false, total: result.total};\r\n            $this.setData({\r\n                loading: false,\r\n                total: result.total,\r\n                show:true\r\n            });\r\n            if(!result.list){\r\n                result.list = [];\r\n            }\r\n            if(result.list.length>0){\r\n                $this.setData({\r\n                    storeRecommand: $this.data.storeRecommand.concat(result.list),\r\n                    page: result.page+1\r\n                });\r\n                if(result.list.length<result.pagesize) {\r\n                    data.loaded = true\r\n                }\r\n            }\r\n\r\n        });\r\n    },\r\n    onLoad: function (options) {\r\n      wx.hideTabBar({})      \r\n      \r\n      options = options || {};\r\n    \tvar $this = this;\r\n      $this.setData({ imgUrl: app.globalData.approot});\r\n\r\n      core.get('black', {}, function (res) {\r\n        if (res.isblack) {\r\n          wx.showModal({\r\n            title: '无法访问',\r\n            content: '您在商城的黑名单中，无权访问！',\r\n            success: function (res) {\r\n              if (res.confirm) {\r\n                $this.close()\r\n              }\r\n              if (res.cancel) {\r\n                $this.close()\r\n              }\r\n            }\r\n          })\r\n        }\r\n      });\r\n\r\n        // 处理扫码scene\r\n        var scene = decodeURIComponent(options.scene);\r\n        if (!options.id && scene) {\r\n          var sceneObj = core.str2Obj(scene);\r\n          options.id = sceneObj.id;\r\n          if(sceneObj.mid){\r\n            options.mid = sceneObj.mid;\r\n             app.setCache('usermid', sceneObj)\r\n          }\r\n        }\r\n        setTimeout(function () {\r\n          $this.setData({ areas: app.getCache(\"cacheset\").areas });\r\n        }, 3000)\r\n        app.url(options);\r\n        \r\n        wx.getSetting({\r\n          success(res) {\r\n            if (!res.authSetting['scope.userInfo']) {\r\n              core.get('wxAppSetting', {}, (response) => {\r\n                console.log(response)\r\n                const sysSet = response.sysset\r\n                if (sysSet.force_auth == 1) {\r\n                  wx.redirectTo({ url: '/pages/auth/index' })\r\n                  return\r\n                }\r\n                $this.diypageGet()\r\n              })\r\n            }else{\r\n              $this.diypageGet()\r\n            }\r\n          },\r\n        })\r\n\r\n       \r\n        $this.setData({\r\n          cover: true,\r\n          showvideo:false\r\n        });\r\n        wx.getSystemInfo({\r\n          success: function (res) {\r\n            var swiperheight = res.windowWidth/ 1.7\r\n            $this.setData({\r\n              swiperheight:swiperheight\r\n            })\r\n          }\r\n        });\r\n        //获取未支付订单信息\r\n        //$this.get_nopayorder();\r\n    },\r\n    diypageGet() {\r\n      var $this = this;\r\n      diypage.get(this, 'home', function (res) {\r\n        wx.showTabBar({})\r\n        $this.getDiypage(res)\r\n        /*启动广告*/\r\n        if ($this.data.startadv == undefined || $this.data.startadv == '') {\r\n          return\r\n        }\r\n        if ($this.data.startadv.status == 0 || $this.data.startadv == '') {\r\n          wx.getSetting({\r\n            success: function (res) {\r\n              var limits = res.authSetting['scope.userInfo'];\r\n              if (limits) {\r\n                $this.get_nopayorder();\r\n                return\r\n              }\r\n            }\r\n          })\r\n        }\r\n\r\n        var params = $this.data.startadv.params;\r\n        if (params.style == 'default') {\r\n          var timer = params.autoclose;\r\n          function count_down(that) {\r\n            $this.setData({ clock: timer });\r\n            if (timer <= 0) {\r\n              $this.setData({ adveradmin: false });\r\n              return;\r\n            }\r\n            setTimeout(function () {\r\n              timer -= 1;\r\n              count_down(that);\r\n            }, 1000)\r\n          }\r\n          count_down($this);\r\n        }\r\n\r\n        if (params.showtype == 1) {\r\n          var showtime = params.showtime;\r\n          var countdown = showtime * 1000 * 60;\r\n          var startadvtime = app.getCache('startadvtime');\r\n          var nowtime = + new Date();\r\n          var adveradmin = true;\r\n          $this.setData({ adveradmin: true })\r\n          if (startadvtime) {\r\n            if ((nowtime - startadvtime) < countdown) {\r\n              adveradmin = false;\r\n            }\r\n          }\r\n          $this.setData({ adveradmin: adveradmin });\r\n          if (adveradmin) {\r\n            app.setCache('startadvtime', nowtime);\r\n          }\r\n        }\r\n        var advstatus = $this.data.startadv.status;\r\n\r\n      });\r\n    },\r\n    onHide: function(){\r\n      this.setData({ adveradmin: false, unpaid: false});\r\n    },\r\n    \r\n    onShow: function () {\r\n    \tvar $this = this;\r\n      \tvar res = wx.getSystemInfoSync()\r\n        var sysset = app.getCache('sysset');\r\n        $this.getShop();\r\n        $this.getRecommand();\r\n        $this.get_hasnewcoupon();\r\n        $this.get_cpinfos();\r\n        wx.getSetting({\r\n            success: function(res) {\r\n              var limits = res.authSetting['scope.userInfo'];\r\n              $this.setData({ limits: limits })\t\r\n            }\r\n          })\r\n\t\t\r\n        var pagetitle = sysset.shopname || '商城首页';\r\n        if ($this.data.pages){\r\n          if($this.data.pages.title!=''){\r\n            pagetitle = $this.data.diytitle;\r\n          }\r\n        }\r\n        wx.setNavigationBarTitle({\r\n          title: pagetitle\r\n        });\r\n        if($this.data.pages){\r\n            wx.setNavigationBarColor({\r\n            frontColor: $this.data.pages.titlebarcolor,\r\n            backgroundColor: $this.data.pages.titlebarbg\r\n          });\r\n        } \r\n        $this.setData({\r\n          screenWidth: res.windowWidth\r\n        });\r\n\r\n    },\r\n    goodsicon:function(e){\r\n      this.setData({\r\n        iconheight:e.detail.height,\r\n        iconwidth: e.detail.width\r\n      })\r\n    },\r\n    getDiypage:function(res){\r\n      var $this = this;\r\n      $.each(res.diypage.items, function (id, item) {\r\n        if (item.id == 'topmenu') {\r\n          $this.setData({ topmenu: item });\r\n          if (item.data[0] == undefined) {\r\n            var linkurl = '';\r\n          } else {\r\n            var linkurl = item.data[0].linkurl;\r\n            core.get('diypage/getInfo', { dataurl: linkurl }, function (ret) {\r\n              item.data[0].data = ret.goods.list;\r\n            });\r\n          }\r\n          \r\n        }\r\n\r\n      if (item.id == 'seckillgroup') {\r\n          var data = {};\r\n          data.status=item.data.status;\r\n          data.endtime=item.data.endtime;\r\n          data.starttime=item.data.starttime;\r\n          $this.initSeckill(data);\r\n      }\r\n      });\r\n    },\r\n    onShareAppMessage: function () {\r\n        var url = null;\r\n        var title = null;\r\n        if (this.data.diytitle) {\r\n          url = '/pages/index/index'\r\n          title = this.data.diytitle\r\n        }\r\n      return core.onShareAppMessage(url, title);\r\n    },\r\n    imagesHeight: function(e){\r\n        var width = e.detail.width,height = e.detail.height,type=e.target.dataset.type,$this=this;\r\n        wx.getSystemInfo({\r\n            success: function(res) {\r\n                $this.data.result[type] = res.windowWidth/width*height;\r\n                if(!$this.data[type] || ($this.data[type] && result[type]<$this.data[type])){\r\n                  $this.setData({result: $this.data.result});\r\n                }\r\n            }\r\n        });\r\n    },\r\n    bindInput: function (e) {\r\n      this.setData({\r\n        inputValue: e.detail.value\r\n      })\r\n    },\r\n    t1: function(e){\r\n      diypage.fixedsearch(this,e);\r\n    },\r\n    startplay: function (e) {\r\n      var cover = e.target.dataset.cover;\r\n      this.setData({\r\n        cover: cover,\r\n        showvideo:true\r\n      });\r\n      this.videoContext = wx.createVideoContext('Video');\r\n      this.videoContext.play()\r\n    }, \r\n    /* 隐藏未付订单 */\r\n    unpaidcolse: function (e) {\r\n      var unpaid = '';\r\n      if (e.target.dataset.type == 'open') {\r\n        unpaid = true\r\n      } else {\r\n        unpaid = false\r\n      }\r\n      this.setData({\r\n        unpaid: unpaid\r\n      })\r\n    },\r\n    /* 关闭未付订单 */\r\n    unpaidcolse2: function (e) {\r\n      this.setData({\r\n        unpaidhide: true\r\n      })\r\n    },\r\n    //\r\n    get_nopayorder: function () {\r\n      var $this = this;\r\n      core.get('shop/get_nopayorder', {}, function (result) {\r\n        if (result.hasinfo ==1)\r\n        {\r\n          $this.setData({\r\n            nopaygoods: result.goods,\r\n            nopaygoodstotal: result.goodstotal,\r\n            nopayorder: result.order,\r\n            unpaid: true\r\n          });\r\n        }        \r\n      });\r\n    },\r\n\r\n    //是否有新的优惠券\r\n    get_hasnewcoupon: function () {\r\n      var $this = this;\r\n      core.get('shop/get_hasnewcoupon', {}, function (result) {\r\n        if (result.hasnewcoupon == 1) {\r\n          $this.setData({ showcoupontips: true });\r\n        }\r\n      });\r\n    },\r\n    //是否有新人优惠券\r\n    get_cpinfos: function () {\r\n        var $this = this;\r\n        core.get('shop/get_cpinfos', {}, function (result) {\r\n            if (result.hascpinfos == 1) {\r\n              $this.setData({ showcoupon: true,cpinfos: result.cpinfos,});\r\n            }\r\n        });\r\n    },\r\n\t/*关闭广告*/\r\n    adverclose: function(){\r\n   \t\tthis.setData({adveradmin: false})\r\n   \t\tthis.get_nopayorder();\r\n    },\r\n    /*广告点击跳转链接*/\r\n    indexChangebtn: function(e){\r\n    \tvar urls = e.currentTarget.dataset.type;\r\n    \twx.navigateTo({\r\n        url: urls,\r\n        fail: function () {\r\n          wx.switchTab({\r\n            url: urls\r\n          })\r\n        }\r\n      })\r\n    }, \r\n    /* 隐藏未付订单 */\r\n    unpaidcolse: function (e) {\r\n      var unpaid = '';\r\n      if (e.target.dataset.type == 'open') {\r\n        unpaid = true\r\n      } else {\r\n        unpaid = false\r\n      }\r\n      this.setData({\r\n        unpaid: unpaid\r\n      })\r\n    },\r\n\r\n    /* 关闭未付订单 */\r\n    unpaidcolse2: function (e) {\r\n      this.setData({\r\n        unpaidhide: true\r\n      })\r\n    },\r\n    // 购买picker\r\n    selectPicker: function (e) {\r\n      app.checkAuth();\r\n      var $this = this;\r\n      wx.getSetting({\r\n    \t\tsuccess: function(res) {\r\n    \t\t\tvar limits = res.authSetting['scope.userInfo'];\r\n    \t\t\tif(limits){\r\n    \t\t\t\tvar goodslist = 'goodslist';\r\n\t\t\t\t      goodspicker.selectpicker(e, $this, goodslist)\r\n\t\t\t\t      $this.setData({\r\n\t\t\t\t        cover: '',\r\n\t\t\t\t        showvideo: false\r\n\t\t\t\t      });\r\n    \t\t\t}else{\t\t\t\r\n\t\t\t\t    // $this.setData({modelShow: true})\r\n\t\t\t\t\treturn\r\n    \t\t\t}\r\n    \t\t}\r\n    \t})  \r\n    },\r\n    // 选赠品\r\n  chooseGift(e) {\r\n    goodspicker.chooseGift(e,this)\r\n  },\r\n    // 选规格\r\n    specsTap: function (event) {\r\n      var $this = this\r\n      goodspicker.specsTap(event, $this)\r\n    },\r\n    //关闭pickerpicker\r\n    emptyActive: function () {\r\n      this.setData({\r\n        active: '', slider: 'out', tempname: '', specsTitle: ''\r\n      });\r\n    },\r\n    // 立即购买\r\n    buyNow: function (event) {\r\n      var $this = this\r\n      goodspicker.buyNow(event, $this)\r\n    },\r\n    //加入购物车\r\n    getCart: function (event) {\r\n      var $this = this\r\n      goodspicker.getCart(event, $this)\r\n    },\r\n    select: function () {\r\n      var $this = this\r\n      goodspicker.select($this)\r\n    },\r\n    //数量输入绑定事件\r\n    inputNumber: function (e) {\r\n      var $this = this\r\n      goodspicker.inputNumber(e, $this)\r\n    },\r\n    number: function (e) {\r\n      var $this = this\r\n      goodspicker.number(e, $this)\r\n    },\r\n    onChange: function (e) {\r\n      return diyform.onChange(this, e)\r\n    },\r\n    DiyFormHandler: function (e) {\r\n      return diyform.DiyFormHandler(this, e)\r\n    },\r\n    selectArea: function (e) {\r\n      return diyform.selectArea(this, e)\r\n    },\r\n    bindChange: function (e) {\r\n      return diyform.bindChange(this, e)\r\n    },\r\n    onCancel: function (e) {\r\n      return diyform.onCancel(this, e)\r\n    },\r\n    onConfirm: function (e) {\r\n      return diyform.onConfirm(this, e)\r\n    },\r\n    getIndex: function (str, areas) {\r\n      return diyform.getIndex(str, areas)\r\n    },\r\n    changevoice: function () {\r\n      if (this.data.sound) {\r\n        this.setData({\r\n          sound: false,\r\n          soundpic: true\r\n        })\r\n      } else{\r\n        this.setData({\r\n          sound: true,\r\n          soundpic: false\r\n        })\r\n      }\r\n    },\r\n    phone:function(){\r\n      var phoneNumber = this.data.phonenumber+''\r\n      wx.makePhoneCall({\r\n        phoneNumber: phoneNumber\r\n      })\r\n    },\r\n    /*用户授权-取消*/                                                                                                                                                                                                                                                                                                                     \r\n    cancelclick:  function(){\r\n   \t  this.setData({modelShow: false})\r\n    },\r\n    /*用户授权-去设置*/\r\n    confirmclick: function(){\r\n      this.setData({modelShow: false})\r\n      wx.openSetting({\r\n    \tsuccess: function(res) {}\r\n      })\r\n    },\r\n    navigate:function(e){\r\n        var url = e.currentTarget.dataset.url\r\n        var phone = e.currentTarget.dataset.phone\r\n        var appid = e.currentTarget.dataset.appid\r\n        var appurl = e.currentTarget.dataset.appurl\r\n        if(url){\r\n          wx.navigateTo({\r\n            url: url,\r\n            fail: function () {\r\n              wx.switchTab({\r\n                url: url,\r\n              })\r\n            }\r\n          })\r\n        }\r\n        if (phone) {\r\n          wx.makePhoneCall({\r\n            phoneNumber: phone\r\n          })\r\n        }\r\n        if(appid){\r\n          wx.navigateToMiniProgram({\r\n            appId: appid,\r\n            path: appurl\r\n          })\r\n        }\r\n    },\r\n    // 新人优惠券弹层关闭\r\n    closecoupon: function(){\r\n      this.setData({ showcoupon: false})\r\n    },\r\n\r\n    // 顶部新优惠券提示条关闭\r\n    closecoupontips: function(){\r\n      this.setData({ showcoupontips: false })\r\n    },\r\n    // 顶部菜单切换\r\n    tabtopmenu: function (e) {\r\n      \r\n      var $this = this,\r\n        diypages = $this.data.diypages,\r\n        list = diypages.items,\r\n        id = e.currentTarget.dataset.id,\r\n        dataurl = e.currentTarget.dataset.url,\r\n        type = e.currentTarget.dataset.type,\r\n        topmenu = $this.data.topmenu,\r\n        topmenuindex = e.currentTarget.dataset.index;\r\n      $this.setData({ topmenuindex: topmenuindex})\r\n      if (e.currentTarget.id == 'm0' && dataurl == '') {\r\n        core.get('diypage', { type: 'home' }, function (result) {\r\n          var diypage = result.diypage;\r\n          $.each(diypage.items, function (id, item) {\r\n            if (item.id == 'topmenu') {\r\n              item.status = type\r\n            }\r\n          });\r\n          if (result.error == 0) {\r\n            $this.setData({ diypages: result.diypage })\r\n          }\r\n        }); \r\n      }\r\n      if (dataurl == '' || dataurl == undefined){\r\n        return;\r\n      }\r\n      if (dataurl.indexOf('pages') == 1){\r\n        var index = dataurl.lastIndexOf(\"=\");\r\n        var pageid = dataurl.substring(index + 1, dataurl.length);\r\n        core.get('diypage',{id:pageid},function(result){\r\n          if(result.error == 0){\r\n            var arr = [];\r\n            for (var i in result.diypage.items) {\r\n              arr.push(result.diypage.items[i]); //属性\r\n            }\r\n            arr.unshift(topmenu);\r\n            var obj = new Object();\r\n            for (var x in arr) {\r\n              obj[x] = arr[x];\r\n              if (arr[x].id == 'topmenu'){\r\n                arr[x].status = type\r\n              }\r\n            }\r\n            result.diypage.items = obj;\r\n            $this.setData({ diypages: result.diypage, topmenuDataType: '' })\r\n          }  \r\n        });\r\n      }else{\r\n        core.get('diypage/getInfo',{dataurl:dataurl},function(ret){\r\n          var topmenu = $this.data.topmenu;\r\n          core.get('diypage', { type: 'home' }, function (result) {\r\n            var diypage = result.diypage;\r\n            $.each(diypage.items,function(id,item){\r\n              if(item.id == 'topmenu'){\r\n                item.status = type\r\n                for (var i in item.data) {\r\n                  if (i == type) {\r\n                    item.data[i]['data'] = ret.goods.list;\r\n                    if (ret.goods.list.length <= 8) {\r\n                      item.data[i]['showmore'] = true\r\n                    }\r\n                  }\r\n                } \r\n              }\r\n            });\r\n            if (result.error == 0) {\r\n              $this.setData({ diypages: result.diypage, topmenuDataType:ret.type })\r\n            }\r\n          }); \r\n        });  \r\n      }\r\n      $this.setData({diypages: diypages})\r\n    },\r\n    // 选项卡切换\r\n    tabwidget: function (e) {\r\n      var $this = this,\r\n        diypages = $this.data.diypages,\r\n        list = diypages.items,\r\n        id = e.currentTarget.dataset.id,\r\n        dataurl = e.currentTarget.dataset.url,\r\n        type = e.currentTarget.dataset.type;\r\n\r\n      if (dataurl == '' || dataurl == undefined) {\r\n        return;\r\n      }\r\n \r\n      core.get('diypage/getInfo', { dataurl: dataurl }, function (ret) {\r\n        for (var i in diypages.items){\r\n          if(i == id){\r\n            diypages.items[i].data[type].data = ret.goods.list;\r\n            diypages.items[i].data[type].type = ret.type;\r\n            diypages.items[i].type = ret.type;\r\n            diypages.items[i].status = type;\r\n            if (ret.goods.list.length <= 8) {\r\n              diypages.items[i].data[type].showmore = true;\r\n            }\r\n            // $this.data.diypages.items[i].data[type].data = ret.goods.list;\r\n            var obj = \"diypages.items.\"+i+\".data[\"+type+\"].data\";\r\n            $this.setData({ diypages: diypages})\r\n          }\r\n        }   \r\n        // $this.setData({ tabbarData: ret.goods, tabbarDataType:ret.type})\r\n      });\r\n    },\r\n    getstoremore:function(e){\r\n      var $this = this;\r\n      var itemid = e.currentTarget.dataset.id;\r\n      var diypages = $this.data.diypages;\r\n      $.each(diypages.items,function(id,item){\r\n        if (id == itemid){\r\n          if (item.status == undefined || item.status == ''){\r\n            if (item.data[0].linkurl.indexOf('stores') != -1){\r\n              var paramsType = 'stores';\r\n            }else{\r\n              var paramsType = 'goods';\r\n            }\r\n            var dataurl = item.data[0].linkurl;\r\n            var num = item.data[0].data.length;\r\n            core.get('diypage/getInfo', { dataurl: dataurl, num: num, paramsType: paramsType }, function (ret){\r\n                item.data[0].data = ret.goods.list;\r\n              \r\n                if (item.data[0].data.length == ret.goods.count){\r\n                  item.data[0].showmore = true;\r\n                }\r\n                $this.setData({ diypages: diypages })\r\n            });\r\n          }else{\r\n            if (item.data[item.status].linkurl.indexOf('stores') != -1) {\r\n              var paramsType = 'stores';\r\n            } else {\r\n              var paramsType = 'goods';\r\n            }\r\n            var dataurl = item.data[item.status].linkurl;\r\n            var num = item.data[item.status].data.length;\r\n            core.get('diypage/getInfo', { dataurl: dataurl, num: num, paramsType: paramsType  }, function (ret) {\r\n              item.data[item.status].data = ret.goods.list;\r\n              \r\n              if (item.data[item.status].data.length == ret.goods.count) {\r\n                item.data[item.status].showmore = true;\r\n              }\r\n              $this.setData({ diypages: diypages })\r\n            });\r\n          }\r\n        }\r\n      })\r\n      \r\n    },\r\n    close:function(){\r\n      app.globalData.flag = true;\r\n      wx.reLaunch({\r\n        url: '../index/index',\r\n      })},\r\n    //秒杀时间初始化\r\n    initSeckill:function(seckillinfo){\r\n        var $this = this;\r\n        var status = parseInt(seckillinfo.status);\r\n        var starttime = seckillinfo.starttime;\r\n        var endtime = seckillinfo.endtime;\r\n        if (status != -1) {\r\n            var lasttime = 0;\r\n            var timer = 0;\r\n            var approot=app.globalData.approot;\r\n            wx.request({url:approot+'timer.php',\r\n                success: function(x) { \r\n                   \r\n                    var currenttime = x.data;\r\n                    if (status == 0) {\r\n                        lasttime = endtime - currenttime;\r\n                    } else {\r\n                        lasttime = starttime - currenttime;\r\n                    }\r\n                    $this.setData({lasttime: lasttime});\r\n                    clearInterval($this.data.timer);\r\n                    $this.setTimer(seckillinfo);\r\n                    timer = $this.setTimerInterval(seckillinfo);\r\n\r\n                    $this.setData({timer: timer});\r\n                }\r\n            })\r\n        }\r\n\r\n    },\r\n    setTimer: function (seckillinfo) {\r\n        var $this = this;\r\n        var lasttime=0;\r\n        //每十秒请求一次服务器，获取时间\r\n        if (seckillinfo.status != -1) {\r\n            if(parseInt($this.data.lasttime)%10==0){\r\n                var approot=app.globalData.approot;\r\n              wx.request({\r\n                url: approot +'timer.php',\r\n                    success: function(x) {\r\n                       var currenttime = x.data;\r\n                        if (seckillinfo.status == 0) {\r\n                            lasttime = seckillinfo.endtime - currenttime;\r\n                        } else {\r\n                            lasttime = seckillinfo.starttime - currenttime;\r\n                        }\r\n                        $this.setData({lasttime: lasttime});\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        lasttime = parseInt($this.data.lasttime) - 1;\r\n        var times = $this.formatSeconds(lasttime);\r\n        $this.setData({lasttime: lasttime, hour: times.hour, min: times.min, sec: times.sec});\r\n        if (lasttime <= 0) {\r\n            $this.onLoad();\r\n        }\r\n    },\r\n    setTimerInterval: function (seckillinfo) {\r\n        var $this = this;\r\n        return setInterval(function () {\r\n            $this.setTimer(seckillinfo);\r\n        }, 1000);\r\n    },\r\n    formatSeconds: function (value) {\r\n        var theTime = parseInt(value);\r\n        var theTime1 = 0;\r\n        var theTime2 = 0;\r\n        if (theTime > 60) {\r\n            theTime1 = parseInt(theTime / 60);\r\n            theTime = parseInt(theTime % 60);\r\n            if (theTime1 > 60) {\r\n                theTime2 = parseInt(theTime1 / 60);\r\n                theTime1 = parseInt(theTime1 % 60)\r\n            }\r\n        }\r\n        return {\r\n            'hour': theTime2 < 10 ? '0' + theTime2 : theTime2,\r\n            'min': theTime1 < 10 ? '0' + theTime1 : theTime1,\r\n            'sec': theTime < 10 ? '0' + theTime : theTime\r\n        }\r\n    },\r\n    // 店铺装修商品组件\r\n    cutGoods: function(e){\r\n      var $this = this, \r\n          type = e.currentTarget.dataset.type, \r\n          num = e.currentTarget.dataset.num,\r\n          id = e.currentTarget.dataset.id,\r\n          diypages = $this.data.diypages;\r\n      for (var i in diypages.items){\r\n        if(i == id){\r\n          var current = diypages.items[i].current || 0;\r\n          if (type == 'advance') {\r\n            if (current < num - 1) {\r\n              diypages.items[i].current = current + 1 ;\r\n              $this.setData({ diypages: diypages })\r\n            } else {\r\n              diypages.items[i].current = 0;\r\n              $this.setData({ diypages: diypages })\r\n            }\r\n          } else {\r\n            if (current > 0) {\r\n              diypages.items[i].current = current - 1;\r\n              $this.setData({ diypages: diypages })\r\n            } else {\r\n              diypages.items[i].current = num - 1;\r\n              $this.setData({ diypages: diypages })\r\n            }\r\n          }\r\n        }\r\n      }\r\n      \r\n    }\r\n});\r\n","// pages/custom/index.js\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar diypage = app.requirejs('biz/diypage');\r\nvar diyform = app.requirejs('biz/diyform');\r\nvar goodspicker = app.requirejs('biz/goodspicker');\r\nvar foxui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery')\r\nPage({\r\n  data: {\r\n    imgUrls: [\r\n      'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1509963648306&di=1194f5980cccf9e5ad558dfb18e895ab&imgtype=0&src=http%3A%2F%2Fd.hiphotos.baidu.com%2Fzhidao%2Fpic%2Fitem%2F9c16fdfaaf51f3de87bbdad39ceef01f3a29797f.jpg',\r\n      'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1509963737453&di=b1472a710a2c9ba30808fd6823b16feb&imgtype=0&src=http%3A%2F%2Fwww.qqzhi.com%2Fwenwen%2Fuploads%2Fpic.wenwen.soso.com%2Fp%2F20160830%2F20160830220016-586751007.jpg',\r\n      'https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3004162400,3684436606&fm=11&gp=0.jpg'\r\n    ],\r\n    indicatorDotss: true,\r\n    autoplays: true,\r\n    intervals: 2000,\r\n    durations: 500,\r\n    circulars: true,\r\n    adveradmin: true,\r\n    clock: '',\r\n    diypage: 'true',\r\n    route: 'custom',\r\n    icons: app.requirejs('icons'),\r\n\r\n    /*广告结束*/\r\n    shop: {},\r\n    indicatorDots: true,\r\n    autoplay: true,\r\n    interval: 5000,\r\n    duration: 500,\r\n    circular: true,\r\n    /* 店铺推荐列表 */\r\n    storeRecommand: [],\r\n    total: 1,\r\n    page: 1,\r\n    loaded: false,\r\n    loading: true,\r\n    /*滚动*/\r\n    indicatorDotsHot: false,\r\n    autoplayHot: true,\r\n    intervalHot: 5000,\r\n    durationHOt: 1000,\r\n    circularHot: true,\r\n    hotimg: \"/static/images/hotdot.jpg\",\r\n    notification: \"/static/images/notification.png\",\r\n    saleout1: \"/static/images/saleout-1.png\",\r\n    saleout2: \"/static/images/saleout-2.png\",\r\n    saleout3: \"/static/images/saleout-3.png\",\r\n    play: \"/static/images/video_play.png\",\r\n    mute: \"/static/images/icon/mute.png\",\r\n    voice: \"/static/images/icon/voice.png\",\r\n    // 购物车\r\n    specs: [],\r\n    options: [],\r\n    diyform: {},\r\n    specsTitle: '',\r\n    total: 1,\r\n    active: '',\r\n    slider: '',\r\n    tempname: '',\r\n    buyType: '',\r\n    areas: [],\r\n    closeBtn: false,\r\n    soundpic: true,\r\n\r\n    modelShow: false,\r\n    limits: true,\r\n    result: {},\r\n    audios: {},\r\n    audiosObj:{},\r\n    picture:{},\r\n    result:{},\r\n    pageid:0,\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n    var $this = this;\r\n    var res = wx.getSystemInfoSync()\r\n    var pageid = $this.data.pageid;\r\n    core.get('diypage&id=' + pageid, {}, function (result) {\r\n      var data = { loading: false, diypage: result.diypage };\r\n      $this.setData(data);\r\n    });\r\n    $this.setData({\r\n      screenWidth: res.windowWidth\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    options = options || {};\r\n    var $this = this;\r\n    $this.pauseOther();\r\n\r\n    var pageid = options.pageid;\r\n\r\n    if (pageid==undefined){\r\n        var pages = getCurrentPages(); //获取页面栈\r\n        var url_arr = pages[pages.length - 1].route.split(\"/\");//当前页面路径/分割后的数组\r\n        pageid = url_arr[url_arr.length - 1];\r\n    }\r\n\r\n    $this.setData({ pageid: pageid, imgUrl: app.globalData.approot});\r\n    // diypage.get(this, 'home');\r\n    var scene = decodeURIComponent(options.scene);\r\n    if (!options.id && scene) {\r\n      var sceneObj = core.str2Obj(scene);\r\n      options.id = sceneObj.id;\r\n      if (sceneObj.mid) {\r\n        options.mid = sceneObj.mid;\r\n      }\r\n    }\r\n    setTimeout(function () {\r\n      $this.setData({ areas: app.getCache(\"cacheset\").areas });\r\n    }, 3000)\r\n    app.url(options);\r\n    \r\n    diypage.get(this, pageid, function (res) {\r\n      /*启动广告*/\r\n      if ($this.data.startadv == undefined || $this.data.startadv == '') {\r\n        return\r\n      }\r\n      if ($this.data.startadv.status == 0 || $this.data.startadv == '') {\r\n        wx.getSetting({\r\n          success: function (res) {\r\n            var limits = res.authSetting['scope.userInfo'];\r\n            if (limits) {\r\n              //$this.get_nopayorder();\r\n              return\r\n            }\r\n          }\r\n        })\r\n      }\r\n\r\n      var params = $this.data.startadv.params;\r\n      if (params.style == 'default') {\r\n        var timer = params.autoclose;\r\n        function count_down(that) {\r\n          $this.setData({ clock: timer });\r\n          if (timer <= 0) {\r\n            $this.setData({ adveradmin: false });\r\n            return;\r\n          }\r\n          setTimeout(function () {\r\n            timer -= 1;\r\n            count_down(that);\r\n          }, 1000)\r\n        }\r\n        count_down($this);\r\n      }\r\n\r\n      if (params.showtype == 1) {\r\n        var showtime = params.showtime;\r\n        var countdown = showtime * 1000 * 60;\r\n        var startadvtime = app.getCache('startadvtime');\r\n        var nowtime = + new Date();\r\n        var adveradmin = true;\r\n        $this.setData({ adveradmin: true })\r\n        if (startadvtime) {\r\n          if ((nowtime - startadvtime) < countdown) {\r\n            adveradmin = false;\r\n          }\r\n        }\r\n        $this.setData({ adveradmin: adveradmin });\r\n        if (adveradmin) {\r\n          app.setCache('startadvtime', nowtime);\r\n        }\r\n      }\r\n      var advstatus = $this.data.startadv.status;\r\n    });\r\n    $this.setData({\r\n      cover: true,\r\n      showvideo: false\r\n    });\r\n    wx.getSystemInfo({\r\n      success: function (res) {\r\n        var swiperheight = res.windowWidth / 1.7\r\n        $this.setData({\r\n          swiperheight: swiperheight\r\n        })\r\n      }\r\n    });\r\n  },\r\n  /* 获取首页信息 */\r\n  getShop: function () {\r\n    var $this = this;\r\n    core.get('shop/get_shopindex', {}, function (result) {\r\n      parser.wxParse('wxParseData', 'html', result.copyright, $this, '5');\r\n      $this.setData({ shop: result });\r\n    });\r\n  },\r\n\r\n  /*加载推荐商品*/\r\n  onReachBottom: function () {\r\n    if (this.data.loaded || this.data.storeRecommand.length == this.data.total) {\r\n      return;\r\n    }\r\n    this.getRecommand();\r\n  },\r\n  //店铺推荐\r\n  getRecommand: function () {\r\n    var $this = this;\r\n    if ($this.data.diypage == 'true') {\r\n      return\r\n    }\r\n    core.get('shop/get_recommand', { page: $this.data.page }, function (result) {\r\n      var data = { loading: false, total: result.total };\r\n      $this.setData({\r\n        loading: false,\r\n        total: result.total,\r\n        show: true\r\n      });\r\n      if (!result.list) {\r\n        result.list = [];\r\n      }\r\n      if (result.list.length > 0) {\r\n        $this.setData({\r\n          storeRecommand: $this.data.storeRecommand.concat(result.list),\r\n          page: result.page + 1\r\n        });\r\n        if (result.list.length < result.pagesize) {\r\n          data.loaded = true\r\n        }\r\n      }\r\n\r\n    });\r\n  },\r\n  imagesHeight: function (e) {\r\n    var width = e.detail.width, height = e.detail.height, type = e.target.dataset.type, $this = this;\r\n    wx.getSystemInfo({\r\n      success: function (res) {\r\n        $this.data.result[type] = res.windowWidth / width * height;\r\n        if (!$this.data[type] || ($this.data[type] && result[type] < $this.data[type])) {\r\n          $this.setData({ result: $this.data.result });\r\n        }\r\n      }\r\n    });\r\n  },\r\n  bindInput: function (e) {\r\n    this.setData({\r\n      inputValue: e.detail.value\r\n    })\r\n  },\r\n  t1: function (e) {\r\n    diypage.fixedsearch(this, e);\r\n  },\r\n  startplay: function (e) {\r\n    var cover = e.target.dataset.cover;\r\n    this.setData({\r\n      cover: cover,\r\n      showvideo: true\r\n    });\r\n    this.videoContext = wx.createVideoContext('Video');\r\n    this.videoContext.play()\r\n  },\r\n  /* 隐藏未付订单 */\r\n  unpaidcolse: function (e) {\r\n    var unpaid = '';\r\n    if (e.target.dataset.type == 'open') {\r\n      unpaid = true\r\n    } else {\r\n      unpaid = false\r\n    }\r\n    this.setData({\r\n      unpaid: unpaid\r\n    })\r\n  },\r\n  /* 关闭未付订单 */\r\n  unpaidcolse2: function (e) {\r\n    this.setData({\r\n      unpaidhide: true\r\n    })\r\n  },\r\n\r\n  //\r\n  get_nopayorder: function () {\r\n    var $this = this;\r\n    core.get('shop/get_nopayorder', {}, function (result) {\r\n      if (result.hasinfo == 1) {\r\n        $this.setData({\r\n          nopaygoods: result.goods,\r\n          nopaygoodstotal: result.goodstotal,\r\n          nopayorder: result.order,\r\n          unpaid: true\r\n        });\r\n      }\r\n    });\r\n  },\r\n\r\n  //是否有新的优惠券\r\n  get_hasnewcoupon: function () {\r\n    var $this = this;\r\n    core.get('shop/get_hasnewcoupon', {}, function (result) {\r\n      if (result.hasnewcoupon == 1) {\r\n        $this.setData({ showcoupontips: true });\r\n      }\r\n    });\r\n  },\r\n  //是否有新人优惠券\r\n  get_cpinfos: function () {\r\n    var $this = this;\r\n    core.get('shop/get_cpinfos', {}, function (result) {\r\n      if (result.hascpinfos == 1) {\r\n        $this.setData({ showcoupon: true, cpinfos: result.cpinfos, });\r\n\r\n\r\n      }\r\n    });\r\n  },\r\n  /*关闭广告*/\r\n  adverclose: function () {\r\n    this.setData({ adveradmin: false })\r\n    this.get_nopayorder();\r\n  },\r\n  /*广告点击跳转链接*/\r\n  indexChangebtn: function (e) {\r\n    var urls = e.currentTarget.dataset.type;\r\n    wx.navigateTo({\r\n      url: urls\r\n    })\r\n  },\r\n  /* 隐藏未付订单 */\r\n  unpaidcolse: function (e) {\r\n    var unpaid = '';\r\n    if (e.target.dataset.type == 'open') {\r\n      unpaid = true\r\n    } else {\r\n      unpaid = false\r\n    }\r\n    this.setData({\r\n      unpaid: unpaid\r\n    })\r\n  },\r\n\r\n  /* 关闭未付订单 */\r\n  unpaidcolse2: function (e) {\r\n    this.setData({\r\n      unpaidhide: true\r\n    })\r\n  },\r\n  // 购买picker\r\n  selectPicker: function (e) {\r\n    app.checkAuth();\r\n    var $this = this;\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        if (limits) {\r\n          var goodslist = 'goodslist';\r\n          goodspicker.selectpicker(e, $this, goodslist)\r\n          $this.setData({\r\n            cover: '',\r\n            showvideo: false\r\n          });\r\n        } else {\r\n          // $this.setData({ modelShow: true })\r\n          return\r\n        }\r\n      }\r\n    })\r\n  },\r\n  // 选规格\r\n  specsTap: function (event) {\r\n    var $this = this\r\n    goodspicker.specsTap(event, $this)\r\n  },\r\n  //关闭pickerpicker\r\n  emptyActive: function () {\r\n    this.setData({\r\n      active: '', slider: 'out', tempname: '', specsTitle: ''\r\n    });\r\n  },\r\n  // 立即购买\r\n  buyNow: function (event) {\r\n    var $this = this\r\n    goodspicker.buyNow(event, $this)\r\n  },\r\n  //加入购物车\r\n  getCart: function (event) {\r\n    var $this = this\r\n    goodspicker.getCart(event, $this)\r\n  },\r\n  select: function () {\r\n    var $this = this\r\n    goodspicker.select($this)\r\n  },\r\n  //数量输入绑定事件\r\n  inputNumber: function (e) {\r\n    var $this = this\r\n    goodspicker.inputNumber(e, $this)\r\n  },\r\n  number: function (e) {\r\n    var $this = this\r\n    goodspicker.number(e, $this)\r\n  },\r\n  onChange: function (e) {\r\n    return diyform.onChange(this, e)\r\n  },\r\n  DiyFormHandler: function (e) {\r\n    return diyform.DiyFormHandler(this, e)\r\n  },\r\n  selectArea: function (e) {\r\n    return diyform.selectArea(this, e)\r\n  },\r\n  bindChange: function (e) {\r\n    return diyform.bindChange(this, e)\r\n  },\r\n  onCancel: function (e) {\r\n    return diyform.onCancel(this, e)\r\n  },\r\n  onConfirm: function (e) {\r\n    return diyform.onConfirm(this, e)\r\n  },\r\n  getIndex: function (str, areas) {\r\n    return diyform.getIndex(str, areas)\r\n  },\r\n  changevoice: function () {\r\n    if (this.data.sound) {\r\n      this.setData({\r\n        sound: false,\r\n        soundpic: true\r\n      })\r\n    } else {\r\n      this.setData({\r\n        sound: true,\r\n        soundpic: false\r\n      })\r\n    }\r\n  },\r\n  phone: function () {\r\n    var phoneNumber = this.data.phonenumber + ''\r\n    wx.makePhoneCall({\r\n      phoneNumber: phoneNumber\r\n    })\r\n  },\r\n  /*用户授权-取消*/\r\n  cancelclick: function () {\r\n    this.setData({ modelShow: false })\r\n  },\r\n  /*用户授权-去设置*/\r\n  confirmclick: function () {\r\n    this.setData({ modelShow: false })\r\n    wx.openSetting({\r\n      success: function (res) { }\r\n    })\r\n  },\r\n  navigate: function (e) {\r\n    var url = e.currentTarget.dataset.url\r\n    var phone = e.currentTarget.dataset.phone\r\n    var appid = e.currentTarget.dataset.appid\r\n    var appurl = e.currentTarget.dataset.appurl\r\n    if (url) {\r\n      wx.navigateTo({\r\n        url: url,\r\n        fail: function(e){\r\n          wx.switchTab({\r\n            url: url\r\n          })\r\n        }\r\n      })\r\n    }\r\n    if (phone) {\r\n      wx.makePhoneCall({\r\n        phoneNumber: phone\r\n      })\r\n    }\r\n    if (appid) {\r\n      wx.navigateToMiniProgram({\r\n        appId: appid,\r\n        path: appurl\r\n      })\r\n    }\r\n  },\r\n  // 新人优惠券弹层关闭\r\n  closecoupon: function () {\r\n    this.setData({ showcoupon: false })\r\n  },\r\n\r\n  // 顶部新优惠券提示条关闭\r\n  closecoupontips: function () {\r\n    this.setData({ showcoupontips: false })\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function (e) {\r\n    // innerAudioContext.play();\r\n\r\n  },\r\n\r\n  pauseOther: function (item_id){\r\n    var $this = this;\r\n    $.each(this.data.audiosObj, function(id, obj){\r\n      if(id == item_id){\r\n        return;\r\n      }\r\n      obj.pause();\r\n      var audios = $this.data.audios; \r\n      if (audios[id]){\r\n        audios[id].status = false;\r\n        $this.setData({ audios: audios });\r\n      }\r\n    });\r\n},\r\n\r\n  play: function (e) {\r\n    var item_id = e.target.dataset.id;\r\n    var innerAudioContext = this.data.audiosObj[item_id] || false;\r\n    if (!innerAudioContext) {\r\n      innerAudioContext = wx.createInnerAudioContext('audio_' + item_id);\r\n      var audiosObj = this.data.audiosObj;\r\n      audiosObj[item_id] = innerAudioContext;\r\n      this.setData({\r\n        audiosObj: audiosObj\r\n      })\r\n    }\r\n    var $this = this;\r\n    innerAudioContext.onPlay(() => {\r\n      var Time = setInterval(function () {\r\n        var width = innerAudioContext.currentTime / innerAudioContext.duration * 100 + '%';\r\n        var minute = Math.floor(Math.ceil(innerAudioContext.currentTime) / 60);  //分\r\n        var second = (Math.ceil(innerAudioContext.currentTime) % 60 / 100).toFixed(2).slice(-2); //秒\r\n        var seconds = Math.ceil(innerAudioContext.currentTime)\r\n        var audioicon = ''\r\n        if (minute < 10) {\r\n          minute = \"0\" + minute;\r\n        }\r\n        var time = minute + \":\" + second;\r\n        var audios = $this.data.audios;\r\n        audios[item_id].audiowidth = width;\r\n        audios[item_id].Time = Time;\r\n        audios[item_id].audiotime = time;\r\n        audios[item_id].seconds = seconds;\r\n        $this.setData({ audios: audios })\r\n      }, 1000)\r\n    })\r\n\r\n    var src = e.currentTarget.dataset.audio;\r\n    var time = e.currentTarget.dataset.time;\r\n    var pausestop = e.currentTarget.dataset.pausestop;\r\n    var loopplay = e.currentTarget.dataset.loopplay;\r\n    if (loopplay == 0) {\r\n      innerAudioContext.onEnded((res) => {\r\n        audios[item_id].status = false;\r\n        $this.setData({ audios: audios })\r\n      })\r\n    }\r\n    var audios = $this.data.audios;\r\n    if (!audios[item_id]) {\r\n      audios[item_id] = {};\r\n    }\r\n    if (innerAudioContext.paused && time == 0) {\r\n      innerAudioContext.src = src;\r\n      innerAudioContext.play();\r\n      if (loopplay == 1) {\r\n        innerAudioContext.loop = true;\r\n      }\r\n      audios[item_id].status = true;\r\n      $this.pauseOther(item_id)\r\n\r\n    } else if (innerAudioContext.paused && time > 0) {\r\n      innerAudioContext.play();\r\n      if (pausestop == 0) {\r\n        innerAudioContext.seek(time);\r\n      } else {\r\n        innerAudioContext.seek(0);\r\n      }\r\n      audios[item_id].status = true;\r\n      $this.pauseOther(item_id)\r\n    }\r\n    else {\r\n      innerAudioContext.pause();\r\n      audios[item_id].status = false;\r\n    }\r\n    $this.setData({ audios: audios })\r\n  },\r\n\r\n  imagesHeight: function (e) {\r\n    var width = e.detail.width, height = e.detail.height, type = e.target.dataset.type, $this = this;\r\n    wx.getSystemInfo({\r\n      success: function (res) {\r\n        $this.data.result[type] = res.windowWidth / width * height;\r\n        if (!$this.data[type] || ($this.data[type] && result[type] < $this.data[type])) {\r\n          $this.setData({ result: $this.data.result });\r\n        }\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n    this.pauseOther();\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n    this.pauseOther();\r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n      return {\r\n        title: this.data.diypages.page.title,\r\n      }\r\n  },\r\n\r\n  // 顶部菜单切换\r\n  tabtopmenu: function (e) {\r\n    var $this = this,\r\n      diypages = $this.data.diypages,\r\n      list = diypages.items,\r\n      id = e.currentTarget.dataset.id,\r\n      dataurl = e.currentTarget.dataset.url,\r\n      type = e.currentTarget.dataset.type,\r\n      topmenu = $this.data.topmenu,\r\n      topmenuindex = e.currentTarget.dataset.index;\r\n      pageid = $this.data.pageid;\r\n    $this.setData({ topmenuindex: topmenuindex })\r\n    if (dataurl == '' || dataurl == undefined) {\r\n      return;\r\n    }\r\n    if (dataurl.indexOf('pages') == 1) {\r\n     \r\n      var index = dataurl.lastIndexOf(\"=\");\r\n      var pageid = dataurl.substring(index + 1, dataurl.length);\r\n      core.get('diypage', { id: pageid }, function (result) {\r\n        if (result.error == 0) {\r\n          var arr = [];\r\n          for (var i in result.diypage.items) {\r\n            arr.push(result.diypage.items[i]); //属性\r\n          }\r\n          arr.unshift(topmenu);\r\n          var obj = new Object();\r\n          for (var x in arr) {\r\n            obj[x] = arr[x];\r\n            if (arr[x].id == 'topmenu') {\r\n              arr[x].status = type\r\n            }\r\n          }\r\n          result.diypage.items = obj;\r\n          $this.setData({ diypages: result.diypage, topmenuDataType: '' })\r\n        }\r\n      });\r\n    } else {\r\n      core.get('diypage/getInfo', { dataurl: dataurl }, function (ret) {\r\n        //console.error('dataurl' + dataurl)\r\n        var topmenu = $this.data.topmenu;\r\n        core.get('diypage', { type: pageid }, function (result) {\r\n          var diypage = result.diypage;\r\n          $.each(diypage.items, function (id, item) {\r\n            if (item.id == 'topmenu') {\r\n              item.status = type\r\n              for (var i in item.data) {\r\n                if (i == type) {\r\n                  item.data[i]['data'] = ret.goods.list;\r\n                  if (ret.goods.list.length <= 8) {\r\n                  \r\n                    item.data[i]['showmore'] = true\r\n                   \r\n                  }\r\n                }\r\n              }\r\n            }\r\n          });\r\n          if (result.error == 0) {\r\n            $this.setData({ diypages: result.diypage, topmenuDataType: ret.type })\r\n          }\r\n        });\r\n      });\r\n    }\r\n    $this.setData({ diypages: diypages })\r\n  },\r\n  // 选项卡切换\r\n  tabwidget: function (e) {\r\n  \r\n    var $this = this,\r\n      diypages = $this.data.diypages,\r\n      list = diypages.items,\r\n      id = e.currentTarget.dataset.id,\r\n      dataurl = e.currentTarget.dataset.url,\r\n      type = e.currentTarget.dataset.type;\r\n\r\n    if (dataurl == '' || dataurl == undefined) {\r\n      return;\r\n    }\r\n\r\n    core.get('diypage/getInfo', { dataurl: dataurl }, function (ret) {\r\n      for (var i in diypages.items) {\r\n        if (i == id) {\r\n          diypages.items[i].data[type].data = ret.goods.list;\r\n          diypages.items[i].data[type].type = ret.type;\r\n          diypages.items[i].type = ret.type;\r\n          diypages.items[i].status = type;\r\n          if (ret.goods.list.length <= 8) {\r\n            diypages.items[i].data[type].showmore = true;\r\n          }\r\n          \r\n          $this.setData({ diypages: diypages })\r\n        }\r\n      }\r\n    });\r\n  },\r\n  getstoremore: function (e) {\r\n    var $this = this;\r\n    var itemid = e.currentTarget.dataset.id;\r\n    var diypages = $this.data.diypages;\r\n    $.each(diypages.items, function (id, item) {\r\n      if (id == itemid) {\r\n        if (item.status == undefined || item.status == '') {\r\n          if (item.data[0].linkurl.indexOf('stores') != -1) {\r\n            var paramsType = 'stores';\r\n          } else {\r\n            var paramsType = 'goods';\r\n          }\r\n          var dataurl = item.data[0].linkurl;\r\n          var num = item.data[0].data.length;\r\n          core.get('diypage/getInfo', { dataurl: dataurl, num: num, paramsType: paramsType }, function (ret) {\r\n            item.data[0].data = ret.goods.list;\r\n           \r\n            if (item.data[0].data.length == ret.goods.count) {\r\n              item.data[0].showmore = true;\r\n             \r\n            }\r\n            $this.setData({ diypages: diypages })\r\n          });\r\n        } else {\r\n          if (item.data[item.status].linkurl.indexOf('stores') != -1) {\r\n            var paramsType = 'stores';\r\n          } else {\r\n            var paramsType = 'goods';\r\n          }\r\n          var dataurl = item.data[item.status].linkurl;\r\n          var num = item.data[item.status].data.length;\r\n          core.get('diypage/getInfo', { dataurl: dataurl, num: num, paramsType: paramsType }, function (ret) {\r\n            item.data[item.status].data = ret.goods.list;\r\n           \r\n            if (item.data[item.status].data.length == ret.goods.count) {\r\n              item.data[item.status].showmore = true;\r\n            }\r\n            $this.setData({ diypages: diypages })\r\n          });\r\n        }\r\n      }\r\n    })\r\n\r\n  },\r\n})","/**\r\n *\r\n * index.js\r\n *\r\n * @create 2017-01-04\r\n * @author 咖啡\r\n *\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons'); \r\nvar foxui = app.requirejs('foxui');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar $ = app.requirejs('jquery');\r\nPage({\r\n  data: {\r\n    limits: true,\r\n    tabinfo: 'active',\r\n    tabreplay: '',\r\n    tablog: '',\r\n    hasoption: false,\r\n    options: [],\r\n    goodsoptions:[],\r\n    optionid:0,\r\n    specs: [],\r\n    goods: [],\r\n    log: [],\r\n    logmore:false,\r\n    logpage:1,\r\n    replays: [],\r\n    replaysmore:false,\r\n    replaypage:1,\r\n    stores: [],\r\n    goodsrec: [],\r\n    goodspicker:false,\r\n    selectspecs:[],\r\n    optionselect:\"请选择规格\",\r\n    optionbtn:'确认',\r\n    timer:[],\r\n    day:0,\r\n    hour:0,\r\n    minute:0,\r\n    second:0,\r\n    windowWidth: 0,\r\n    windowHeight: 0,\r\n    indicatorDots: true,\r\n    autoplay: false,\r\n    interval: 5000,\r\n    duration: 1000\r\n  },\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n    options = options || {};\r\n    wx.getSystemInfo({\r\n      success: function (result) {\r\n        $this.setData({\r\n          windowWidth: result.windowWidth,\r\n          windowHeight: result.windowHeight\r\n        });\r\n      }\r\n    });\r\n    $this.setData({options:options});\r\n  },\r\n  onTab: function (e) {\r\n    var $this = this;\r\n    var active = e.currentTarget.dataset.tab;\r\n    if (active == \"tabreplay\") {\r\n      $this.setData({ tabinfo: '', tabreplay: 'active', tablog: '' });\r\n    } else if (active == \"tablog\") {\r\n      $this.setData({ tabinfo: '', tabreplay: '', tablog: 'active' });\r\n    } else {\r\n      $this.setData({ tabinfo: 'active', tabreplay: '', tablog: '' });\r\n    }\r\n  },\r\n  //参与记录翻页\r\n  getlog:function(){\r\n    var $this = this;\r\n    $this.setData({ logpage:$this.data.logpage+1 });\r\n    core.get('creditshop/detail/getlistlog', { id: $this.options.id , page:$this.data.logpage},function(msg){\r\n        msg.list = $this.data.log.concat(msg.list);\r\n        $this.setData({log:msg.list,logmore:msg.more});\r\n    });\r\n  },\r\n  getreply:function(){\r\n    var $this = this;\r\n    $this.setData({ replaypage: $this.data.replaypage + 1 });\r\n    core.get('creditshop/detail/getlistreply', { id: $this.options.id, page: $this.data.replaypage },\r\n    function (msg){\r\n      msg.list = $this.data.replays.concat(msg.list);\r\n      $this.setData({ replays: msg.list, replaysmore: msg.more });\r\n    });\r\n      \r\n  },\r\n  /*获取商品详情*/\r\n  getDetail: function () {\r\n    var $this = this;\r\n    var options = $this.data.options;\r\n    core.get('creditshop/detail', { id: options.id }, function (result) {\r\n      if(result.error>0){\r\n        foxui.toast($this, result.message);\r\n        setTimeout(function(){\r\n          wx.navigateBack();\r\n        },1000)\r\n        return;\r\n      }\r\n      parser.wxParse('wxParseData', 'html', result.goods.goodsdetail, $this, '0');\r\n      parser.wxParse('wxParseData_subdetail', 'html', result.goods.subdetail, $this, '0');\r\n      parser.wxParse('wxParseData_noticedetail', 'html', result.goods.noticedetail, $this, '0');\r\n      parser.wxParse('wxParseData_usedetail', 'html', result.goods.usedetail, $this, '0');\r\n      \r\n      $this.setData({\r\n        goods: result.goods,\r\n        log: result.log,\r\n        logmore:result.logmore,\r\n        replays: result.replys,\r\n        replaysmore: result.replymore,\r\n        stores: result.stores,\r\n        goodsrec: result.goodsrec,\r\n        hasoption:result.goods.hasoption,\r\n        sysset: result.sysset\r\n      });\r\n      /*倒计时*/\r\n      if (result.goods.istime > 0 && result.goods.timestart > 0 && result.goods.timeend>0){\r\n        clearInterval($this.data.timer);\r\n        var timer = setInterval(function () {\r\n          $this.countDown(result.goods.timestart, result.goods.timeend);\r\n        }, 1000);\r\n        $this.setData({ timer: timer });\r\n      }\r\n    });\r\n  },\r\n  /*倒计时控件*/\r\n  countDown: function (timestart, timeend) {\r\n    var now = parseInt(Date.now() / 1000);\r\n    var endDate = timestart > now ? timestart : timeend;\r\n    var leftTime = endDate - now;\r\n    var leftsecond = parseInt(leftTime);\r\n    var day = Math.floor(leftsecond / (60 * 60 * 24));\r\n    var hour = Math.floor((leftsecond - day * 24 * 60 * 60) / 3600);\r\n    var minute = Math.floor((leftsecond - day * 24 * 60 * 60 - hour * 3600) / 60);\r\n    var second = Math.floor(leftsecond - day * 24 * 60 * 60 - hour * 3600 - minute * 60);\r\n    var time = {day:day,hour:hour,minute:minute,second:second};\r\n    this.setData({ timer:time});\r\n  },\r\n  /*选择规格picker事件*/\r\n  optionclick:function(){\r\n    var $this = this;\r\n    var id = $this.data.goods.id;\r\n    var hasoption = $this.data.goods.hasoption;\r\n    var specs = $this.data.specs;\r\n    var canbuy = $this.data.goods.canbuy;\r\n    if(!canbuy){\r\n      foxui.toast($this, $this.data.goods.buymsg);\r\n      return;\r\n    }\r\n\r\n    if (hasoption){\r\n      if (specs.length == 0){\r\n        core.get('creditshop/detail/option', { id: id }, function (result) {\r\n          $this.setData({\r\n            goodspicker: true,\r\n            goodsoptions: result.options,\r\n            optiongoods: result.goods,\r\n            specs: result.specs\r\n          });\r\n        });\r\n      }else{\r\n        $this.setData({goodspicker: true});\r\n      }      \r\n    }else{\r\n      $this.setData({hasoption:false});\r\n      return;\r\n    }\r\n  },\r\n  /*选择规格*/\r\n  specselect: function (event){\r\n    var $this = this;\r\n    var selectspecs = $this.data.selectspecs;\r\n    var idx = event.target.dataset.idx;\r\n    var itemid = event.target.dataset.specid;\r\n    selectspecs[idx] = { id: itemid, title: event.target.dataset.title };\r\n    $this.setData({ selectspecs: selectspecs});\r\n    var specs = $this.data.specs;\r\n    var specsitem = specs[idx].items;\r\n    specsitem.forEach(function (e) {\r\n      if (itemid == e.id) {\r\n        e.class = \"btn-danger\";\r\n      } else {\r\n        e.class = \"\";\r\n      }\r\n    });\r\n    specs[idx].items = specsitem;\r\n    $this.setData({ specs: specs});\r\n\r\n    var title = '';\r\n    var optionTitle = '';\r\n    selectspecs.forEach(function (event) {\r\n      title = event.title + ';'+title;\r\n      optionTitle = event.id + '_' + optionTitle;\r\n    });\r\n    optionTitle = optionTitle.substring(0, optionTitle.length - 1);\r\n    var options = $this.data.goodsoptions;\r\n    if (event.target.dataset.thumb != '') {\r\n      $this.setData({\r\n        'optiongoods.thumb': event.target.dataset.thumb,\r\n      })\r\n    }\r\n    \r\n    options.forEach(function (event) {\r\n      if (event.specs == optionTitle) {\r\n        $this.setData({\r\n          optionid: event.id,\r\n          'optiongoods.total': event.total,\r\n          'goods.credit': event.credit,\r\n          'goods.money': event.money,\r\n          'optiongoods.credit': event.credit,\r\n          'optiongoods.money': event.money,\r\n          'optionselect': '已选 '+event.title\r\n        });\r\n        if (event.total < $this.data.total) {\r\n          $this.setData({\r\n            'goods.canbuy': false,\r\n            'goods.buymsg': '库存不足',\r\n            optionbtn: '库存不足',\r\n          })\r\n          foxui.toast($this, \"库存不足\");\r\n        } else {\r\n          $this.setData({\r\n            'goods.canbuy': true,\r\n            'goods.buymsg': '库存不足',\r\n            optionbtn: '确认',\r\n          })\r\n        }\r\n      }\r\n    });\r\n    \r\n\r\n  },\r\n  /*关闭picker*/\r\n  closepicker:function(){\r\n    this.setData({ goodspicker: false})\r\n  },\r\n  /*积分兑换绑定事件*/\r\n  openActionSheet: function () {\r\n    var $this = this;\r\n    var canbuy = $this.data.goods.canbuy;\r\n    var hasoption = $this.data.goods.hasoption;\r\n    var optionid = $this.data.optionid;\r\n    if (canbuy) {\r\n      if(hasoption>0){\r\n        if(optionid>0){\r\n          wx.redirectTo({\r\n            url: '/pages/creditshop/create/index?id=' + $this.data.goods.id + '&optionid=' + optionid,\r\n          });\r\n        }else{\r\n          $this.optionclick();\r\n        }\r\n      }else{\r\n        wx.redirectTo({\r\n          url: '/pages/creditshop/create/index?id=' + $this.data.goods.id,\r\n        });\r\n      }\r\n\r\n    } else {\r\n      return;\r\n    }\r\n  },\r\n  /*页面加载*/\r\n  onShow: function () {\r\n    var $this = this;\r\n    // var specs = [];\r\n    // var options = [];\r\n    var isIpx = app.getCache('isIpx');\r\n\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: ''\r\n      })\r\n    }\r\n    $this.getDetail();\r\n    /*获取授权*/\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        $this.setData({ limits: limits })\r\n      }\r\n    })\r\n  }\r\n\r\n});","/**\r\n *\r\n * order/common/index.js\r\n *\r\n * @create 2017-1-16\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),\r\n  core = app.requirejs('core');\r\nPage({\r\n  data: {\r\n    stars_class: ['text-default', 'text-primary', 'text-success', 'text-warning', 'text-danger'],\r\n    stars_text: ['差评', '一般', '挺好', '满意', '非常满意'],\r\n    normalSrc: 'icox icox-star',\r\n    selectedSrc: 'icox icox-xing selected',\r\n    key: -1,\r\n    content: '',\r\n    images: [],\r\n    imgs: [],\r\n    log:[],\r\n    is_openmerch:0,\r\n    shop:[],\r\n  },\r\n  onLoad: function (options) {\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n    this.setData({\r\n      options: options\r\n    });\r\n    app.url(options);\r\n    this.get_list();\r\n  },\r\n  get_list: function () {\r\n    var $this = this;\r\n    core.get('creditshop/comment', $this.data.options, function (list) {\r\n      if (list.error == 0) {\r\n        list.show = true;\r\n        $this.setData(list);\r\n        $this.setData({\r\n          log: list.log,\r\n          is_openmerch: list.is_openmerch,\r\n          shop: list.shop,\r\n        });\r\n      } else {\r\n        core.toast(list.message, 'loading');\r\n        wx.navigateBack();\r\n      }\r\n    }, true);\r\n  },\r\n  select: function (e) {\r\n    var key = e.currentTarget.dataset.key;\r\n    this.setData({\r\n      key: key\r\n    });\r\n  },\r\n  change: function (e) {\r\n    var name = core.data(e).name, data = {};\r\n    data[name] = e.detail.value;\r\n    this.setData(data);\r\n  },\r\n  submit: function () {\r\n    var $this = this, data = {\r\n      logid: this.data.log.id,\r\n      merchid:this.data.log.merchid,\r\n      comments: []\r\n    };\r\n    if (this.data.content == '' || this.data.key == -1) {\r\n      core.alert('有未填写项目!')\r\n      return false;\r\n    }\r\n    var g = {\r\n      goodsid: this.data.log.goodsid,\r\n      level: this.data.key + 1,\r\n      content: this.data.content,\r\n      images: this.data.images\r\n    };\r\n    data.comments.push(g);\r\n    core.post('creditshop/comment/submit', data, function (list) {\r\n      if (list.error != 0) {\r\n        core.toast(list.message, 'loading')\r\n      }\r\n      wx.navigateBack()\r\n    }, true);\r\n  },\r\n  upload: function (e) {\r\n    var $this = this, dataset = core.data(e), type = dataset.type, images = $this.data.images, imgs = $this.data.imgs, index = dataset.index;\r\n    if (type == 'image') {\r\n      core.upload(function (file) {\r\n        images.push(file.filename);\r\n        imgs.push(file.url);\r\n        $this.setData({\r\n          images: images,\r\n          imgs: imgs\r\n        })\r\n      });\r\n    } else if (type == 'image-remove') {\r\n      images.splice(index, 1);\r\n      imgs.splice(index, 1);\r\n      $this.setData({\r\n        images: images,\r\n        imgs: imgs\r\n      })\r\n    } else if (type == 'image-preview') {\r\n      wx.previewImage({\r\n        current: imgs[index],\r\n        urls: imgs\r\n      })\r\n    }\r\n  }\r\n});\r\n","/**\r\n *\r\n * order/express/index.js\r\n *\r\n * @create 2017-1-16\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),core=app.requirejs('core');\r\nPage({\r\n    data: {},\r\n    onLoad: function (options) {\r\n        // 页面初始化 options为页面跳转所带来的参数\r\n        this.setData({\r\n            options: options\r\n        });\r\n        app.url(options);\r\n        this.get_list( options.id );\r\n    },\r\n    get_list:function ( id ) {\r\n        var $this = this;\r\n        core.get('creditshop/log/express', {id:id}, function (list) {\r\n            if (list.error==0){\r\n                list.show = true;\r\n                $this.setData(list);\r\n            }else{\r\n                core.toast(list.message,'loading')\r\n            }\r\n        });\r\n    }\r\n});","//index.js\r\n//获取应用实例\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\n\r\n\r\nPage({\r\n    data: {\r\n        page: 1,\r\n        loaded: false,\r\n        loading: false,\r\n        list: []\r\n    },\r\n    getList: function () {\r\n        var $this = this;\r\n        $this.setData({loading: true});\r\n        core.get('shop/notice/get_list', {page: this.data.page}, function (result) {\r\n            $this.setData({loading: false,show:true});\r\n            if (result.list.length > 0) {\r\n                $this.setData({\r\n                    page: $this.data.page + 1,\r\n                    list: $this.data.list.concat(result.list)\r\n                });\r\n            } else {\r\n                if (result.list.length < result.pagesize) {\r\n                    $this.setData({\r\n                        loaded: true\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    },\r\n    onReachBottom: function () {\r\n        if (this.data.loaded) {\r\n            return;\r\n        }\r\n        this.getList();\r\n    },\r\n    onLoad: function (options) {\r\n        app.url(options);\r\n        this.getList();\r\n    }\r\n})\r\n","//index.js\r\n//获取应用实例\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\n\r\nPage({\r\n    data: {\r\n        id:'-',\r\n        title:'-',\r\n        createtime:'-'\r\n    },\r\n    onLoad: function (options) {\r\n        var $this = this;\r\n        $this.setData({ id: options.id});\r\n        app.url(options);\r\n\r\n        core.get('shop/notice/detail',{'id': this.data.id},function(data){\r\n            var notice = data.notice;\r\n            parser.wxParse('wxParseData','html', notice.detail,$this,'5');\r\n            $this.setData({\r\n                show: true,\r\n                title: notice.title,\r\n                createtime: notice.createtime,\r\n            });\r\n\r\n        })\r\n\r\n    }\r\n})\r\n","// pages/shop/caregory/index.js\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons');\r\nvar $ = app.requirejs('jquery');\r\nPage({\r\n    data: {\r\n        route: 'category',\r\n        category: {},\r\n        icons: app.requirejs('icons'),\r\n        selector: 0,     //当前分类\r\n        advimg: '',      //分类广告\r\n        advurl:'',\r\n        recommands: {},  //推荐分类\r\n        level: 0,        //分类显示等级\r\n        back: 0,         //返回上一级\r\n        child: {},\r\n        parent: {},\r\n    },\r\n    // 二级分类绑定事件\r\n    tabCategory: function (event) {\r\n        this.setData({\r\n            selector: event.target.dataset.id,\r\n            advimg: event.target.dataset.src,\r\n            advurl: event.target.dataset.url,\r\n            child: event.target.dataset.child,\r\n            back: 0,\r\n        });\r\n        if ($.isEmptyObject(event.target.dataset.child)){\r\n            this.setData({level: 0});\r\n        } else {\r\n            this.setData({level: 1});\r\n        }\r\n     \r\n    },\r\n    //三级分类绑定事件\r\n    cateChild: function (event) { \r\n        this.setData({\r\n            parent: event.currentTarget.dataset.parent,\r\n            child: event.currentTarget.dataset.child,\r\n            back:1\r\n        });\r\n        \r\n    },\r\n    //返回上一级\r\n    backParent: function (event) {\r\n        this.setData({\r\n            child: event.currentTarget.dataset.parent,\r\n            back: 0\r\n        });\r\n    },\r\n    //\r\n    getCategory: function () {\r\n        var $this = this;\r\n        core.get('shop/get_category', {}, function (result) {\r\n            $this.setData({\r\n                category: result.category,\r\n                show: true,\r\n                set: result.set,\r\n                advimg: result.set.advimg,\r\n                recommands: result.recommands,\r\n                child: result.recommands\r\n                \r\n            });\r\n          \r\n        });\r\n    },\r\n    onShow: function () {\r\n        // 页面初始化\r\n    },\r\n    onLoad: function (options) {\r\n        app.url(options);\r\n        this.getCategory();\r\n    },\r\n    onShareAppMessage: function () {\r\n        return core.onShareAppMessage();\r\n    }\r\n});","/**\r\n *\r\n * favorite\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-02-07\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar $ = app.requirejs('jquery');\r\nvar diyform = app.requirejs('biz/diyform');\r\nvar goodspicker = app.requirejs('biz/goodspicker');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n    data:{\r\n      specs:[],\r\n      options:[],\r\n      diyform: {},\r\n      specsTitle: '',\r\n      total: 1,\r\n        active: '',\r\n        slider: '',\r\n        tempname: '',\r\n        buyType: '',\r\n        icons: app.requirejs('icons'),\r\n        isFilterShow:false,\r\n        listmode:'block',\r\n        listsort:'',\r\n        page: 1,\r\n        loaded:false,\r\n        loading:true,\r\n        allcategory:[],\r\n        catlevel:-1,\r\n        opencategory:false,\r\n        category:{},\r\n        category_child:[],\r\n        category_third:[],\r\n        filterBtns:{}, \r\n        isfilter: 0,\r\n        list: [],\r\n        params:{},\r\n        count: 0,\r\n        defaults: {\r\n            keywords: '',\r\n            isrecommand: '',\r\n            ishot: '',\r\n            isnew: '',\r\n            isdiscount: '',\r\n            issendfree: '',\r\n            istime: '',\r\n            cate: '',\r\n            order: '',\r\n            by: 'desc',\r\n            merchid: 0,\r\n        },\r\n        lastcat:'',\r\n        fromsearch: false,\r\n        searchRecords: [],\r\n        areas: [],\r\n        limits: true,\r\n        modelShow: false,\r\n        canload: true\r\n    },\r\n    onLoad:function(options){\r\n      var $this = this;\r\n      $this.setData({ imgUrl: app.globalData.approot });\r\n      setTimeout(function () {\r\n        $this.setData({ areas: app.getCache(\"cacheset\").areas });\r\n      }, 3000)\r\n        if(!$.isEmptyObject(options)){\r\n            var isfilter = options.isrecommand||options.isnew||options.ishot||options.isdiscount||options.issendfree||options.istime?1:0;\r\n            this.setData({params: options, isfilter: isfilter, filterBtns: options, fromsearch: options.fromsearch||false});\r\n        }\r\n        this.initCategory();\r\n        if(!options.fromsearch){\r\n            this.getList();\r\n        }\r\n        this.getRecord();\r\n       \r\n    },\r\n    onShow: function(){\r\n        if(this.data.fromsearch){\r\n            this.setFocus();\r\n        }\r\n        var $this = this;\r\n        wx.getSetting({\r\n    \t  success: function(res) {\r\n    \t    var limits = res.authSetting['scope.userInfo'];\r\n    \t    $this.setData({limits: limits})\t\r\n    \t  }\r\n        })\r\n    },\r\n    onReachBottom:function(){\r\n        if(this.data.loaded || this.data.list.length==this.data.total){\r\n            return;\r\n        }\r\n        if (this.data.canload == true) {\r\n          this.getList();\r\n        }\r\n    },\r\n    initCategory:function(){\r\n        var $this = this;\r\n        core.get('goods/get_category', {} ,function(result){\r\n            $this.setData({\r\n                allcategory: result.allcategory,\r\n                category_parent: result.allcategory.parent,\r\n                category_child:[],\r\n                category_third:[],\r\n                catlevel:result.catlevel,\r\n                opencategory: result.opencategory,\r\n                show: true\r\n            });\r\n        });\r\n    },\r\n    getList: function(){\r\n        var $this = this;\r\n        $this.setData({loading:true});\r\n        this.data.canload = false;\r\n        $this.data.params.page = $this.data.page;\r\n        core.get('goods/get_list', $this.data.params ,function(result){\r\n        \r\n          var data = { loading: false, count: result.total,show: true};\r\n            if(!result.list){\r\n                result.list = [];\r\n            }\r\n            if(result.list.length>0){\r\n                data.page = $this.data.page + 1;\r\n                data.list = $this.data.list.concat(result.list);\r\n                if(result.list.length<result.pagesize) {\r\n                    data.loaded = true\r\n                }\r\n            }\r\n            $this.setData(data);\r\n            $this.data.canload = true\r\n        });\r\n    },\r\n    changeMode:function(){\r\n        if(this.data.listmode=='block'){\r\n            this.setData({listmode:''});\r\n        } else{\r\n            this.setData({listmode:'block'})\r\n        }\r\n    },\r\n    bindSort:function(e){\r\n        var order =  e.currentTarget.dataset.order;\r\n        var params = this.data.params;\r\n        if (order == '') {\r\n            if (params.order == order) {\r\n                return\r\n            }\r\n            params.order = '';\r\n            this.setData({listorder:''});\r\n        } else if (order == 'minprice') {\r\n            this.setData({listorder:''});\r\n            if (params.order == order) {\r\n                if (params.by == 'desc') {\r\n                    params.by = 'asc';\r\n                } else {\r\n                    params.by = 'desc';\r\n                }\r\n            } else {\r\n                params.by = 'asc';\r\n            }\r\n            params.order = order;\r\n            this.setData({listorder: params.by});\r\n        } else if (order == 'sales') {\r\n            if (params.order == order) {\r\n                return;\r\n            }\r\n            this.setData({listorder:''});\r\n            //params = this.data.defaults;\r\n            params.order = 'sales';\r\n            params.by = 'desc';\r\n        }\r\n        this.setData({\r\n            params:params,\r\n            page:1,\r\n            list:[],\r\n            loading:true,\r\n            loaded:false,\r\n            sort_selected: order\r\n        });\r\n        this.getList();\r\n    },\r\n    showFilter:function(){\r\n        this.setData({ isFilterShow: this.data.isFilterShow ? false: true });\r\n    },\r\n    btnFilterBtns:function(e){\r\n        var type = e.target.dataset.type;\r\n        if(!type){\r\n            return;\r\n        }\r\n        var filterBtns  = this.data.filterBtns;\r\n        if( !filterBtns.hasOwnProperty(type)){\r\n            filterBtns[type] = '';\r\n        }\r\n        if(filterBtns[type]){\r\n            delete filterBtns[type];\r\n        }else{\r\n            filterBtns[type] = 1;\r\n        }\r\n        var isfilter = $.isEmptyObject(filterBtns)?0:1;\r\n        this.setData({\r\n            filterBtns: filterBtns,\r\n            isfilter: isfilter\r\n        });\r\n    },\r\n    bindFilterCancel:function(){\r\n        this.data.defaults.cate = '';\r\n        var params = this.data.defaults;\r\n        this.setData({\r\n            page:1,\r\n            params:params,\r\n            isFilterShow:false,\r\n            lastcat:'',\r\n            cateogry_parent_selected:'',\r\n            category_child_selected:'',\r\n            category_third_selected:'',\r\n            category_child:[],\r\n            category_third:[],\r\n            filterBtns:{},\r\n            loading:true,\r\n            loaded:false,\r\n            listorder:'',\r\n            list: []\r\n        });\r\n        this.getList();\r\n    },\r\n    bindFilterSubmit:function(){\r\n        var params = this.data.params;\r\n        var filterBtns  = this.data.filterBtns;\r\n        for(var i in filterBtns){\r\n            params[i] = filterBtns[i];\r\n        }\r\n        if($.isEmptyObject(filterBtns)){\r\n            params = this.data.defaults;\r\n        }\r\n        params.cate = this.data.lastcat;\r\n        this.setData({\r\n            page:1,\r\n            params:params,\r\n            isFilterShow:false,\r\n            filterBtns: filterBtns ,\r\n            list:[],\r\n            loading:true,\r\n            loaded:false\r\n        });\r\n        this.getList();\r\n    },\r\n    bindCategoryEvents:function(e){\r\n        var lastcat = e.target.dataset.id;\r\n        this.setData({\r\n           lastcat: lastcat \r\n        });\r\n        var level =e.target.dataset.level; \r\n        if(level==1){\r\n            this.setData({\r\n                category_child:[],\r\n                category_third:[]\r\n            });\r\n           this.setData({\r\n            category_parent_selected: lastcat,\r\n            category_child:this.data.allcategory['children'][lastcat]\r\n           });\r\n        }else if(level==2){\r\n             this.setData({\r\n                category_third:[]\r\n            });\r\n            this.setData({\r\n                category_child_selected: lastcat,\r\n                category_third:this.data.allcategory['children'][lastcat]\r\n            });\r\n        } else{       \r\n            this.setData({\r\n                category_third_selected: lastcat,\r\n            });\r\n        }   \r\n    },\r\n    bindSearch:function(e){\r\n        var input = e.target;\r\n        this.setData({list:[],loading:true,loaded:false});\r\n        var value = $.trim(e.detail.value);\r\n        var params = this.data.defaults;\r\n        if( value!= '') {\r\n            params.keywords = value;\r\n            this.setData({\r\n                page:1,\r\n                params:params,\r\n                fromsearch: false\r\n            })\r\n            this.getList();\r\n            this.setRecord(value);\r\n        }else{\r\n            params.keywords = '';\r\n            this.setData({\r\n                page:1,\r\n                params:params,\r\n                listorder:'',\r\n                fromsearch: false\r\n            });\r\n            this.getList();\r\n        }\r\n     },\r\n     bindInput:function(e){\r\n         var value = $.trim(e.detail.value);\r\n         var params = this.data.defaults;\r\n         params.keywords = '';\r\n         params.order = this.data.params.order;\r\n         params.by = this.data.params.by;\r\n         if (value == '') {\r\n             this.setData({\r\n                 page: 1,\r\n                 list: [],\r\n                 loading: true,\r\n                 loaded: false,\r\n                 params: params,\r\n                 listorder: params.by,\r\n                 fromsearch: true\r\n             })\r\n             //this.getList();\r\n             this.getRecord();\r\n         }\r\n    },\r\n    bindFocus: function (e) {\r\n        var value = $.trim(e.detail.value);\r\n        if(value==''){\r\n            this.setData({\r\n                fromsearch: true\r\n            });\r\n        }\r\n    },\r\n    bindback: function () {\r\n        wx.navigateBack();\r\n    },\r\n    bindnav: function (e) {\r\n        var text = $.trim(e.currentTarget.dataset.text);\r\n        var params = this.data.defaults;\r\n        params.keywords = text;\r\n        this.setData({params: params, page: 1, fromsearch: false});\r\n        this.getList();\r\n        this.setRecord(text);\r\n    },\r\n    getRecord: function () {\r\n        var records = app.getCache(\"searchRecords\");\r\n        this.setData({searchRecords: records});\r\n    },\r\n    setRecord: function (value) {\r\n        if (value!=''){\r\n            var records = app.getCache(\"searchRecords\");\r\n            if(!$.isArray(records)){\r\n                records = [];\r\n                records.push(value);\r\n            }else{\r\n                var newArr = [];\r\n                newArr.push(value);\r\n                for (var i in records){\r\n                    if(newArr.length>20){\r\n                        break;\r\n                    }\r\n                    if(records[i]==value || records==null || records=='null'){\r\n                        continue;\r\n                    }else{\r\n                        newArr.push(records[i]);\r\n                    }\r\n                }\r\n                records = newArr;\r\n            }\r\n            app.setCache(\"searchRecords\", records);\r\n        }else{\r\n            app.setCache(\"searchRecords\", []);\r\n        }\r\n        this.getRecord();\r\n    },\r\n    delRecord: function () {\r\n        this.setRecord('');\r\n        this.setData({fromsearch: true});\r\n    },\r\n    setFocus: function(){\r\n        var $this = this;\r\n        setTimeout(function(){\r\n            $this.setData({focusin: true})\r\n        }, 1000);\r\n    },\r\n    // 购买picker\r\n    selectPicker:function(e){\r\n      app.checkAuth();\r\n      var $this = this;\r\n      \r\n      // if(!$this.data.limits){\r\n      // \t$this.setData({modelShow: true})\r\n      // \treturn\r\n      // }\r\n      \r\n      var goodslist = 'goodslist';\r\n      goodspicker.selectpicker(e,$this,goodslist)\r\n    },\r\n    // 选规格\r\n    specsTap:function(event){\r\n      var $this = this\r\n      goodspicker.specsTap(event, $this)\r\n    },\r\n  // 选赠品\r\n  chooseGift(e) {\r\n    goodspicker.chooseGift(e, this)\r\n  },\r\n    //关闭pickerpicker\r\n    emptyActive: function () {\r\n      this.setData({\r\n        active: '', slider: 'out', tempname: '',specsTitle:''\r\n      });\r\n    },\r\n    // 立即购买\r\n    buyNow: function (event){\r\n      var $this = this\r\n      goodspicker.buyNow(event, $this)\r\n    },\r\n    //加入购物车\r\n    getCart: function (event){\r\n      var $this = this\r\n      goodspicker.getCart(event, $this)\r\n    },\r\n    select:function(){\r\n      var $this = this\r\n      goodspicker.select($this)\r\n    },\r\n    //数量输入绑定事件\r\n    inputNumber: function (e){\r\n      var $this = this\r\n      goodspicker.inputNumber(e,$this)\r\n    },\r\n    number:function(e){\r\n      var $this = this\r\n      goodspicker.number(e, $this)\r\n    },\r\n    onChange: function (e) {\r\n      return diyform.onChange(this, e)\r\n    },\r\n    DiyFormHandler: function (e) {\r\n      return diyform.DiyFormHandler(this, e)\r\n    },\r\n    selectArea: function (e) {\r\n      return diyform.selectArea(this, e)\r\n    },\r\n    bindChange: function (e) {\r\n      return diyform.bindChange(this, e)\r\n    },\r\n    onCancel: function (e) {\r\n      return diyform.onCancel(this, e)\r\n    },\r\n    onConfirm: function (e) {\r\n      return diyform.onConfirm(this, e)\r\n    },\r\n    getIndex: function (str, areas) {\r\n      return diyform.getIndex(str, areas)\r\n    },\r\n    \r\n     /*用户授权-取消*/\r\n    cancelclick:  function(){\r\n   \t  this.setData({modelShow: false})\r\n    },\r\n    /*用户授权-去设置*/\r\n    confirmclick: function(){\r\n      this.setData({modelShow: false})\r\n      wx.openSetting({\r\n    \tsuccess: function(res) {}\r\n      })\r\n    }\r\n})","/**\r\n *\r\n * favorite\\index.js\r\n *\r\n * @create 2017-02-10\r\n * @author 咖啡\r\n *\r\n * \r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar $ = app.requirejs('jquery');\r\nPage({\r\n    data:{\r\n        region:[],        \r\n    },\r\n    onLoad:function(options){\r\n        var $this = this;\r\n        var region = options.region;\r\n        var onlysent = options.onlysent;\r\n        $this.setData({ region: region, onlysent: onlysent});\r\n    }\r\n})","/**\r\n *\r\n * index.js\r\n *\r\n * @create 2017-01-04\r\n * @author 咖啡\r\n *\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons');\r\nvar foxui = app.requirejs('foxui');\r\nvar diypage = app.requirejs('biz/diypage');\r\nvar diyform = app.requirejs('biz/diyform');\r\nvar goodspicker = app.requirejs('biz/goodspicker');\r\nvar $ = app.requirejs('jquery');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar hasOption = 0;\r\nvar selectdate=app.requirejs('biz/selectdate');\r\nPage({\r\n  data: {\r\n    diypages: {},\r\n    usediypage:false,\r\n    specs: [],\r\n    options: [],\r\n    icons: app.requirejs('icons'),\r\n    goods: {},\r\n    indicatorDots: true,\r\n    autoplay: true,\r\n    interval: 5000,\r\n    duration: 500,\r\n    circular: true,\r\n    play: \"/static/images/video_play.png\",\r\n    mute: \"/static/images/icon/mute.png\",\r\n    voice: \"/static/images/icon/voice.png\",\r\n    //pick\r\n    active: '',\r\n    slider: '',\r\n    tempname: '',\r\n    info: 'active',\r\n    preselltimeend: '',\r\n    presellsendstatrttime: '',\r\n    advWidth: 0,\r\n    dispatchpriceObj: 0,\r\n    now: parseInt(Date.now() / 1000),\r\n    day: 0,\r\n    hour: 0,\r\n    minute: 0,\r\n    second: 0,\r\n    timer: 0,\r\n    discountTitle: '',\r\n    istime: 1,\r\n    istimeTitle: '',\r\n    isSelected: false,\r\n    params: {},\r\n    total: 1,\r\n    optionid: 0,\r\n    audios: {},\r\n    audiosObj: {},\r\n    defaults: {\r\n      id: 0,\r\n      merchid: 0\r\n    },\r\n    buyType: '',\r\n    pickerOption: {},\r\n    specsData: [],\r\n    specsTitle: '',\r\n    canBuy: '',\r\n    diyform: {},\r\n    showPicker: false,\r\n    showcoupon: false,\r\n    pvalOld: [0, 0, 0],\r\n    pval: [0, 0, 0],\r\n    areas: [],\r\n    noArea: true,\r\n    commentObj: {},\r\n    commentObjTab: 1,\r\n    loading: false,\r\n    commentEmpty: false,\r\n    commentPage: 1,\r\n      commentTotal: 1,\r\n    commentLevel: 'all',\r\n    commentList: [],\r\n    closeBtn: false,\r\n    soundpic: true,\r\n    animationData: {},\r\n    uid: '',\r\n    stararr: ['all', 'good', 'normal', 'bad', 'pic'],\r\n    nav_mask: false,\r\n    nav_mask2: false,\r\n    nav: 0,\r\n    giftid: '',\r\n    limits: true,\r\n    modelShow: false,\r\n    showgoods: true,\r\n\r\n      //秒杀\r\n      timer:0,\r\n      lasttime: 0,\r\n      hour: '-',\r\n      min: '-',\r\n      sec: '-',\r\n\r\n    // 以下 周期购\r\n    currentDate: \"\",\r\n    dayList: '',\r\n    currentDayList: '',\r\n    currentObj: '',\r\n    currentDay: '',\r\n    checkedDate:'',\r\n    showDate:'',\r\n    scope: '',\r\n    goods_hint_show:false,\r\n    presellisstart:0,\r\n    advHeight: 1,\r\n    show_goods: true,\r\n    goodscircle: { can_share_goodscircle:false}\r\n  },\r\n\r\n  //商品详情轮播图按照第一张图片显示\r\n  imageLoad: function (e) {\r\n    let h = e.detail.height,\r\n      w = e.detail.width,\r\n      height = Math.floor((750 * h) / w);\r\n    if (h == w) {\r\n      this.setData({ advHeight: 750 })\r\n    } else {\r\n      this.setData({ advHeight: height })\r\n    }\r\n  },\r\n\r\n  favorite: function (event) {\r\n    app.checkAuth();\r\n    var $this = this;\r\n    var limits = $this.data.limits;\r\n    if (limits) {\r\n      var isfavorite = event.currentTarget.dataset.isfavorite ? 0 : 1;\r\n      core.get('member/favorite/toggle', { 'id': $this.data.options.id, 'isfavorite': isfavorite }, function (ret) {\r\n        if (ret.isfavorite) {\r\n          $this.setData({ 'goods.isfavorite': 1 });\r\n        } else {\r\n          $this.setData({ 'goods.isfavorite': 0 });\r\n        }\r\n      })\r\n\r\n    } else {\r\n      // this.setData({ modelShow: true })\r\n    }\r\n  },\r\n  /*购物车*/\r\n  // menucart: function () {\r\n  //   var $this = this;\r\n  //   var limits = $this.data.limits;\r\n  //   if (limits) {\r\n  //     wx.switchTab({\r\n  //       url: '/pages/member/cart/index'\r\n  //     })\r\n  //   } else {\r\n  //     this.setData({ modelShow: true })\r\n  //   }\r\n  // },\r\n  /*tab切换 */\r\n  goodsTab: function (event) {\r\n    var $this = this, tap = event.currentTarget.dataset.tap;\r\n    if (tap == 'info') {\r\n      this.setData({ info: 'active', para: '', comment: '' });\r\n    } else if (tap == 'para') {\r\n      this.setData({ info: '', para: 'active', comment: '' });\r\n    } else if (tap == 'comment') {\r\n      $this.setData({ info: '', para: '', comment: 'active' });\r\n      if ($this.data.commentList.length > 0) {\r\n        $this.setData({ loading: false });\r\n        return;\r\n      } else {\r\n        $this.setData({ loading: true });\r\n      }\r\n      core.get('goods/get_comment_list', {\r\n        'id': $this.data.options.id,\r\n        'level': $this.data.commentLevel,\r\n        'page': $this.data.commentPage\r\n      }, function (retlist) {\r\n        if (retlist.list.length > 0) {\r\n         // $this.setData({ loading: false, commentList: retlist.list, commentPage: retlist.page });\r\n            $this.setData({ loading: false, commentList: retlist.list, commentTotal: retlist.total,commentPage: retlist.page  });\r\n        } else {\r\n          $this.setData({ loading: false, commentEmpty: true });\r\n        }\r\n      })\r\n    }\r\n  },\r\n\r\n  //上拉加载下一页评论\r\n  onReachBottom: function () {\r\n    var $this = this;\r\n    if($this.data.commentTotal<=10)\r\n    {\r\n        return  false;\r\n    }\r\n    var commentType = $this.data.commentObjTab;\r\n    var objType = '';\r\n    if (commentType == 1) {\r\n      objType = 'all';\r\n    } else if (commentType == 2) {\r\n      objType = 'good';\r\n    } else if (commentType == 3) {\r\n      objType = 'normal';\r\n    } else if (commentType == 4) {\r\n      objType = 'bad';\r\n    } else if (commentType == 5) {\r\n      objType = 'pic';\r\n    }\r\n    $this.setData({ loading: true });\r\n    // var commentPage = $this.data.commentPage;\r\n    // if (commentPage == 1) {\r\n    //   commentPage = 2;\r\n    // }\r\n    core.get('goods/get_comment_list', {\r\n      'id': $this.data.options.id,\r\n      'level': objType,\r\n      'page': $this.data.commentPage\r\n    }, function (list) {\r\n      if (list.error == 0) {\r\n        $this.setData({ loading: false });\r\n        if (list.list.length > 0) {\r\n          $this.setData({\r\n            commentPage: $this.data.commentPage + 1,\r\n              commentTotal: list.total,\r\n            commentList: $this.data.commentList.concat(list.list)\r\n          });\r\n        }\r\n      }\r\n    });\r\n  },\r\n  //评价列表事件\r\n  comentTap: function (e) {\r\n    var $this = this;\r\n    var commentType = e.currentTarget.dataset.type;\r\n    var objType = '';\r\n    if (commentType == 1) {\r\n      objType = 'all';\r\n        $this.data.commentPage=1;\r\n    } else if (commentType == 2) {\r\n        $this.data.commentPage=1;\r\n      objType = 'good';\r\n    } else if (commentType == 3) {\r\n        $this.data.commentPage=1;\r\n      objType = 'normal';\r\n    } else if (commentType == 4) {\r\n        $this.data.commentPage=1;\r\n      objType = 'bad';\r\n    } else if (commentType == 5) {\r\n        $this.data.commentPage=1;\r\n      objType = 'pic';\r\n    }\r\n    if (commentType != $this.data.commentObjTab) {\r\n      //评价列表\r\n      core.get('goods/get_comment_list', {\r\n        'id': $this.data.options.id,\r\n        'level': objType,\r\n        'page': $this.data.commentPage\r\n      }, function (retlist) {\r\n        if (retlist.list.length > 0) {\r\n          $this.setData({\r\n            loading: false,\r\n            commentList: retlist.list,\r\n              commentTotal: retlist.total,\r\n            commentPage: retlist.page,\r\n            commentObjTab: commentType,\r\n            commentEmpty: false\r\n          });\r\n        }\r\n        // else {\r\n        //   $this.setData({\r\n        //     loading: false,\r\n        //     commentList: retlist.list,\r\n        //     commentPage: 1,\r\n        //     commentObjTab: commentType,\r\n        //     commentEmpty: true\r\n        //   });\r\n        // }\r\n      })\r\n    } else {\r\n      return;\r\n    }\r\n  },\r\n  // 评价图片点击预览\r\n  preview: function(e) {\r\n    wx.previewImage({\r\n      current: e.currentTarget.dataset.src, // 当前显示图片的http链接\r\n      urls: e.currentTarget.dataset.urls // 需要预览的图片http链接列表\r\n    })\r\n  },\r\n  /* 获取商品详情 */\r\n  getDetail: function (options) {\r\n    var $this = this;\r\n\r\n    var nowTime = parseInt(Date.now() / 1000);\r\n    \r\n    $this.setData({ loading: true });\r\n    core.get('goods/get_detail', { id: options.id }, function (result) {\r\n      if (result.error != 0) {\r\n        $this.setData({ show: true, showgoods: false });\r\n        foxui.toast($this, result.message);\r\n        setTimeout(function () {\r\n          wx.navigateBack();\r\n        }, 1500);\r\n        return;\r\n      }\r\n      // 需要强转为浮点型的数据\r\n      const needForceConvertToFloatData = ['marketprice', 'productprice']\r\n      // 处理价格比较的时候带有比较的不是浮点数，而是两个字符串出错的情况\r\n      needForceConvertToFloatData.forEach((value) => {\r\n        if(typeof result.goods[value] != 'undefined') {\r\n          result.goods[value] = parseFloat(result.goods[value])\r\n        }\r\n      })\r\n\r\n      var coupon = result.goods.coupons;\r\n      var MaxHeight = result.goods.thumbMaxHeight;\r\n      var MaxWidth = result.goods.thumbMaxWidth;\r\n      var ratio = MaxWidth / MaxHeight;\r\n      var goodscircle = result.goods.goodscircle;\r\n      \r\n      //轮播适配高度\r\n      // wx.getSystemInfo({\r\n      //   success: function (result) {\r\n      //     var advHeight = result.windowWidth / ratio;\r\n      //     $this.setData({\r\n      //       advWidth: result.windowWidth,\r\n      //       advHeight: advHeight\r\n      //     });\r\n      //   }\r\n      // });\r\n\r\n      $this.setData({\r\n        coupon: coupon,\r\n        coupon_l: coupon.length,\r\n        packagegoods: result.goods.packagegoods,\r\n        packagegoodsid: result.goods.packagegoods.goodsid || 0,\r\n        credittext: result.goods.credittext,\r\n        activity: result.goods.activity,\r\n        bottomFixedImageUrls: result.goods.bottomFixedImageUrls, //底部固定信息\r\n        phonenumber: result.goods.phonenumber || '',\r\n        showDate: result.goods.showDate || '',\r\n        scope: result.goods.scope || '',\r\n        show_goods: result.goods.show_goods,\r\n        goodscircle:goodscircle\r\n      })\r\n      if (result.goods.packagegoods) {\r\n        $this.package();\r\n      }\r\n      parser.wxParse('wxParseData', 'html', result.goods.content, $this, '0');\r\n      parser.wxParse('wxParseData_buycontent', 'html', result.goods.buycontent, $this, '0');\r\n      $this.setData({\r\n        show: true, goods: result.goods, minprice: result.goods.minprice, maxprice: result.goods.maxprice, preselltimeend: result.goods.preselltimeend, style: result.goods.labelstyle.style || '', navbar: result.goods.navbar, labels: result.goods.labels\r\n      });\r\n\r\n      if (result.goods.gifts && result.goods.gifts.length == 1) {\r\n        $this.setData({ giftid: result.goods.gifts[0].id })\r\n      }\r\n   \r\n      wx.setNavigationBarTitle({\r\n        title: result.goods.title || '商品详情'\r\n      });\r\n      hasOption = result.goods.hasoption;\r\n      if ($.isEmptyObject(result.goods.dispatchprice) || typeof (result.goods.dispatchprice) == 'string') {\r\n        $this.setData({ dispatchpriceObj: 0 });\r\n      } else {\r\n        $this.setData({ dispatchpriceObj: 1 });\r\n      }\r\n      /*促销start*/\r\n      if (result.goods.isdiscount > 0 && result.goods.isdiscount_time >= nowTime) {\r\n        clearInterval($this.data.timer);\r\n        var timer = setInterval(function () {\r\n          $this.countDown(0, result.goods.isdiscount_time);\r\n        }, 1000);\r\n        $this.setData({ timer: timer });\r\n      } else {\r\n        $this.setData({ discountTitle: '活动已结束' });\r\n      }\r\n      /*促销end*/\r\n      /*限时购 start*/\r\n      if (result.goods.istime > 0) {\r\n        clearInterval($this.data.timer);\r\n        var timer = setInterval(function () {\r\n          $this.countDown(result.goods.timestart, result.goods.timeend, 'istime');\r\n        }, 1000);\r\n        $this.setData({ timer: timer });\r\n      }\r\n      /*限时购 end*/\r\n      /*预售 start*/\r\n      if (result.goods.ispresell > 0) {\r\n        var timer = setInterval(function () {\r\n          if (result.goods.canbuy == 0){\r\n            $this.countDown(nowTime, result.goods.preselltimestart, 'istime');\r\n          } else if (result.goods.canbuy == 1){\r\n            $this.countDown(nowTime, result.goods.preselltimeend, 'istime');\r\n          }\r\n        }, 1000);\r\n        $this.setData({ timer: timer, presellisstart: result.goods.presellisstart });\r\n        $this.setData({\r\n          preselltimeend: result.goods.preselltimeend || result.goods.preselltimeend.getMonth() + '月' + result.goods.preselltimeend || result.goods.preselltimeend.getDate() + '日 ' + result.goods.preselltimeend || result.goods.preselltimeend.getHours() + ':' + result.goods.preselltimeend || result.goods.preselltimeend.getMinutes() + ':' + result.goods.preselltimeend || result.goods.preselltimeend.getSeconds(),\r\n          presellsendstatrttime: result.goods.presellsendstatrttime || result.goods.presellsendstatrttime.getMonth() + '月' + result.goods.presellsendstatrttime || result.goods.presellsendstatrttime.getDate() + '日',\r\n        });\r\n      }\r\n      /*预售 end*/\r\n      /*评价start*/\r\n      if (result.goods.getComments > 0) {\r\n        core.get('goods/get_comments', { 'id': $this.data.options.id }, function (ret) {\r\n          $this.setData({\r\n            commentObj: ret,\r\n          });\r\n        })\r\n      }\r\n      /*评价end*/\r\n      /*全返*/\r\n      if (result.goods.fullbackgoods) {\r\n        $this.setData({ fullbackgoods: result.goods.fullbackgoods })\r\n      }\r\n\r\n      var fullbackgoods = $this.data.fullbackgoods;\r\n      if (fullbackgoods != undefined) {\r\n       \r\n        var maxfullbackratio = fullbackgoods.maxfullbackratio;\r\n        var maxallfullbackallratio = fullbackgoods.maxallfullbackallratio;\r\n        var maxfullbackratio = Math.round(maxfullbackratio);\r\n        var maxallfullbackallratio = Math.round(maxallfullbackallratio);\r\n        $this.setData({ maxfullbackratio: maxfullbackratio, maxallfullbackallratio: maxallfullbackallratio });\r\n      }\r\n\r\n      if(result.goods.type == 9){\r\n        $this.setData({ checkedDate: result.goods.nowDate});\r\n        $this.show_cycelbuydate();\r\n      }\r\n\r\n      if(result.goods.seckillinfo){\r\n          $this.initSeckill(result.goods);\r\n      }\r\n     \r\n    });\r\n  },\r\n\r\n    //秒杀时间初始化\r\n    initSeckill:function (goods){\r\n        var $this = this;\r\n        var status = parseInt(goods.seckillinfo.status);\r\n        var starttime = goods.seckillinfo.starttime;\r\n        var endtime = goods.seckillinfo.endtime;\r\n        if (status != -1) {\r\n            var lasttime = 0;\r\n            var timer = 0;\r\n            var approot=app.globalData.approot;\r\n            wx.request({url:approot+'map.json',\r\n                success: function(x) {\r\n                    var currenttime = new Date(x.header.Date) / 1000;\r\n                    if (status == 0) {\r\n                        lasttime = endtime - currenttime;\r\n                    } else {\r\n                        lasttime = starttime - currenttime;\r\n                    }\r\n                    $this.setData({lasttime: lasttime});\r\n                    clearInterval($this.data.timer);\r\n                    $this.setTimer(goods.seckillinfo);\r\n                    timer = $this.setTimerInterval(goods.seckillinfo);\r\n\r\n                    $this.setData({timer: timer});\r\n                }\r\n            })\r\n        }\r\n\r\n    },\r\n    setTimer: function (seckillinfo) {\r\n        var $this = this;\r\n        var lasttime=0;\r\n\r\n        //每十秒请求一次服务器，获取时间\r\n        if (seckillinfo.status != -1) {\r\n            if (parseInt($this.data.lasttime) % 10 == 0) {\r\n                var status = parseInt(seckillinfo.status);\r\n                var starttime = seckillinfo.starttime;\r\n                var endtime = seckillinfo.endtime;\r\n                if (status != -1) {\r\n                    var approot = app.globalData.approot;\r\n                    wx.request({\r\n                        url: approot + 'map.json',\r\n                        success: function (x) {\r\n                            var currenttime = new Date(x.header.Date) / 1000;\r\n                            if (status == 0) {\r\n                                lasttime = endtime - currenttime;\r\n                            } else {\r\n                                lasttime = starttime - currenttime;\r\n                            }\r\n                            $this.setData({lasttime: lasttime});\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        }\r\n\r\n        lasttime = parseInt($this.data.lasttime) - 1;\r\n        var times = $this.formatSeconds(lasttime);\r\n        $this.setData({lasttime: lasttime, hour: times.hour, min: times.min, sec: times.sec});\r\n        if (lasttime <= 0) {\r\n            $this.onLoad();\r\n        }\r\n    },\r\n    setTimerInterval: function (seckillinfo) {\r\n        var $this = this;\r\n        return setInterval(function () {\r\n            $this.setTimer(seckillinfo);\r\n        }, 1000);\r\n    },\r\n    formatSeconds: function (value) {\r\n        var theTime = parseInt(value);\r\n        var theTime1 = 0;\r\n        var theTime2 = 0;\r\n        if (theTime > 60) {\r\n            theTime1 = parseInt(theTime / 60);\r\n            theTime = parseInt(theTime % 60);\r\n            if (theTime1 > 60) {\r\n                theTime2 = parseInt(theTime1 / 60);\r\n                theTime1 = parseInt(theTime1 % 60)\r\n            }\r\n        }\r\n        return {\r\n            'hour': theTime2 < 10 ? '0' + theTime2 : theTime2,\r\n            'min': theTime1 < 10 ? '0' + theTime1 : theTime1,\r\n            'sec': theTime < 10 ? '0' + theTime : theTime\r\n        }\r\n    },\r\n\r\n  /*倒计时js start\r\n   timestart----开始时间\r\n   timeend----结束时间\r\n   type-------类型\r\n   */\r\n  countDown: function (timestart, timeend, type) {\r\n    var now = parseInt(Date.now() / 1000);\r\n    var endDate = timestart > now ? timestart : timeend;\r\n    var leftTime = endDate - now;\r\n    var leftsecond = parseInt(leftTime);\r\n    var day = Math.floor(leftsecond / (60 * 60 * 24));\r\n    var hour = Math.floor((leftsecond - day * 24 * 60 * 60) / 3600);\r\n    var minute = Math.floor((leftsecond - day * 24 * 60 * 60 - hour * 3600) / 60);\r\n    var second = Math.floor(leftsecond - day * 24 * 60 * 60 - hour * 3600 - minute * 60);\r\n    var time = [day, hour, minute, second]\r\n    this.setData({\r\n      time: time\r\n    });\r\n    if (type = 'istime') {\r\n      var istimeTitle = '';\r\n      if (timestart > now) {\r\n        istimeTitle = '距离限时购开始';\r\n      } else if (timestart <= now && timeend > now) {\r\n        istimeTitle = '距离限时购结束';\r\n      } else {\r\n        istimeTitle = '活动已经结束，下次早点来~';\r\n        this.setData({ istime: 0 });\r\n      }\r\n      this.setData({ istimeTitle: istimeTitle });\r\n    }\r\n  },\r\n  //不配送区域picker\r\n  cityPicker: function (event) {\r\n    var $this = this;\r\n    var active = event.currentTarget.dataset.tap;\r\n    wx.navigateTo({\r\n      url: '/pages/goods/region/index?id=' + $this.data.goods.id + '&region=' + $this.data.goods.citys.citys + '&onlysent=' + $this.data.goods.citys.onlysent,\r\n    });\r\n  },\r\n  //赠品弹层\r\n  giftPicker: function () {\r\n    this.setData({\r\n      active: 'active',\r\n      gift: true\r\n    })\r\n  },\r\n  //优惠券picker\r\n  couponPicker: function () {\r\n    this.setData({\r\n      active: 'active',\r\n      showcoupon: true\r\n    })\r\n  },\r\n  couponrecived: function (e) {\r\n    var id = e.currentTarget.dataset.id\r\n    var $this = this\r\n    core.post('goods.pay_coupon', { id: id }, function (result) {\r\n     \r\n      if (result.error == 0) {\r\n        $this.setData({\r\n          showcoupon: false,\r\n          active: ''\r\n        })\r\n        foxui.toast($this, \"已领取\");\r\n      } else {\r\n        foxui.toast($this, result.message);\r\n      }\r\n    });\r\n  },\r\n  // 购买picker\r\n  selectPicker: function (e) {\r\n    app.checkAuth();\r\n    var $this = this;\r\n    var timeType = e.currentTarget.dataset.time;\r\n    var timeOut = e.currentTarget.dataset.timeout;\r\n    var limits = $this.data.limits;\r\n    if (!limits) {\r\n      // $this.setData({ modelShow: true })\r\n      return\r\n    }\r\n   \r\n    if (timeType == 'timeout' || timeType == 'access_time'){\r\n      if (timeOut == 'false'){\r\n        $this.setData({ goods_hint_show: true });\r\n        return;\r\n      } else if (timeOut == 'true'){\r\n        if (timeType == 'access_time') {\r\n          $this.setData({ goods_hint_show: false });\r\n          var goodslist = 'goodsdetail';\r\n          goodspicker.selectpicker(e, $this, goodslist)\r\n          return;\r\n        }\r\n        if (timeType == 'timeout') {\r\n          $this.setData({ goods_hint_show: false });\r\n          return;\r\n        }\r\n      }\r\n    }\r\n   \r\n    var goodslist = 'goodsdetail';\r\n    goodspicker.selectpicker(e, $this, goodslist)\r\n  },\r\n  // 选规格\r\n  specsTap: function (event) {\r\n    var $this = this\r\n    goodspicker.specsTap(event, $this)\r\n  },\r\n  //关闭pickerpicker\r\n  emptyActive: function () {\r\n    this.setData({\r\n      active: '', slider: 'out', tempname: '', showcoupon: false, gift: false, cycledate: false\r\n    });\r\n  },\r\n  // 立即购买\r\n  buyNow: function (event) {\r\n    var $this = this\r\n    goodspicker.buyNow(event, $this, \"goods_detail\")\r\n  },\r\n  //加入购物车\r\n  getCart: function (event) {\r\n    var $this = this\r\n    goodspicker.getCart(event, $this)\r\n  },\r\n  select: function () {\r\n    var $this = this;\r\n    var optionid = $this.data.optionid;\r\n    var diydata = $this.data.diyform;\r\n    //是否有规格\r\n    if (hasOption > 0 && optionid == 0) {\r\n      foxui.toast($this, \"请选择规格\");\r\n      return;\r\n    }\r\n    this.setData({ active: '', slider: 'out', isSelected: true, tempname: '' });\r\n  },\r\n  //数量输入绑定事件\r\n  inputNumber: function (e) {\r\n    var $this = this\r\n    goodspicker.inputNumber(e, $this)\r\n  },\r\n  number: function (e) {\r\n    var $this = this\r\n    goodspicker.number(e, $this)\r\n  },\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n    $this.setData({\r\n      imgUrl: app.globalData.approot\r\n    });\r\n    core.get('black', {}, function (res) {\r\n      if (res.isblack) {\r\n        wx.showModal({\r\n          title: '无法访问',\r\n          content: '您在商城的黑名单中，无权访问！',\r\n          success: function (res) {\r\n            if (res.confirm) {\r\n              this.close()\r\n            }\r\n            if (res.cancel) {\r\n              this.close()\r\n            }\r\n          }\r\n        })\r\n      }\r\n    });\r\n\r\n    diypage.get(this, 'goodsdetail', function (res) {\r\n      var diypage = res.diypage.items;\r\n      for (var i in diypage){\r\n        if (diypage[i].id == 'copyright' ){\r\n          $this.setData({ copyright: diypage[i]})\r\n        }\r\n      }\r\n\r\n    });\r\n    options = options || {};\r\n    // 处理扫码scene\r\n    var scene = decodeURIComponent(options.scene);\r\n    if (!options.id && scene) {\r\n      var sceneObj = core.str2Obj(scene);\r\n      options.id = sceneObj.id;\r\n      if (sceneObj.mid) {\r\n        options.mid = sceneObj.mid;\r\n      }\r\n    }\r\n    this.setData({ id: options.id });\r\n    app.url(options);\r\n   \r\n    wx.getSystemInfo({\r\n      success: function (result) {\r\n        $this.setData({\r\n          windowWidth: result.windowWidth,\r\n          windowHeight: result.windowHeight\r\n        });\r\n      }\r\n    });\r\n    $this.getDetail(options);\r\n    $this.setData({\r\n      uid: options.id,\r\n      options: options,\r\n      success: true,\r\n      cover: true,\r\n      showvideo: true\r\n    });\r\n    wx.getSystemInfo({\r\n      success: function (result) {\r\n        $this.setData({\r\n          advWidth: result.windowWidth\r\n        });\r\n      }\r\n    });\r\n    setTimeout(function () {\r\n      $this.setData({ areas: app.getCache(\"cacheset\").areas });\r\n    }, 3000)\r\n  },\r\n\r\n  show_cycelbuydate: function () {\r\n    var $this = this;\r\n    /*周期购时间选择器初始化*/\r\n    var currentObj = selectdate.getCurrentDayString(this, $this.data.showDate);\r\n    var week = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\r\n    $this.setData({\r\n      currentObj: currentObj,\r\n      currentDate: currentObj.getFullYear() + '年' + (currentObj.getMonth() + 1) + '月' + currentObj.getDate() + '日 ' + week[currentObj.getDay()],\r\n      currentYear: currentObj.getFullYear(),\r\n      currentMonth: (currentObj.getMonth() + 1),\r\n      currentDay: currentObj.getDate(),\r\n      initDate: Date.parse(currentObj.getFullYear() + '/' + (currentObj.getMonth() + 1) + '/' + currentObj.getDate()),\r\n      checkedDate: Date.parse(currentObj.getFullYear() + '/' + (currentObj.getMonth() + 1) + '/' + currentObj.getDate()),\r\n      maxday: $this.data.scope,//可选的天数\r\n    })\r\n  },\r\n  \r\n  package: function () {\r\n    var $this = this;\r\n    core.get('package.get_list', { goodsid: this.data.packagegoodsid }, function (result) {\r\n      \r\n      $this.setData({\r\n        packageList: result.list[0]\r\n      })\r\n    });\r\n  },\r\n  onShow: function () {\r\n    this.setData({ isgoods: app.globalData.isgoods });\r\n var $this = this;\r\n    // var specs = [];\r\n    // var options = [];\r\n    var isIpx = app.getCache('isIpx');\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: ''\r\n      })\r\n    }\r\n    wx.getStorage({\r\n      key: 'mydata',\r\n      success: function (res) {\r\n        wx.removeStorage({\r\n          key: 'mydata',\r\n          success: function (res) {\r\n          }\r\n        })\r\n        $this.getDetail(res.data);\r\n        wx.pageScrollTo({\r\n          scrollTop: 0\r\n        })\r\n      }\r\n    })\r\n    /*获取授权*/\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        $this.setData({ limits: limits })\r\n      }\r\n    })\r\n  },\r\n  onChange: function (e) {\r\n    return diyform.onChange(this, e)\r\n  },\r\n  DiyFormHandler: function (e) {\r\n    return diyform.DiyFormHandler(this, e)\r\n  },\r\n  selectArea: function (e) {\r\n    return diyform.selectArea(this, e)\r\n  },\r\n  bindChange: function (e) {\r\n    return diyform.bindChange(this, e)\r\n  },\r\n  onCancel: function (e) {\r\n    return diyform.onCancel(this, e)\r\n  },\r\n  onConfirm: function (e) {\r\n    return diyform.onConfirm(this, e)\r\n  },\r\n  getIndex: function (str, areas) {\r\n    return diyform.getIndex(str, areas)\r\n  },\r\n  onShareAppMessage: function () {\r\n    this.setData({ closeBtn: false });\r\n    return core.onShareAppMessage('/pages/goods/detail/index?id=' + this.data.options.id, this.data.goods.title);\r\n  },\r\n  showpic: function () {\r\n    this.setData({\r\n      showpic: true,\r\n      cover: false,\r\n      showvideo: false\r\n    });\r\n    this.videoContext = wx.createVideoContext('myVideo');\r\n    this.videoContext.pause()\r\n  },\r\n  showvideo: function () {\r\n    this.setData({\r\n      showpic: false,\r\n      showvideo: true\r\n    });\r\n    this.videoContext = wx.createVideoContext('myVideo');\r\n    this.videoContext.play()\r\n  },\r\n  startplay: function () {\r\n    this.setData({\r\n      cover: false\r\n    });\r\n    this.videoContext = wx.createVideoContext('myVideo');\r\n    this.videoContext.play()\r\n  },\r\n  bindfullscreenchange: function (e) {\r\n    if (e.detail.fullScreen == true) {\r\n      this.setData({\r\n        success: false,\r\n      });\r\n    } else {\r\n      this.setData({\r\n        success: true,\r\n      });\r\n    }\r\n  },\r\n  phone: function () {\r\n    var phoneNumber = this.data.phonenumber + ''\r\n    wx.makePhoneCall({\r\n      phoneNumber: phoneNumber\r\n    })\r\n  },\r\n  /*分享生成海报*/\r\n  sharePoster: function () {\r\n    wx.navigateTo({\r\n      url: '/pages/goods/poster/poster?id=' + this.data.uid\r\n    })\r\n  },\r\n  /*分享弹层上的关闭*/\r\n  closeBtn: function () {\r\n    this.setData({ closeBtn: false })\r\n  },\r\n  onHide: function () {\r\n    this.setData({ closeBtn: false })\r\n  },\r\n  /*点击分享*/\r\n  showshade: function () {\r\n    app.checkAuth();\r\n    this.setData({ closeBtn: true })\r\n  },\r\n  nav: function () {\r\n    this.setData({ nav_mask: !this.data.nav_mask })\r\n  },\r\n  nav2: function () {\r\n    this.setData({ nav_mask2: !this.data.nav_mask2 })\r\n  },\r\n  changevoice: function () {\r\n    if (this.data.sound) {\r\n      this.setData({\r\n        sound: false,\r\n        soundpic: true\r\n      })\r\n    } else {\r\n      this.setData({\r\n        sound: true,\r\n        soundpic: false\r\n      })\r\n    }\r\n  },\r\n  radioChange: function (e) {\r\n    this.setData({\r\n      giftid: e.currentTarget.dataset.giftgoodsid,\r\n      gift_title: e.currentTarget.dataset.title,\r\n    })\r\n  },\r\n\r\n  /*活动弹层*/\r\n  activityPicker: function () {\r\n    var $this = this;\r\n    $this.setData({ fadein: 'in' })\r\n  },\r\n  actOutPicker: function () {\r\n    var $this = this;\r\n    $this.setData({ fadein: '' })\r\n  },\r\n  /*顶部提示授权*/\r\n  hintclick: function () {\r\n    wx.openSetting({\r\n      success: function (res) { }\r\n    })\r\n  },\r\n\r\n  /*用户授权-取消*/\r\n  cancelclick: function () {\r\n    this.setData({ modelShow: false })\r\n  },\r\n  /*用户授权-去设置*/\r\n  confirmclick: function () {\r\n    this.setData({ modelShow: false })\r\n    wx.openSetting({\r\n      success: function (res) { }\r\n    })\r\n  },\r\n  /*同城配送*/\r\n  sendclick: function () {\r\n    wx.navigateTo({\r\n      url: '/pages/map/index'\r\n    });\r\n  },\r\n\r\n  // 取消时间选择时间\r\n  syclecancle: function () {\r\n    this.setData({\r\n      cycledate: false\r\n    });\r\n  },\r\n  //确定选择时间\r\n  sycleconfirm: function () {\r\n    this.setData({\r\n      cycledate: false\r\n    });\r\n  },\r\n  // 周期购 修改送达时间\r\n  editdate: function (e) {\r\n    selectdate.setSchedule(this);\r\n    this.setData({\r\n      cycledate: true\r\n    });\r\n  },\r\n\r\n    //时间选择器 前后月份选择\r\n    doDay: function (e) {\r\n    selectdate.doDay(e,this);\r\n    },\r\n    //周期购选择时间\r\n    selectDay: function (e) {\r\n        selectdate.selectDay(e,this);\r\n        selectdate.setSchedule(this);\r\n    },\r\n\r\n\r\n  play: function (e) {\r\n    var item_id = e.target.dataset.id;\r\n    var innerAudioContext = this.data.audiosObj[item_id] || false;\r\n    if (!innerAudioContext) {\r\n      innerAudioContext = wx.createInnerAudioContext('audio_' + item_id);\r\n      var audiosObj = this.data.audiosObj;\r\n      audiosObj[item_id] = innerAudioContext;\r\n      this.setData({\r\n        audiosObj: audiosObj\r\n      })\r\n    }\r\n    var $this = this;\r\n    innerAudioContext.onPlay(() => {\r\n      var Time = setInterval(function () {\r\n        var width = innerAudioContext.currentTime / innerAudioContext.duration * 100 + '%';\r\n        var minute = Math.floor(Math.ceil(innerAudioContext.currentTime) / 60);  //分\r\n        var second = (Math.ceil(innerAudioContext.currentTime) % 60 / 100).toFixed(2).slice(-2); //秒\r\n        var seconds = Math.ceil(innerAudioContext.currentTime)\r\n        var audioicon = ''\r\n        if (minute < 10) {\r\n          minute = \"0\" + minute;\r\n        }\r\n        var time = minute + \":\" + second;\r\n        var audios = $this.data.audios;\r\n        audios[item_id].audiowidth = width;\r\n        audios[item_id].Time = Time;\r\n        audios[item_id].audiotime = time;\r\n        audios[item_id].seconds = seconds;\r\n        $this.setData({ audios: audios })\r\n      }, 1000)\r\n    })\r\n\r\n    var src = e.currentTarget.dataset.audio;\r\n    var time = e.currentTarget.dataset.time;\r\n    var pausestop = e.currentTarget.dataset.pausestop;\r\n    var loopplay = e.currentTarget.dataset.loopplay;\r\n    if (loopplay == 0) {\r\n      innerAudioContext.onEnded((res) => {\r\n        audios[item_id].status = false;\r\n        $this.setData({ audios: audios })\r\n      })\r\n    }\r\n    var audios = $this.data.audios;\r\n\r\n    if (!audios[item_id]) {\r\n      audios[item_id] = {};\r\n    }\r\n    if (innerAudioContext.paused && time == 0) {\r\n      innerAudioContext.src = src;\r\n      innerAudioContext.play();\r\n      if (loopplay == 1) {\r\n        innerAudioContext.loop = true;\r\n      }\r\n      audios[item_id].status = true;\r\n      $this.pauseOther(item_id)\r\n\r\n    } else if (innerAudioContext.paused && time > 0) {\r\n      innerAudioContext.play();\r\n      if (pausestop == 0) {\r\n        innerAudioContext.seek(time);\r\n      } else {\r\n        innerAudioContext.seek(0);\r\n      }\r\n      audios[item_id].status = true;\r\n      $this.pauseOther(item_id)\r\n    }\r\n    else {\r\n      innerAudioContext.pause();\r\n      audios[item_id].status = false;\r\n    }\r\n    $this.setData({ audios: audios })\r\n  },\r\n  pauseOther: function (item_id) {\r\n    var $this = this;\r\n    $.each(this.data.audiosObj, function (id, obj) {\r\n      if (id == item_id) {\r\n        return;\r\n      }\r\n      obj.pause();\r\n      var audios = $this.data.audios;\r\n      if (audios[id]) {\r\n        audios[id].status = false;\r\n        $this.setData({ audios: audios });\r\n      }\r\n    });\r\n  },\r\n  /**\r\n * 生命周期函数--监听页面隐藏\r\n */\r\n  onHide: function () {\r\n    this.pauseOther();\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n    this.pauseOther();\r\n  },\r\n  navigate: function (e) {\r\n    var url = e.currentTarget.dataset.url\r\n    var phone = e.currentTarget.dataset.phone\r\n    var appid = e.currentTarget.dataset.appid\r\n    var appurl = e.currentTarget.dataset.appurl\r\n    if (url) {\r\n      wx.navigateTo({\r\n        url: url,\r\n        fail: function () {\r\n          wx.switchTab({\r\n            url: url,\r\n          })\r\n        }\r\n      })\r\n    }\r\n    if (phone) {\r\n      wx.makePhoneCall({\r\n        phoneNumber: phone\r\n      })\r\n    }\r\n    if (appid) {\r\n      wx.navigateToMiniProgram({\r\n        appId: appid,\r\n        path: appurl\r\n      })\r\n    }\r\n  },\r\n  close: function () {\r\n    app.globalData.flag = true;\r\n    wx.reLaunch({\r\n      url: '../index/index',\r\n    })\r\n  },\r\n});","/**\r\n *\r\n * package\\index.js\r\n *\r\n * @create 2017-11-22\r\n * @author 牟俊羽\r\n *\r\n */\r\n  var app = getApp();\r\n  var core = app.requirejs('core');\r\n  var icons = app.requirejs('icons');\r\n  var $ = app.requirejs('jquery');\r\n  Page({\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    show:true\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    var $this =this;\r\n    core.get('package.get_list', { goodsid: options.id }, function (result) {\r\n      \r\n      $this.setData({\r\n        list: result.list\r\n      })\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  }\r\n})","/**\r\n *\r\n * detail\\index.js\r\n *\r\n * @create 2017-11-22\r\n * @author 牟俊羽\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons');\r\nvar $ = app.requirejs('jquery');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    show: true,\r\n    option_mask:false\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    var $this =this;\r\n    $this.setData({\r\n      pid: options.id\r\n    })\r\n    core.get('package.get_detail', { pid: options.id }, function (result) {\r\n      var packgoods = result.packgoods;\r\n      var good=[];\r\n      wx.setNavigationBarTitle({\r\n        title: result.package.title || '套餐'\r\n      });\r\n      for (var i = 0; i < packgoods.length;i++){\r\n        if (packgoods[i].option==\"\"){\r\n          good[i] = { goodsid: packgoods[i].goodsid, optionid: '' }\r\n\r\n        }else{\r\n          good[i] = { goodsid: packgoods[i].goodsid, optionid: null }\r\n        }\r\n      }\r\n    \r\n      $this.setData({\r\n        packgoods:packgoods,\r\n        package: result.package,\r\n        good: good\r\n      })\r\n    });\r\n  },\r\n  option:function(e){\r\n    var $this = this;\r\n\r\n    var goodsid = e.currentTarget.dataset.goodsid;\r\n    var index = e.currentTarget.dataset.index;\r\n    core.get('package.get_option', { pid: $this.data.pid, goodsid: goodsid}, function (result) {\r\n      $this.setData({\r\n        option_mask:true,\r\n        option: result.option,\r\n        index: index\r\n      })\r\n    });\r\n  },\r\n  back: function (e) {\r\n    var $this = this;\r\n    wx.setStorage({\r\n      key: \"mydata\",\r\n      data: {id:e.currentTarget.dataset.id},\r\n      success: function () {\r\n        wx.navigateBack();   //返回上一个页面\r\n      }\r\n    })\r\n  },\r\n  close:function(){\r\n    this.setData({\r\n      option_mask:false\r\n    })\r\n  },\r\n  choose: function (e) {\r\n    var optionid = e.currentTarget.dataset.optionid;\r\n    var option_title = e.currentTarget.dataset.title;\r\n    var index = e.currentTarget.dataset.index;//option下标\r\n    var packgoods = this.data.packgoods;\r\n    var packageprice = this.data.option[index].packageprice;//所选option价格\r\n    packgoods[this.data.index].packageprice = packageprice;//所选option价格替换商品价格\r\n    var sum =0;//套餐价格\r\n    \r\n    for (var i = 0; i < packgoods.length;i++){\r\n      sum += packgoods[i].packageprice*1\r\n    }\r\n   \r\n    this.setData({\r\n      option_active: optionid,\r\n      option_title: option_title,\r\n      sum: sum\r\n    })\r\n  },\r\n  confirm: function (){\r\n    var packgoods = this.data.packgoods;\r\n    var index = this.data.index;\r\n    var option_active = this.data.option_active;\r\n    var option_title = this.data.option_title;\r\n    var good = this.data.good;\r\n    packgoods[index].optionname = option_title;\r\n    good[index].optionid = option_active;\r\n    this.setData({\r\n      option_mask: false,\r\n      packgoods: packgoods,\r\n      good: good\r\n    })\r\n  },\r\n  buy:function(){\r\n    var $this = this;\r\n    var good = this.data.good;\r\n  \r\n    var all=true;\r\n    for(var i=0;i<good.length;i++){\r\n      if (good[i].optionid == null){\r\n        all=false\r\n      }\r\n    }\r\n    if(!all){\r\n      foxui.toast(this, '请选择规格！')\r\n    }else{\r\n      good = JSON.stringify(good);\r\n      wx.redirectTo({\r\n        url: '/pages/order/create/index?packageid=' + $this.data.package.id + '&goods=' + good,\r\n      });\r\n    }\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  }\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n    data: {\r\n        show: false,\r\n        accredit: '',\r\n        errMsg: '',\r\n        Image: ''\r\n    },\r\n\r\n    onLoad: function (options) {\r\n        options = options || {};\r\n        if (!options.id) {\r\n            wx.redirectTo({\r\n                url: '/pages/goods/index/index'\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.getImage(options.id);\r\n    },\r\n\r\n    // 获取图片\r\n    getImage: function (goodsid) {\r\n        var $this = this;\r\n        core.json('goods/poster/getimage', {\r\n            id: goodsid\r\n        }, function (ret) {\r\n           \r\n            if(ret.error==0){\r\n                $this.setData({\r\n                    Image: ret.url\r\n                });\r\n                return;\r\n            }\r\n            foxui.toast($this, ret.message);\r\n        });\r\n    },\r\n\r\n    loadImg: function (e) {\r\n        this.setData({\r\n            show: true\r\n        });\r\n    },\r\n\r\n    // 预览图片\r\n    previewImage: function(){\r\n        var $this = this;\r\n        wx.previewImage({\r\n            current: $this.data.Image,\r\n            urls: [$this.data.Image]\r\n        })\r\n    },\r\n\r\n    // 保存图片\r\n    savePicture: function () {\r\n        var $this = this;\r\n        wx.getSetting({\r\n            success: function (res) {\r\n                var accredit = res.authSetting['scope.writePhotosAlbum']\r\n                if (accredit) {\r\n                    wx.showLoading({\r\n                        title: '图片下载中...',\r\n                    });\r\n                    setTimeout(function () {\r\n                        wx.hideLoading()\r\n                    }, 1000)\r\n                    wx.downloadFile({\r\n                        url: $this.data.Image,\r\n                        success: function (res) {\r\n                            wx.saveImageToPhotosAlbum({\r\n                                filePath: res.tempFilePath,\r\n                                success: function (ret) {\r\n                                    foxui.toast($this, \"保存图片成功\");\r\n                                },\r\n                                fail: function (ret) {\r\n                                    $this.setData({errMsg: ret.errMsg})\r\n                                    foxui.toast($this, \"保存图片失败\");\r\n                                }\r\n                            })\r\n                        }\r\n                    })\r\n                } else {\r\n                    wx.authorize({\r\n                        scope: 'scope.writePhotosAlbum',\r\n                        success:function(){\r\n                          wx.showLoading({\r\n                            title: '图片下载中...',\r\n                          });\r\n                          setTimeout(function () {\r\n                            wx.hideLoading()\r\n                          }, 1000)\r\n                          wx.downloadFile({\r\n                            url: $this.data.Image,\r\n                            success: function (res) {\r\n                              wx.saveImageToPhotosAlbum({\r\n                                filePath: res.tempFilePath,\r\n                                success: function (ret) {\r\n                                  foxui.toast($this, \"保存图片成功\");\r\n                                },\r\n                                fail: function (ret) {\r\n                                  $this.setData({ errMsg: ret.errMsg })\r\n                                  foxui.toast($this, \"保存图片失败\");\r\n                                }\r\n                              })\r\n                            }\r\n                          })\r\n                        },\r\n                        fail: function () {\r\n                            /*获取权限时点击了拒绝以后的弹窗*/\r\n                            wx.showModal({\r\n                                title: '警告',\r\n                                content: '您点击了拒绝授权，将无法正常使用保存图片或视频的功能体验，请删除小程序重新进入。'\r\n                            })\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n});","/**\r\n *\r\n * order/index.js\r\n *\r\n * @create 2017-1-15\r\n * @author Young\r\n *\r\n * @update  Young 2017-02-04\r\n *\r\n */\r\nvar app = getApp(), \r\ncore = app.requirejs('core'),\r\norder = app.requirejs('biz/order');\r\nPage({\r\n    data: {\r\n        icons: app.requirejs('icons'),\r\n        status: '',\r\n        list:[],\r\n        page:1,\r\n        code: false,\r\n        cancel:order.cancelArray,\r\n        cancelindex:0,\r\n      can_sync_goodscircle:false\r\n    },\r\n    onLoad: function (options) {\r\n        app.checkAuth();\r\n        // 页面初始化 options为页面跳转所带来的参数\r\n        this.setData({\r\n            options: options,\r\n            status: options.status || '',\r\n          imgUrl: app.globalData.approot\r\n        });\r\n        app.url(options);\r\n        this.get_list();\r\n    },\r\n    get_list: function () {\r\n        var $this = this;\r\n      \r\n      $this.setData({ loading: true, isgoods: app.globalData.isgoods });\r\n        core.get('order/get_list', {page: $this.data.page, status: $this.data.status, merchid: 0}, function (list) {\r\n            if (list.error==0){\r\n              $this.setData({ loading: false, show: true, total: list.total, empty: true, can_sync_goodscircle: list.can_sync_goodscircle});\r\n                if(list.list.length>0){\r\n                    $this.setData({\r\n                        page: $this.data.page+1,\r\n                        list: $this.data.list.concat(list.list)\r\n                    });\r\n                }\r\n                if(list.list.length<list.pagesize) {\r\n                    $this.setData({\r\n                        loaded: true\r\n                    });\r\n                }\r\n            }else{\r\n                core.toast(list.message,'loading')\r\n            }\r\n        },this.data.show);\r\n    },\r\n    selected: function (e) {\r\n        var status = core.data(e).type;\r\n        this.setData({\r\n            list:[],\r\n            page:1,\r\n            status: status,\r\n            empty: false\r\n        });\r\n        this.get_list();\r\n    },\r\n    onReachBottom:function(){\r\n        if (this.data.loaded || this.data.list.length==this.data.total) {\r\n            return;\r\n        }\r\n        this.get_list();\r\n    },\r\n    code: function (e) {\r\n        var $this=this,orderid=core.data(e).orderid;\r\n        core.post('verify/qrcode',{id:orderid},function (json) {\r\n            if (json.error==0){\r\n                $this.setData({\r\n                    code: true,\r\n                    qrcode: json.url\r\n                })\r\n            }else{\r\n                core.alert(json.message);\r\n            }\r\n        },true);\r\n    },\r\n    close: function () {\r\n        this.setData({\r\n            code: false\r\n        })\r\n    },\r\n    cancel:function (e) {\r\n        var orderid = core.data(e).orderid;\r\n        order.cancel(orderid,e.detail.value,'/pages/order/index?status='+this.data.status);\r\n    },\r\n    delete:function (e) {\r\n        var type = core.data(e).type,orderid = core.data(e).orderid;\r\n        order.delete(orderid,type,'/pages/order/index',this);\r\n    },\r\n    finish:function (e) {\r\n        var type = core.data(e).type,orderid = core.data(e).orderid;;\r\n        order.finish(orderid,'/pages/order/index');\r\n    },\r\n    onShareAppMessage: function () {\r\n        return core.onShareAppMessage();\r\n    }\r\n});","/**\r\n *\r\n * order/detail/index.js\r\n *\r\n * @create 2017-1-12\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),core=app.requirejs('core'),order = app.requirejs('biz/order');\r\nPage({\r\n    data: {\r\n        code: false,\r\n        consume: false,\r\n        store: false,\r\n        cancel:order.cancelArray,\r\n        cancelindex:0,\r\n        diyshow:{},\r\n        city_express_state: 0\r\n    },\r\n    onLoad: function (options) {\r\n        // 页面初始化 options为页面跳转所带来的参数\r\n        this.setData({\r\n            options: options\r\n        });\r\n        app.url(options);\r\n    },\r\n    onShow:function () {\r\n        this.get_list();\r\n        var $this = this;\r\n        var isIpx = app.getCache('isIpx');\r\n        if (isIpx) {\r\n          $this.setData({\r\n            isIpx: true,\r\n            iphonexnavbar: 'fui-iphonex-navbar',\r\n            paddingb: 'padding-b'\r\n          })\r\n        } else {\r\n          $this.setData({\r\n            isIpx: false,\r\n            iphonexnavbar: '',\r\n            paddingb: ''\r\n          })\r\n        }\r\n    },\r\n    get_list: function () {\r\n        var $this = this;\r\n        core.get('order/detail', $this.data.options, function (list) {\r\n          if (list.error>0){\r\n            if (list.error != 50000) {\r\n              core.toast(list.message, 'loading');\r\n            }\r\n            wx.redirectTo({\r\n              url: '/pages/order/index'\r\n            })\r\n          }\r\n            if(list.nogift[0].fullbackgoods != undefined ){\r\n            \tvar fullbackratio = list.nogift[0].fullbackgoods.fullbackratio;\r\n\t       \t\tvar maxallfullbackallratio = list.nogift[0].fullbackgoods.maxallfullbackallratio;\r\n\t       \t\tvar fullbackratio = Math.round(fullbackratio);\r\n\t       \t\tvar maxallfullbackallratio = Math.round(maxallfullbackallratio);\r\n            }\r\n\t\t\t\r\n            if (list.error==0){\r\n                list.show = true;\r\n                var ordervirtualtype = Array.isArray(list.ordervirtual);\r\n                $this.setData(list);\r\n                $this.setData({ ordervirtualtype: ordervirtualtype, fullbackgoods: list.nogift[0].fullbackgoods, maxallfullbackallratio: maxallfullbackallratio, fullbackratio: fullbackratio, invoice: list.order.invoicename, membercard_info: list.membercard_info })\r\n            }\r\n        });\r\n    },\r\n    more:function(){\r\n      this.setData({all:true})\r\n    },\r\n    code: function (e) {\r\n        var $this=this,orderid=core.data(e).orderid;\r\n        core.post('verify/qrcode',{id:orderid},function (json) {\r\n            if (json.error==0){\r\n                $this.setData({\r\n                    code: true,\r\n                    qrcode: json.url\r\n                })\r\n            }else{\r\n                core.alert(json.message);\r\n            }\r\n        },true);\r\n    },\r\n    diyshow: function (e) {\r\n        var diyshow=this.data.diyshow,goodsid=core.data(e).id;\r\n        diyshow[goodsid] = !diyshow[goodsid];\r\n        this.setData({\r\n            diyshow:diyshow\r\n        });\r\n    },\r\n    close: function () {\r\n        this.setData({\r\n            code: false,\r\n        })\r\n    },\r\n    toggle: function (e) {\r\n        var data = core.pdata(e),id=data.id,type=data.type,d={};\r\n        (id == 0 || typeof id =='undefined') ? d[type] = 1 : d[type] = 0;\r\n        this.setData(d);\r\n    },\r\n    phone:function(e){\r\n        core.phone(e);\r\n    },\r\n    cancel:function (e) {\r\n        order.cancel(this.data.options.id,e.detail.value,'/pages/order/detail/index?id='+this.data.options.id);\r\n    },\r\n    delete:function (e) {\r\n        var type = core.data(e).type;\r\n        order.delete(this.data.options.id,type,'/pages/order/index');\r\n    },\r\n    finish:function (e) {\r\n        order.finish(this.data.options.id,'/pages/order/index');\r\n    },\r\n    refundcancel:function (e) {\r\n        var $this = this;\r\n        order.refundcancel(this.data.options.id,function () {\r\n            $this.get_list();\r\n        });\r\n    },\r\n    onShareAppMessage: function () {\r\n        return core.onShareAppMessage();\r\n    }\r\n})","/**\r\n *\r\n * order/express/index.js\r\n *\r\n * @create 2017-1-16\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),core=app.requirejs('core');\r\nPage({\r\n    data: {},\r\n    onLoad: function (options) {\r\n        // 页面初始化 options为页面跳转所带来的参数\r\n        this.setData({\r\n            options: options\r\n        });\r\n        app.url(options);\r\n        this.get_list();\r\n    },\r\n    get_list:function () {\r\n        var $this = this;\r\n        core.get('order/express', $this.data.options, function (list) {\r\n            if (list.error==0){\r\n                list.show = true;\r\n                $this.setData(list);\r\n            }else{\r\n                core.toast(list.message,'loading')\r\n            }\r\n        });\r\n    }\r\n});","/**\r\n *\r\n * order/common/index.js\r\n *\r\n * @create 2017-1-16\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),\r\ncore=app.requirejs('core');\r\nPage({\r\n    data: {\r\n      stars_class: ['text-default', 'text-primary', 'text-success', 'text-warning', 'text-danger'],\r\n        stars_text: ['差评', '一般', '挺好', '满意', '非常满意'],\r\n        normalSrc: 'icox icox-star',\r\n        selectedSrc: 'icox icox-xing selected',\r\n        key: -1,\r\n        content: '',\r\n        images:[],\r\n        imgs:[]\r\n    },\r\n    onLoad: function (options) {\r\n        // 页面初始化 options为页面跳转所带来的参数\r\n        this.setData({\r\n            options: options\r\n        });\r\n        app.url(options);\r\n        this.get_list();\r\n    },\r\n    get_list: function () {\r\n        var $this = this;\r\n        core.get('order/comment', $this.data.options, function (list) {\r\n            if (list.error == 0) {\r\n                list.show = true;\r\n                $this.setData(list);\r\n            } else {\r\n                core.toast(list.message, 'loading');\r\n                wx.navigateBack();\r\n            }\r\n        }, true);\r\n    },\r\n    select: function (e) {\r\n        var key = e.currentTarget.dataset.key;\r\n        this.setData({\r\n            key: key\r\n        });\r\n    },\r\n    change:function (e) {\r\n        var name=core.data(e).name,data={};\r\n        data[name] = e.detail.value;\r\n        this.setData(data);\r\n    },\r\n    submit:function () {\r\n        var $this = this,data = {\r\n            orderid:this.data.options.id,\r\n            comments:[]\r\n        };\r\n        if (this.data.content == '' || this.data.key==-1){\r\n            core.alert('有未填写项目!')\r\n            return false;\r\n        }\r\n        for(var i=0,len=this.data.goods.length;i<len;i++){\r\n            var g = {\r\n                goodsid:this.data.goods[i].goodsid,\r\n                level:this.data.key+1,\r\n                content:this.data.content,\r\n                images:this.data.images\r\n            };\r\n            data.comments.push(g);\r\n        }\r\n        core.post('order/comment/submit', data, function (list) {\r\n            if (list.error != 0) {\r\n                core.toast(list.message, 'loading')\r\n            }\r\n            wx.navigateBack()\r\n        },true);\r\n    },\r\n    upload: function (e) {\r\n        var $this=this,dataset = core.data(e),type = dataset.type,images=$this.data.images,imgs=$this.data.imgs,index=dataset.index;\r\n        if(type=='image'){\r\n            core.upload(function(file){\r\n                images.push(file.filename);\r\n                imgs.push(file.url);\r\n                $this.setData({\r\n                    images:images,\r\n                    imgs:imgs\r\n                })\r\n            });\r\n        }else if(type=='image-remove'){\r\n            images.splice(index,1);\r\n            imgs.splice(index,1);\r\n            $this.setData({\r\n                images:images,\r\n                imgs:imgs\r\n            })\r\n        }else if(type=='image-preview'){\r\n            wx.previewImage({\r\n                current: imgs[index],\r\n                urls: imgs\r\n            })\r\n        }\r\n    }\r\n});\r\n","/**\r\n *\r\n * order/detail/index.js\r\n *\r\n * @create 2017-1-16\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),core=app.requirejs('core'),order = app.requirejs('biz/order');;\r\nPage({\r\n    data: {\r\n        code:1,\r\n        tempFilePaths: '',\r\n        delete: '',\r\n        rtypeArr: ['退款(仅退款不退货)','退货退款','换货'],\r\n        rtypeArrText: ['退款','退款','换货'],\r\n        rtypeIndex: 1,\r\n        reasonArr: ['不想要了','卖家缺货','拍错了/订单信息错误','其它'],\r\n        reasonIndex:0,\r\n        images:[]\r\n    },\r\n    onLoad: function (options) {\r\n        this.setData({\r\n            options: options\r\n        });\r\n        app.url(options);\r\n        this.get_list();\r\n    },\r\n    get_list: function () {\r\n        var $this = this;\r\n        core.get('order/refund', $this.data.options, function (list) {\r\n          $this.setData({ show: true })\r\n            if (list.error == 0) {\r\n                if (list.order.status<2){\r\n                    list.rtypeArr=['退款(仅退款不退货)'];\r\n                }\r\n                // list.show = true;\r\n                $this.setData(list);\r\n               \r\n            } else {\r\n                core.toast(list.message, 'loading');\r\n                setTimeout(function() {\r\n                  wx.navigateBack()\r\n                },1500)\r\n            }\r\n        });\r\n    },\r\n    submit:function () {\r\n        var data = {\r\n            id:this.data.options.id,\r\n            rtype:this.data.rtypeIndex,\r\n            reason:this.data.reasonArr[this.data.reasonIndex],\r\n            content:this.data.content,\r\n            price:this.data.price,\r\n            images:this.data.images\r\n        };\r\n        core.post('order/refund/submit', data, function (list) {\r\n         \r\n            if (list.error == 0) {\r\n                wx.navigateBack()\r\n            } else {\r\n                core.toast(list.message, 'loading')\r\n            }\r\n        },true);\r\n    },\r\n    change:function (e) {\r\n        var $this=this,name=core.data(e).name,data={};\r\n        data[name] = e.detail.value;\r\n        this.setData(data);\r\n    },\r\n    upload: function (e) {\r\n        var $this=this,dataset = core.data(e),type = dataset.type,images=$this.data.images,imgs=$this.data.imgs,index=dataset.index;\r\n        if(type=='image'){\r\n            core.upload(function(file){\r\n                images.push(file.filename);\r\n                imgs.push(file.url);\r\n                $this.setData({\r\n                    images:images,\r\n                    imgs:imgs\r\n                })\r\n            });\r\n        }else if(type=='image-remove'){\r\n            images.splice(index,1);\r\n            imgs.splice(index,1);\r\n            $this.setData({\r\n                images:images,\r\n                imgs:imgs\r\n            })\r\n        }else if(type=='image-preview'){\r\n            wx.previewImage({\r\n                current: imgs[index],\r\n                urls: imgs\r\n            })\r\n        }\r\n    },\r\n    toggle: function (e) {\r\n        var data = core.pdata(e),id=data.id;\r\n        (id == 0 || typeof id =='undefined') ? id = 1 : id = 0;\r\n        this.setData({code:id});\r\n    },\r\n    edit:function (e) {\r\n        this.setData({'order.refundstate':0});\r\n    },\r\n    refundcancel:function (e) {\r\n        var $this = this;\r\n        order.refundcancel(this.data.options.id,function () {\r\n            wx.navigateBack()\r\n        });\r\n    }\r\n});","/**\r\n *\r\n * order/detail/index.js\r\n *\r\n * @create 2017-1-16\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),core=app.requirejs('core'),order = app.requirejs('biz/order');;\r\nPage({\r\n    data: {\r\n        code:1,\r\n        tempFilePaths: '',\r\n        delete: '',\r\n        rtypeArr: ['退款(仅退款不退货)','退货退款','换货'],\r\n        rtypeArrText: ['退款','退款','换货'],\r\n        rtypeIndex: 1,\r\n        reasonArr: ['不想要了','卖家缺货','拍错了/订单信息错误','其它'],\r\n        reasonIndex:0,\r\n        images:[]\r\n    },\r\n    onLoad: function (options) {\r\n        this.setData({\r\n            options: options\r\n        });\r\n        app.url(options);\r\n        this.get_list();\r\n    },\r\n    get_list: function () {\r\n        var $this = this;\r\n        core.get('order/single_refund', $this.data.options, function (list) {\r\n          $this.setData({ show: true })\r\n            if (list.error == 0) {\r\n                if (list.order.status<2 && list.order.sendtime<=0){\r\n                    list.rtypeArr=['退款(仅退款不退货)'];\r\n                }\r\n                // list.show = true;\r\n                $this.setData(list);\r\n               \r\n            } else {\r\n                core.toast(list.message, 'none');\r\n                setTimeout(function() {\r\n                  wx.navigateBack()\r\n                },1500)\r\n            }\r\n        });\r\n    },\r\n    submit:function () {\r\n        var $this=this;\r\n        var data = {\r\n            id:this.data.options.id,\r\n            rtype:this.data.rtypeIndex,\r\n            reason:this.data.reasonArr[this.data.reasonIndex],\r\n            content:this.data.content,\r\n            price:this.data.price,\r\n            images:this.data.images\r\n        };\r\n        core.post('order/single_refund/submit', data, function (list) {\r\n         \r\n            if (list.error == 0) {\r\n                // wx.navigateTo({\r\n                //     url: '/pages/order/detail/index?id='+$this.data.order.id,\r\n                // })\r\n                wx.navigateBack();\r\n            } else {\r\n                core.toast(list.message, 'none')\r\n            }\r\n        },true);\r\n    },\r\n    change:function (e) {\r\n        var $this=this,name=core.data(e).name,data={};\r\n        data[name] = e.detail.value;\r\n        this.setData(data);\r\n    },\r\n    upload: function (e) {\r\n        var $this=this,dataset = core.data(e),type = dataset.type,images=$this.data.images,imgs=$this.data.imgs,index=dataset.index;\r\n        if(type=='image'){\r\n            core.upload(function(file){\r\n                images.push(file.filename);\r\n                imgs.push(file.url);\r\n                $this.setData({\r\n                    images:images,\r\n                    imgs:imgs\r\n                })\r\n            });\r\n        }else if(type=='image-remove'){\r\n            images.splice(index,1);\r\n            imgs.splice(index,1);\r\n            $this.setData({\r\n                images:images,\r\n                imgs:imgs\r\n            })\r\n        }else if(type=='image-preview'){\r\n            wx.previewImage({\r\n                current: imgs[index],\r\n                urls: imgs\r\n            })\r\n        }\r\n    },\r\n    toggle: function (e) {\r\n        var data = core.pdata(e),id=data.id;\r\n        (id == 0 || typeof id =='undefined') ? id = 1 : id = 0;\r\n        this.setData({code:id});\r\n    },\r\n    edit:function (e) {\r\n        this.setData({'order.single_refundstate':0});\r\n    },\r\n    refundcancel:function (e) {\r\n        var $this = this;\r\n        core.confirm('您确定要取消申请?',function () {\r\n            core.post('order/single_refund/cancel', {id: $this.data.options.id}, function (data) {\r\n                if (data.error == 0) {\r\n                    // wx.navigateTo({\r\n                    //     url: '/pages/order/detail/index?id='+$this.data.order.id,\r\n                    // })\r\n                    wx.navigateBack();\r\n                }\r\n                core.toast(data.message,'none');\r\n            }, true)\r\n        });\r\n    },\r\n    back:function () {\r\n        wx.navigateBack();\r\n    },\r\n    fefundreceive:function (e) {\r\n        var $this = this;\r\n        core.confirm('确认您已经收到换货物品?',function () {\r\n            core.post('order/single_refund/receive', {id: $this.data.options.id,single_refundid:$this.data.refund.id}, function (data) {\r\n                if (data.error == 0) {\r\n                    // wx.navigateTo({\r\n                    //     url: '/pages/order/detail/index?id='+$this.data.order.id,\r\n                    // })\r\n                    wx.navigateBack();\r\n                }\r\n                core.toast(data.message,'none');\r\n            }, true)\r\n        });\r\n    }\r\n\r\n});","/**\r\n *\r\n * order/create/index.js\r\n *\r\n * @create 2017-1-5\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-10\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nvar diyform = app.requirejs('biz/diyform');\r\nvar $ = app.requirejs('jquery');\r\nvar selectdate = app.requirejs('biz/selectdate');\r\n\r\nPage({\r\n  data: {\r\n    icons: app.requirejs('icons'),\r\n    list: {},\r\n    goodslist: {},\r\n    data: {\r\n      dispatchtype: 0,\r\n      remark: ''\r\n    },\r\n    areaDetail: {\r\n      detail: {\r\n        realname: '',\r\n        mobile: '',\r\n        areas: '',\r\n        street: '',\r\n        address: ''\r\n      },\r\n    },\r\n    merchid: 0,\r\n    showPicker: false,\r\n    pvalOld: [0, 0, 0],\r\n    pval: [0, 0, 0],\r\n    areas: [],\r\n    street: [],\r\n    streetIndex: 0,\r\n    noArea: false,\r\n    showaddressview: false,\r\n    city_express_state: false,\r\n\r\n    // 以下 周期购\r\n    currentDate: \"\",\r\n    dayList: '',\r\n    currentDayList: '',\r\n    currentObj: '',\r\n    currentDay: '',\r\n    cycelbuy_showdate: '',\r\n    receipttime: '',\r\n    scope: '',\r\n    bargainid: '',\r\n\r\n    //会员卡\r\n    selectcard: ''\r\n  },\r\n  onLoad: function (options) {\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n    var $this = this, goodslist = [];\r\n\r\n\r\n    if (options.goods) {\r\n      var goods = JSON.parse(options.goods);\r\n      options.goods = goods;\r\n      this.setData({ ispackage: true })\r\n    }\r\n    $this.setData({ options: options });\r\n    $this.setData({ bargainid: options.bargainid });\r\n    app.url(options);\r\n    \r\n    core.get('order/create', $this.data.options, function (list) {\r\n     \r\n      if (list.error == 0) {\r\n        \r\n        goodslist = $this.getGoodsList(list.goods);\r\n        var comboprice = ($this.data.originalprice - list.goodsprice).toFixed(2);\r\n        $this.setData({\r\n          list: list,\r\n          goods: list,\r\n          show: true,\r\n          address: true,\r\n          card_info: list.card_info || {},\r\n          cardid: list.card_info.cardid || '',\r\n          cardname: list.card_info.cardname || '',\r\n          carddiscountprice: list.card_info.carddiscountprice,\r\n          goodslist: goodslist,\r\n          merchid: list.merchid,\r\n          comboprice: comboprice,\r\n          diyform: {\r\n            f_data: list.f_data,\r\n            fields: list.fields\r\n          },\r\n          city_express_state: list.city_express_state,\r\n          cycelbuy_showdate: list.selectDate,\r\n          receipttime: list.receipttime,\r\n          iscycel: list.iscycel,\r\n          scope: list.scope,\r\n          fromquick: list.fromquick,\r\n          hasinvoice: list.hasinvoice\r\n        });\r\n\r\n        app.setCache(\"goodsInfo\", {\r\n          goodslist: goodslist,\r\n          merchs: list.merchs\r\n        }, 1800);\r\n\r\n      } else {\r\n        core.toast(list.message, 'loading');\r\n        setTimeout(function () {\r\n          wx.navigateBack();\r\n        }, 1000);\r\n      }\r\n\r\n      if (list.fullbackgoods != '') {\r\n        if (list.fullbackgoods == undefined) {\r\n          return\r\n        }\r\n        var fullbackratio = list.fullbackgoods.fullbackratio;\r\n        var maxallfullbackallratio = list.fullbackgoods.maxallfullbackallratio;\r\n        var fullbackratio = Math.round(fullbackratio);\r\n        var maxallfullbackallratio = Math.round(maxallfullbackallratio);\r\n        $this.setData({ fullbackratio: fullbackratio, maxallfullbackallratio: maxallfullbackallratio })\r\n      }\r\n      if (list.iscycel == 1) {\r\n        $this.show_cycelbuydate();\r\n      }\r\n\r\n    });\r\n\r\n    this.getQuickAddressDetail();\r\n    app.setCache(\"coupon\", '');\r\n    setTimeout(function () {\r\n      $this.setData({ areas: app.getCache(\"cacheset\").areas })\r\n    }, 3000)\r\n\r\n  },\r\n\r\n\r\n  show_cycelbuydate: function () {\r\n    var $this = this;\r\n    /*周期购时间选择器初始化*/\r\n    var currentObj = selectdate.getCurrentDayString(this, $this.data.cycelbuy_showdate);\r\n    var week = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\r\n    $this.setData({\r\n      currentObj: currentObj,\r\n      currentDate: currentObj.getFullYear() + '.' + (currentObj.getMonth() + 1) + '.' + currentObj.getDate() + ' ' + week[currentObj.getDay()],\r\n      currentYear: currentObj.getFullYear(),\r\n      currentMonth: (currentObj.getMonth() + 1),\r\n      currentDay: currentObj.getDate(),\r\n      initDate: Date.parse(currentObj.getFullYear() + '/' + (currentObj.getMonth() + 1) + '/' + currentObj.getDate()),\r\n      checkedDate: Date.parse(currentObj.getFullYear() + '/' + (currentObj.getMonth() + 1) + '/' + currentObj.getDate()),\r\n      maxday: $this.data.scope,//可选的天数\r\n    })\r\n  },\r\n\r\n  onShow: function () {\r\n    var $this = this, address = app.getCache(\"orderAddress\"), shop = app.getCache(\"orderShop\");\r\n    var isIpx = app.getCache('isIpx');\r\n\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar',\r\n        paddingb: 'padding-b'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: '',\r\n        paddingb: ''\r\n      })\r\n    }\r\n\r\n\r\n    if (address) {\r\n      this.setData({\r\n        'list.address': address\r\n      });\r\n      $this.caculate($this.data.list);\r\n    }\r\n    if (shop) {\r\n\r\n      this.setData({\r\n        'list.carrierInfo': shop,\r\n        'list.storeInfo': shop\r\n      });\r\n    }\r\n\r\n    var coupon = app.getCache(\"coupon\");\r\n\r\n    if (typeof coupon == 'object' && coupon.id != 0) {\r\n      this.setData({ 'data.couponid': coupon.id, 'data.couponname': coupon.name });\r\n      core.post('order/create/getcouponprice', {\r\n        couponid: coupon.id,\r\n        goods: this.data.goodslist,\r\n        goodsprice: this.data.list.goodsprice,\r\n        discountprice: this.data.list.discountprice,\r\n        isdiscountprice: this.data.list.isdiscountprice\r\n      }, function (data) {\r\n        if (data.error == 0) {\r\n          delete data.$goodsarr;\r\n          $this.setData({ coupon: data });\r\n          $this.caculate($this.data.list);\r\n        } else {\r\n          core.alert(data.message);\r\n        }\r\n      }, true);\r\n    } else {\r\n      this.setData({ 'data.couponid': 0, 'data.couponname': null, coupon: null });\r\n      if (!$.isEmptyObject($this.data.list)) {\r\n        $this.caculate($this.data.list);\r\n      }\r\n    }\r\n  },\r\n\r\n  // 获取商品列表\r\n  getGoodsList: function (list) {\r\n    var goodslist = [];\r\n    $.each(list, function (k, v) {\r\n      $.each(v.goods, function (kk, vv) {\r\n        goodslist.push(vv);\r\n      });\r\n    });\r\n    \r\n    var originalprice = 0;\r\n    for (var i = 0; i < goodslist.length; i++) {\r\n      originalprice += goodslist[i].price;\r\n    }\r\n    \r\n    this.setData({\r\n      originalprice: originalprice\r\n    })\r\n    return goodslist;\r\n  },\r\n\r\n\r\n  toggle: function (e) {\r\n    var data = core.pdata(e), id = data.id, type = data.type, d = {};\r\n    (id == 0 || typeof id == 'undefined') ? d[type] = 1 : d[type] = 0;\r\n    this.setData(d);\r\n  },\r\n  phone: function (e) {\r\n    core.phone(e);\r\n  },\r\n  dispatchtype: function (e) {\r\n    var type = core.data(e).type;\r\n    this.setData({\r\n      'data.dispatchtype': type\r\n    });\r\n    this.caculate(this.data.list);\r\n  },\r\n  number: function (e) {\r\n    var $this = this,\r\n      dataset = core.pdata(e),\r\n      val = foxui.number(this, e),\r\n      id = dataset.id,\r\n      list = $this.data.list,\r\n      total = 0, goodsprice = 0.0;\r\n    $.each(list.goods, function (k, v) {\r\n      $.each(v.goods, function (kk, vv) {\r\n        if (vv.id == id) {\r\n          list.goods[k].goods[kk].total = val;\r\n        }\r\n        total += parseInt(list.goods[k].goods[kk].total);\r\n        goodsprice += parseFloat(total * list.goods[k].goods[kk].price);\r\n      });\r\n    });\r\n    list.total = total;\r\n    list.goodsprice = $.toFixed(goodsprice, 2);\r\n    $this.setData({\r\n      list: list,\r\n      goodslist: $this.getGoodsList(list.goods)\r\n    });\r\n    this.caculate(list);\r\n  },\r\n  caculate: function (list) {\r\n    var $this = this;\r\n    var couponid = 0;\r\n    if ($this.data.data && $this.data.data.couponid != 0) {\r\n      couponid = $this.data.data.couponid\r\n    }\r\n\r\n    core.post('order/create/caculate', {\r\n      goods: this.data.goodslist,\r\n      dflag: this.data.data.dispatchtype,\r\n      addressid: this.data.list.address ? this.data.list.address.id : 0,\r\n      packageid: this.data.list.packageid,\r\n      bargain_id: this.data.bargainid,\r\n      discountprice: this.data.list.discountprice,\r\n      cardid: this.data.cardid,\r\n      couponid: couponid,\r\n    }, function (data) {\r\n      //console.error(data)\r\n      list.dispatch_price = data.price;\r\n      list.enoughdeduct = data.deductenough_money;\r\n      list.enoughmoney = data.deductenough_enough;\r\n      list.taskdiscountprice = data.taskdiscountprice;\r\n      list.discountprice = data.discountprice;\r\n      list.isdiscountprice = data.isdiscountprice;\r\n      list.seckill_price = data.seckill_price;\r\n      list.deductcredit2 = data.deductcredit2;\r\n      list.deductmoney = data.deductmoney;\r\n      list.deductcredit = data.deductcredit;\r\n      list.gifts = data.gifts;\r\n      if ($this.data.data.deduct) {\r\n        data.realprice -= data.deductmoney  //减去积分抵扣的金额\r\n      }\r\n      if ($this.data.data.deduct2) {\r\n        data.realprice -= data.deductcredit2\r\n      }\r\n      if ($this.data.coupon && typeof ($this.data.coupon.deductprice) != 'undefined') {\r\n        $this.setData({ \"coupon.deductprice\": data.coupon_deductprice });\r\n        data.realprice -= data.coupon_deductprice;\r\n      }\r\n      if (data.card_info) {\r\n        list.card_free_dispatch = data.card_free_dispatch;\r\n      }\r\n      if ($this.data.goods.giftid == 0) {\r\n        $this.setData({ \"goods.gifts\": data.gifts });\r\n      }\r\n      if (list.realprice <= 0) {\r\n        list.realprice = 0.000001;\r\n      }\r\n      list.realprice = $.toFixed(data.realprice, 2);\r\n      $this.setData({\r\n        list: list,\r\n        cardid: data.card_info.cardid,\r\n        cardname: data.card_info.cardname,\r\n        goodsprice: data.card_info.goodsprice ? data.card_info.goodsprice:0,\r\n        carddiscountprice: data.card_info.carddiscountprice,\r\n        city_express_state: data.city_express_state\r\n      });\r\n    }, true);\r\n  },\r\n  submit: function () {\r\n    var data = this.data, $this = this, diydata = this.data.diyform;\r\n    var giftid = data.goods.giftid || data.giftid;\r\n    if (this.data.goods.giftid == 0 && this.data.goods.gifts.length == 1) {\r\n      giftid = this.data.goods.gifts[0].id;\r\n     \r\n    }\r\n    \r\n    if (data.submit) {\r\n      return;\r\n    }\r\n\r\n    var verify = diyform.verify(this, diydata);\r\n    if (!verify) {\r\n      return;\r\n    }\r\n\r\n    data.list.carrierInfo = data.list.carrierInfo || {};\r\n\r\n    var subdata = {\r\n      'id': data.options.id ? data.options.id : 0,\r\n      'goods': data.goodslist,\r\n      'gdid': data.options.gdid,\r\n      'dispatchtype': data.data.dispatchtype,\r\n      'fromcart': data.list.fromcart,\r\n      'carrierid': (data.data.dispatchtype == 1 && data.list.carrierInfo) ? data.list.carrierInfo.id : 0,\r\n      'addressid': data.list.address ? data.list.address.id : 0,\r\n      'carriers': (data.data.dispatchtype == 1 || data.list.isvirtual || data.list.isverify) ? {\r\n        'carrier_realname': data.list.member.realname,\r\n        'carrier_mobile': data.list.member.mobile,\r\n        'realname': data.list.carrierInfo.realname,\r\n        'mobile': data.list.carrierInfo.mobile,\r\n        'storename': data.list.carrierInfo.storename,\r\n        'address': data.list.carrierInfo.address\r\n      } : '',\r\n      'remark': data.data.remark,\r\n      'deduct': data.data.deduct,\r\n      'deduct2': data.data.deduct2,\r\n      'couponid': data.data.couponid,\r\n      'cardid': data.cardid,\r\n      'invoicename': data.list.invoicename,\r\n      'submit': true,\r\n      'packageid': data.list.packageid,\r\n      'giftid': giftid,\r\n      'diydata': data.diyform.f_data,\r\n      'receipttime': data.receipttime,\r\n      'bargain_id': $this.data.options.bargainid,\r\n      'fromquick': data.fromquick\r\n    };\r\n\r\n    if (data.list.storeInfo) {\r\n      subdata.carrierid = data.list.storeInfo.id;\r\n    }\r\n    if (data.data.dispatchtype == 1 || data.list.isvirtual || data.list.isverify) {\r\n      if ($.trim(data.list.member.realname) == '' && data.list.set_realname == '0') {\r\n        core.alert('请填写联系人!');\r\n        return;\r\n      }\r\n      if ($.trim(data.list.member.mobile) == '' && data.list.set_mobile == '0') {\r\n        core.alert('请填写联系方式!');\r\n        return;\r\n      }\r\n\r\n      if (!/^[1][3-9]\\d{9}$|^([6|9])\\d{7}$|^[0][9]\\d{8}$|^[6]([8|6])\\d{5}$/.test($.trim(data.list.member.mobile))) {\r\n        core.alert(\"请填写正确联系电话!\");\r\n        return;\r\n      }\r\n\r\n      if (data.list.isforceverifystore) {\r\n        if (!data.list.storeInfo) {\r\n          core.alert('请选择门店!');\r\n          return;\r\n        }\r\n      }\r\n      subdata.addressid = 0;\r\n    } else {\r\n      if (!subdata.addressid && !data.list.isonlyverifygoods) {\r\n        core.alert('地址没有选择!');\r\n        return;\r\n      }\r\n    }\r\n    $this.setData({\r\n      submit: true\r\n    });\r\n    core.post('order/create/submit', subdata, function (ret) {\r\n      $this.setData({\r\n        submit: false\r\n      });\r\n      if (ret.error != 0) {\r\n        core.alert(ret.message);\r\n        return;\r\n      }\r\n      wx.navigateTo({\r\n        url: '/pages/order/pay/index?id=' + ret.orderid\r\n      });\r\n    }, true)\r\n  },\r\n  dataChange: function (e) {\r\n    var data = this.data.data, list = this.data.list, id = e.target.id;\r\n    switch (id) {\r\n      case 'remark': data.remark = e.detail.value; break;\r\n      case 'deduct':\r\n        data.deduct = e.detail.value;\r\n        if (data.deduct2) {\r\n          return;\r\n        }\r\n        var realprice = parseFloat(list.realprice);\r\n        realprice += data.deduct ? - parseFloat(list.deductmoney) : parseFloat(list.deductmoney);\r\n        list.realprice = realprice;\r\n        break;\r\n      case 'deduct2':\r\n        data.deduct2 = e.detail.value;\r\n        if (data.deduct) {\r\n          return;\r\n        }\r\n        var realprice = parseFloat(list.realprice);\r\n        realprice += data.deduct2 ? - parseFloat(list.deductcredit2) : parseFloat(list.deductcredit2);\r\n        list.realprice = realprice;\r\n        break;\r\n    }\r\n\r\n    if (list.realprice <= 0) {\r\n      list.realprice = 0.000001;\r\n    }\r\n    list.realprice = $.toFixed(list.realprice, 2);\r\n\r\n    this.setData({\r\n      data: data,\r\n      list: list\r\n    })\r\n  },\r\n  listChange: function (e) {\r\n    var list = this.data.list, id = e.target.id;\r\n    switch (id) {\r\n      case 'invoicename': list.invoicename = e.detail.value; break;\r\n      case 'realname': list.member.realname = e.detail.value; break;\r\n      case 'mobile': list.member.mobile = e.detail.value; break;\r\n    }\r\n    this.setData({\r\n      list: list\r\n    })\r\n  },\r\n  url: function (e) {\r\n    var url = core.pdata(e).url;\r\n    wx.redirectTo({\r\n      url: url\r\n    });\r\n  },\r\n  onChange: function (e) {\r\n    return diyform.onChange(this, e)\r\n  },\r\n  DiyFormHandler: function (e) {\r\n    return diyform.DiyFormHandler(this, e)\r\n  },\r\n  selectArea: function (e) {\r\n    return diyform.selectArea(this, e)\r\n  },\r\n  bindChange: function (e) {\r\n    return diyform.bindChange(this, e)\r\n  },\r\n  onCancel: function (e) {\r\n    return diyform.onCancel(this, e)\r\n  },\r\n  onConfirm: function (e) {\r\n    diyform.onConfirm(this, e)\r\n\r\n    var val = this.data.pval;\r\n    var areas = this.data.areas;\r\n    var detail = this.data.areaDetail.detail;\r\n    detail.province = areas[val[0]].name;\r\n    detail.city = areas[val[0]].city[val[1]].name;\r\n    detail.datavalue = areas[val[0]].code + \" \" + areas[val[0]].city[val[1]].code;\r\n    if (areas[val[0]].city[val[1]].area && areas[val[0]].city[val[1]].area.length > 0) {\r\n\r\n      detail.area = areas[val[0]].city[val[1]].area[val[2]].name;\r\n      detail.datavalue += \" \" + areas[val[0]].city[val[1]].area[val[2]].code;\r\n      this.getStreet(areas, val);\r\n    } else {\r\n      detail.area = \"\";\r\n    }\r\n\r\n    detail.street = '';\r\n    this.setData({ 'areaDetail.detail': detail, streetIndex: 0, showPicker: false });\r\n\r\n    return\r\n  },\r\n  getIndex: function (str, areas) {\r\n    return diyform.getIndex(str, areas)\r\n  },\r\n  //快速添加收货地址\r\n  showaddressview: function (e) {\r\n\r\n    var showaddressview = '';\r\n    if (e.target.dataset.type == 'open') {\r\n      showaddressview = true\r\n    } else {\r\n      showaddressview = false\r\n    }\r\n    this.setData({\r\n      showaddressview: showaddressview\r\n    })\r\n  },\r\n  onChange2: function (event) {\r\n    var $this = this;\r\n    var vname = $this.data.areaDetail.detail;\r\n    var bindtype = event.currentTarget.dataset.type;\r\n\r\n    var value = $.trim(event.detail.value);\r\n    if (bindtype == 'street') {\r\n      vname.streetdatavalue = $this.data.street[value].code\r\n      value = $this.data.street[value].name;\r\n    }\r\n    vname[bindtype] = value;\r\n    $this.setData({ 'areaDetail.detail': vname });\r\n  },\r\n  getStreet: function (areas, val) {\r\n    if (!areas || !val) {\r\n      return;\r\n    }\r\n    var $this = this;\r\n    if (!$this.data.areaDetail.detail.province || !$this.data.areaDetail.detail.city || !this.data.openstreet) {\r\n      return;\r\n    }\r\n    var city = areas[val[0]].city[val[1]].code;\r\n    var area = areas[val[0]].city[val[1]].area[val[2]].code;\r\n\r\n    core.get('getstreet', { city: city, area: area }, function (result) {\r\n      var street = result.street;\r\n      var data = { street: street };\r\n      if (street && $this.data.areaDetail.detail.streetdatavalue) {\r\n        for (var i in street) {\r\n          if (street[i].code == $this.data.areaDetail.detail.streetdatavalue) {\r\n            data.streetIndex = i;\r\n            $this.setData({ 'areaDetail.detail.street': street[i].name });\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      $this.setData(data);\r\n    });\r\n  }, getQuickAddressDetail: function () {\r\n    var $this = this;\r\n    var id = $this.data.id;\r\n    core.get('member/address/get_detail', { id: id }, function (result) {\r\n      var data = { openstreet: result.openstreet, show: true };\r\n      if (!$.isEmptyObject(result.detail)) {\r\n        var area = result.detail.province + \" \" + result.detail.city + \" \" + result.detail.area;\r\n        var index = $this.getIndex(area, $this.data.areas);\r\n        data.pval = index;\r\n        data.pvalOld = index;\r\n        data.areaDetail.detail = result.detail;\r\n      }\r\n      $this.setData(data);\r\n      if (result.openstreet && index) {\r\n        $this.getStreet($this.data.areas, index);\r\n      }\r\n    });\r\n  },\r\n  submitaddress: function () {\r\n    var $this = this;\r\n    var detail = $this.data.areaDetail.detail;\r\n    if ($this.data.posting) {\r\n      return;\r\n    }\r\n    if (detail.realname == '' || !detail.realname) {\r\n      foxui.toast($this, \"请填写收件人\");\r\n      return;\r\n    } if (detail.mobile == '' || !detail.mobile) {\r\n      foxui.toast($this, \"请填写联系电话\");\r\n      return;\r\n    }\r\n    if (detail.city == '' || !detail.city) {\r\n      foxui.toast($this, \"请选择所在地区\");\r\n      return;\r\n    }\r\n    if ($this.data.street.length > 0 && (detail.street == '' || !detail.street)) {\r\n      foxui.toast($this, \"请选择所在街道\");\r\n      return;\r\n    }\r\n    if (detail.address == '' || !detail.address) {\r\n      foxui.toast($this, \"请填写详细地址\");\r\n      return;\r\n    }\r\n\r\n    if (!detail.datavalue) {\r\n      foxui.toast($this, \"地址数据出错，请重新选择\");\r\n      return;\r\n    }\r\n\r\n    detail.id = 0;\r\n    $this.setData({ posting: true });\r\n    core.post('member/address/submit', detail, function (result) {\r\n      if (result.error != 0) {\r\n        $this.setData({ posting: false });\r\n        foxui.toast($this, result.message);\r\n        return;\r\n      }\r\n\r\n      detail.id = result.addressid;\r\n\r\n      $this.setData({ showaddressview: false, 'list.address': detail });\r\n      core.toast(\"保存成功\");\r\n    });\r\n\r\n  },\r\n  //赠品弹层\r\n  giftPicker: function () {\r\n    this.setData({\r\n      active: 'active',\r\n      gift: true\r\n    })\r\n  },\r\n  //关闭pickerpicker\r\n  emptyActive: function () {\r\n    this.setData({\r\n      active: '', slider: 'out', tempname: '', showcoupon: false, gift: false\r\n    });\r\n  },\r\n  radioChange: function (e) {\r\n    \r\n    this.setData({\r\n      giftid: e.currentTarget.dataset.giftgoodsid,\r\n      gift_title: e.currentTarget.dataset.title,\r\n    })\r\n  },\r\n  /*同城配送*/\r\n  sendclick: function () {\r\n    wx.navigateTo({\r\n      url: '/pages/map/index'\r\n    });\r\n  },\r\n  // 清除表单内容\r\n  clearform: function () {\r\n    var diyform = this.data.diyform;\r\n    var new_fdata = {};\r\n    $.each(diyform, function (k, v) {  //lgt 清除表单时保留图片上传功能\r\n      $.each(v, function (key, value) {\r\n        if (value.data_type == 5) {\r\n          diyform.f_data[value.diy_type].count = 0;\r\n          diyform.f_data[value.diy_type].images = [];\r\n          new_fdata[value.diy_type] = diyform.f_data[value.diy_type];\r\n        }\r\n      });\r\n    });\r\n    diyform.f_data = new_fdata;\r\n    this.setData({\r\n      diyform: diyform\r\n    })\r\n  },\r\n\r\n  // 取消时间选择时间\r\n  syclecancle: function () {\r\n    this.setData({\r\n      cycledate: false\r\n    });\r\n  },\r\n  //确定选择时间\r\n  sycleconfirm: function () {\r\n    this.setData({\r\n      cycledate: false\r\n    });\r\n  },\r\n  // 周期购 修改送达时间\r\n  editdate: function (e) {\r\n    selectdate.setSchedule(this);\r\n    this.setData({\r\n      cycledate: true,\r\n      create: true,\r\n    });\r\n  },\r\n\r\n  //时间选择器 前后月份选择\r\n  doDay: function (e) {\r\n    selectdate.doDay(e, this);\r\n  },\r\n  //周期购选择时间\r\n  selectDay: function (e) {\r\n    selectdate.selectDay(e, this);\r\n    selectdate.setSchedule(this);\r\n  },\r\n\r\n  // 弹出发票picker\r\n  showinvoicepicker: function () {\r\n    var tempdata = this.data.list;\r\n    if (tempdata.invoice_type == 0) { //only纸质\r\n      tempdata.invoice_info.entity = true;\r\n    }\r\n    if (tempdata.invoice_type == 1) { //only电子\r\n      tempdata.invoice_info.entity = false;\r\n    }\r\n    this.setData({\r\n      invoicepicker: true,\r\n      list: tempdata\r\n    })\r\n  },\r\n  noinvoicepicker: function () {\r\n    this.setData({\r\n      invoicepicker: false\r\n    })\r\n  },\r\n  // 清空数据\r\n  clearinvoice: function () {\r\n    var tempdata = this.data.list;\r\n    tempdata.invoicename = '';\r\n    this.setData({\r\n      invoicepicker: false,\r\n      list: tempdata\r\n    })\r\n  },\r\n  // 修改电子纸质类型发票\r\n  chaninvoice: function (e) {\r\n    var tempdata = this.data.list;\r\n    if (e.currentTarget.dataset.type == '0') {\r\n      tempdata.invoice_info.entity = false;\r\n    } else {\r\n      tempdata.invoice_info.entity = true;\r\n    }\r\n    this.setData({\r\n      list: tempdata\r\n    })\r\n  },\r\n  // 修改发票类型\r\n  changeType: function (e) {\r\n    var tempdata = this.data.list;\r\n    if (e.currentTarget.dataset.type == '0') {\r\n      tempdata.invoice_info.company = false;\r\n    } else {\r\n      tempdata.invoice_info.company = true;\r\n    }\r\n    this.setData({\r\n      list: tempdata\r\n    })\r\n  },\r\n  // input发票抬头\r\n  invoicetitle: function (e) {\r\n    var tempdata = this.data.list;\r\n    tempdata.invoice_info.title = e.detail.value.replace(/\\s+/g, '')\r\n    this.setData({\r\n      list: tempdata\r\n    })\r\n  },\r\n\r\n  // input发票税号\r\n  invoicenumber: function (e) {\r\n    var tempdata = this.data.list;\r\n    tempdata.invoice_info.number = e.detail.value.replace(/\\s+/g, '')\r\n    this.setData({\r\n      list: tempdata\r\n    })\r\n  },\r\n\r\n  // 发票确定按钮\r\n  confirminvoice: function () {\r\n    var tempdata = this.data.list;\r\n    if (!tempdata.invoice_info.company) {\r\n      this.setData({\r\n        invoicenumber: ''\r\n      })\r\n    }\r\n    var str1 = tempdata.invoice_info.entity ? '[纸质] ' : '[电子] ';\r\n    var str2 = tempdata.invoice_info.title + ' ';\r\n    var str3 = tempdata.invoice_info.company ? '（单位: ' + tempdata.invoice_info.number + '）' : '（个人）';\r\n   \r\n    tempdata.invoicename = str1 + str2 + str3;\r\n    if (!tempdata.invoice_info.title) {\r\n      foxui.toast(this, \"请填写发票抬头\");\r\n    } else if (tempdata.invoice_info.company && !tempdata.invoice_info.number) {\r\n      foxui.toast(this, \"请填写税号\");\r\n    } else {\r\n      this.setData({\r\n        list: tempdata,\r\n        invoicepicker: false\r\n      })\r\n    }\r\n  },\r\n\r\n  // 选择会员卡\r\n  selectCard: function () {\r\n    var $this = this;\r\n    $this.setData({ selectcard: 'in' })\r\n  },\r\n\r\n  // 不使用会员卡\r\n  cancalCard: function () {\r\n    this.setData({ cardid: '' })\r\n  },\r\n\r\n  // 切换会员卡\r\n  changecard: function (e) {\r\n    var $this = this, card_info = $this.data.card_info;\r\n    $this.setData({ selectcard: '', cardid: e.currentTarget.dataset.id })\r\n    var id = e.currentTarget.dataset.id;\r\n\r\n    var args = {\r\n      cardid: id,\r\n      goodsprice: this.data.list.goodsprice,\r\n      dispatch_price: this.data.list.dispatch_price,\r\n      discountprice: this.data.list.discountprice\r\n    }\r\n    core.post('order/create/getcardprice', args, function (data) {\r\n      if (id != '') {\r\n        if (data.error == 0) {\r\n          var obj = {\r\n            carddiscount_rate: data.carddiscount_rate,\r\n            carddiscountprice: data.carddiscountprice,\r\n            cardid: data.cardid,\r\n            cardname: data.name,\r\n            dispatch_price: data.dispatch_price,\r\n            totalprice: data.totalprice,\r\n            comboprice: 0\r\n          }\r\n          $this.setData(obj);\r\n          $this.caculate($this.data.list);\r\n        } else {\r\n          core.alert(data.message);\r\n        }\r\n      } else {\r\n        var card_obj = {\r\n          cardid: '',\r\n          selectcard: '',\r\n          cardname: '',\r\n          carddiscountprice: 0,\r\n          ispackage: false\r\n        }\r\n        var comboprice = ($this.data.originalprice - $this.data.list.goodsprice).toFixed(2);\r\n        if ($this.data.options.goods) {\r\n          card_obj.ispackage = true;\r\n          card_obj.comboprice = comboprice;\r\n        }\r\n        $this.setData(card_obj);\r\n        if (!$.isEmptyObject($this.data.list)) {\r\n          $this.caculate($this.data.list);\r\n        }\r\n      }\r\n    }, true);\r\n\r\n  },\r\n\r\n  // 关闭选择会员卡弹窗\r\n  closeCardModal: function () {\r\n    var $this = this;\r\n    $this.setData({ selectcard: '' })\r\n  }\r\n});","/**\r\n *\r\n * order/pay/index.js\r\n *\r\n * @create 2017-1-12\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-12\r\n *\r\n */\r\nvar app=getApp(),core=app.requirejs('core'),$=app.requirejs('jquery');\r\nPage({\r\n    data: {\r\n        search: false,\r\n        show_distance:false\r\n    },\r\n    onLoad: function (options) {\r\n        // 页面初始化 options为页面跳转所带来的参数\r\n        this.setData({\r\n            options: options\r\n        });\r\n        app.url(options);\r\n    },\r\n    onReady: function () { \r\n        // 页面渲染完成\r\n    },\r\n    onShow: function () { \r\n        // 页面显示\r\n      this.get_list();\r\n    },\r\n    onHide: function () {\r\n        // 页面隐藏\r\n    },\r\n    get_list: function () {\r\n      var $this = this;\r\n      var obj = { \r\n        ids: $this.data.options.ids, \r\n        type: $this.data.options.type, \r\n        merchid: $this.data.options.merchid \r\n      }; \r\n      wx.getSetting({\r\n        success: function (res) {  \r\n          var accredit = res.authSetting['scope.userLocation'];\r\n          if (accredit){\r\n            wx.getLocation({\r\n              type: 'wgs84',\r\n              success: function (res) { \r\n                obj.lat = res.latitude;\r\n                obj.lng = res.longitude;\r\n                $this.setData({ show_distance: true })\r\n                core.get('store/selector', obj, function (result) {\r\n                  $this.setData({ list: result.list, show: true });\r\n                });\r\n              },\r\n              fail: function (ret) {  \r\n                setTimeout(function () {\r\n                  core.toast(\"位置获取失败\");\r\n                }, 1000);\r\n                core.get('store/selector', obj, function (result) {\r\n                  $this.setData({ list: result.list, show: true });\r\n                });\r\n              }\r\n            })\r\n          }else{  \r\n            wx.authorize({\r\n              scope: 'scope.userLocation',\r\n              success: function () {\r\n                wx.getLocation({\r\n                  type: 'wgs84',\r\n                  success: function (res) { \r\n                    obj.lat = res.latitude;\r\n                    obj.lng = res.longitude;\r\n                    $this.setData({ show_distance: true })\r\n                    core.get('store/selector', obj, function (result) {\r\n                      $this.setData({ list: result.list, show: true });\r\n                    });\r\n                  },\r\n                  fail: function (ret) {  \r\n                    setTimeout(function () {\r\n                      core.toast(\"位置获取失败\");\r\n                    }, 1000);\r\n                    core.get('store/selector', obj, function (result) {\r\n                      $this.setData({ list: result.list, show: true });\r\n                    });\r\n                  }\r\n                })\r\n              },\r\n              fail: function (ret) { \r\n                \r\n                var accredit = res.authSetting['scope.userLocation'];\r\n                if (accredit){\r\n                  wx.showModal({\r\n                    title: '警告',\r\n                    content: '位置信息获取受限，请点击确定打开授权页面,在打开的页面中开启位置信息授权',\r\n                    success(res) {\r\n                      if (res.confirm) {\r\n                        wx.openSetting({\r\n                          success(res) {\r\n                            wx.navigateBack();\r\n                          }\r\n                        })\r\n                      }\r\n                      if (res.cancel) {\r\n                        app.close();\r\n                      }\r\n                    }\r\n                  })\r\n                } \r\n              }\r\n            })\r\n          }\r\n        }\r\n      });   \r\n    },\r\n    bindSearch: function (e) {\r\n        this.setData({\r\n            search: true\r\n        })\r\n    },\r\n    phone:function(e){\r\n        core.phone(e);\r\n    },\r\n    select: function (e) {\r\n        var index = core.pdata(e).index;\r\n        app.setCache(\"orderShop\", this.data.list[index], 30);\r\n        wx.navigateBack();\r\n    },\r\n    search: function (e) {\r\n        var val = e.detail.value,old_list=this.data.old_list,list=this.data.list,new_list=[];\r\n        if ($.isEmptyObject(old_list)){\r\n            old_list = list;\r\n        }\r\n        if (!$.isEmptyObject(old_list)){\r\n            $.each(old_list,function (index,item) {\r\n                if (item.storename.indexOf(val)!=-1){\r\n                    new_list.push(item);\r\n                }\r\n            })\r\n        }\r\n        this.setData({list:new_list,old_list:old_list});\r\n    }\r\n})","/**\r\n *\r\n * order/store/map.js\r\n *\r\n * @create 2017-1-16\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-16\r\n *\r\n */\r\nvar app = getApp(),core=app.requirejs('core');\r\nPage({\r\n    data: {\r\n        storeid: 0,\r\n        merchid:0,\r\n        markers: [],\r\n        store: {}\r\n    },\r\n    onLoad: function (options) {\r\n        this.setData({storeid: options.id,merchid:options.merchid});\r\n        this.getInfo();\r\n    },\r\n    getInfo: function () {\r\n        var $this = this;\r\n     \r\n        core.get('store/map', { id: this.data.storeid, merchid: this.data.merchid}, function (result) {\r\n            $this.setData({store: result.store,markers: [{id: 1, latitude: Number(result.store.lat), longitude: Number(result.store.lng)}],show:true});\r\n        });\r\n    },\r\n    phone:function(e){\r\n        core.phone(e);\r\n    }\r\n})","/**\r\n *\r\n * order/pay/index.js\r\n *\r\n * @create 2017-1-5\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-10\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n    data: {\r\n        icons:app.requirejs('icons'),\r\n        success:false,\r\n        successData:{},\r\n\r\n        coupon: false\r\n    },\r\n    onLoad: function (options) {\r\n        var $this = this, goodslist = {};\r\n        this.setData({\r\n          options: options,\r\n          imgUrl: app.globalData.approot\r\n        });\r\n        app.url(options);\r\n    },\r\n    onShow:function () {\r\n        this.get_list();\r\n    },\r\n    get_list:function () {\r\n        var $this=this;\r\n        core.get('order/pay', $this.data.options, function (list) {\r\n            if (list.error == 50018) {\r\n                wx.navigateTo({\r\n                    url: '/pages/order/details/index?id='+$this.data.options.id\r\n                });\r\n                return;\r\n            }\r\n            if (!list.wechat.success && list.order.price != '0.00' && list.wechat.payinfo){\r\n                core.alert(list.wechat.payinfo.message + '\\n不能使用微信支付!');\r\n            }\r\n            $this.setData({\r\n                list: list,\r\n                show:true\r\n            });\r\n        });\r\n    },\r\n    pay: function (e) {\r\n        var $this = this;\r\n        var type = core.pdata(e).type,$this=this,wechat = this.data.list.wechat;\r\n        core.post('order/pay/checkstock', { id: $this.data.options.id }, function (check_json) {\r\n        if (check_json.error != 0) {\r\n          foxui.toast($this, check_json.message);\r\n          return;\r\n        }\r\n        if (type == 'wechat') {\r\n          core.pay(wechat.payinfo, function (res) {\r\n            if (res.errMsg == \"requestPayment:ok\") {\r\n              $this.complete(type)\r\n              // $this.setData({coupon: true})\r\n            }else {\r\n              foxui.toast($this, res.errMsg);\r\n            }\r\n          }, function (fail) {\r\n            if (fail.errMsg != \"requestPayment:fail cancel\") {\r\n              foxui.toast($this, fail.errMsg);\r\n            }\r\n          });\r\n        } else if (type == 'credit') {\r\n          core.confirm('确认要支付吗?', function () {\r\n            $this.complete(type)\r\n            // $this.setData({ coupon: true })\r\n          }, function () {\r\n          })\r\n        } else if (type == 'cash') {\r\n          core.confirm('确认要使用货到付款吗?', function () {\r\n            $this.complete(type)\r\n            // $this.setData({ coupon: true })\r\n          }, function () {\r\n          })\r\n        } else {\r\n          $this.complete(type)\r\n          // $this.setData({ coupon: true })\r\n        }\r\n      }, true, true) \r\n    },\r\n    complete: function (type) {\r\n        var $this = this;\r\n        core.post('order/pay/complete', {id: $this.data.options.id, type: type}, function (pay_json) {\r\n            if (pay_json.error == 0) {\r\n                wx.setNavigationBarTitle({title: '支付成功'});\r\n                var ordervirtualtype = Array.isArray(pay_json.ordervirtual);\r\n                $this.setData({\r\n                    success: true,\r\n                    successData: pay_json,\r\n                    order: pay_json.order,\r\n                    ordervirtual: pay_json.ordervirtual,\r\n                    ordervirtualtype\r\n                });\r\n                return\r\n            }\r\n            foxui.toast($this,pay_json.message)\r\n        }, true, true)\r\n    },\r\n    shop:function(e){\r\n        var send = core.pdata(e).id;\r\n        if(send==0){\r\n            this.setData({ shop:1 });\r\n        }else{\r\n            this.setData({ shop:0 });\r\n        }\r\n    },\r\n    phone:function(e){\r\n        core.phone(e);\r\n    },\r\n\r\n    closecoupon: function(){\r\n      this.setData({ coupon: false})\r\n    }\r\n});","/**\r\n *\r\n * favorite\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-09\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar diypage = app.requirejs('biz/diypage');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n    data: {\r\n      route: \"member\",\r\n      icons: app.requirejs('icons'),\r\n      member:{},\r\n      diypages:{},\r\n      audios: {},\r\n      audiosObj:{},\r\n      modelShow: false, \r\n      //轮播\r\n      autoplay: true,\r\n      interval: 5000,\r\n      duration: 500,\r\n      swiperheight:0,\r\n      iscycelbuy:false,\r\n      bargain:false,\r\n      result: {}\r\n    },\r\n    onLoad: function (options) {\r\n      app.checkAuth();\r\n      var $this = this;\r\n      $this.setData({ options: options });\r\n    },\r\n    getInfo: function(){\r\n        var $this = this;\r\n        core.get('member', {}, function(result){\r\n          if (result.isblack == 1){\r\n            wx.showModal({\r\n              title: '无法访问',\r\n              content: '您在商城的黑名单中，无权访问！',\r\n              success: function (res) {\r\n                if (res.confirm) {\r\n                  $this.close()\r\n                }\r\n                if (res.cancel){\r\n                  $this.close()\r\n                }\r\n              }\r\n            })\r\n          }\r\n            if(result.error!=0){\r\n              // $this.setData({ modelShow: true });\r\n                wx.redirectTo({\r\n                  url: '/pages/message/auth/index'\r\n                })\r\n            }else{\r\n              $this.setData({\r\n                member: result, \r\n                show: true, \r\n                customer: result.customer, \r\n                customercolor: result.customercolor || '', \r\n                phone: result.phone, \r\n                phonecolor: result.phonecolor || '', \r\n                phonenumber: result.phonenumber || '', \r\n                iscycelbuy: result.iscycelbuy,\r\n                bargain:result.bargain\r\n              });\r\n            }\r\n            parser.wxParse('wxParseData','html', result.copyright,$this,'5');\r\n        });\r\n    },\r\n    onShow: function(){\r\n      app.checkAuth();\r\n      var $this = this;\r\n      this.getInfo();      \r\n      wx.getSystemInfo({\r\n        success: function (result) {\r\n          var swiperheight = result.windowWidth / 1.7\r\n          $this.setData({\r\n            windowWidth: result.windowWidth,\r\n            windowHeight: result.windowHeight,\r\n            swiperheight: swiperheight\r\n          });\r\n        }\r\n      });\r\n      // 店铺装修 会员中心\r\n      $this.setData({\r\n        imgUrl: app.globalData.approot\r\n      });\r\n      diypage.get(this, 'member', function (res) { });\r\n    },\r\n    onShareAppMessage: function () {\r\n        return core.onShareAppMessage();\r\n    },\r\n  imagesHeight: function (e) {\r\n    var width = e.detail.width, height = e.detail.height, type = e.target.dataset.type, $this = this;\r\n    wx.getSystemInfo({\r\n      success: function (res) {\r\n        $this.data.result[type] = res.windowWidth / width * height;\r\n        if (!$this.data[type] || ($this.data[type] && result[type] < $this.data[type])) {\r\n          $this.setData({ result: $this.data.result });\r\n        }\r\n      }\r\n    });\r\n  },\r\n    \r\n    /*用户授权-取消*/\r\n    cancelclick:  function(){\r\n   \t  wx.switchTab({\r\n          url: '/pages/index/index'\r\n  \t  })\r\n    },\r\n    /*用户授权-去设置*/\r\n    confirmclick: function(){\r\n      // this.setData({modelShow: false})\r\n      wx.openSetting({\r\n        success: function (res) { }\r\n      })\r\n    },\r\n    phone: function () {\r\n      var phoneNumber = this.data.phonenumber + ''\r\n      wx.makePhoneCall({\r\n        phoneNumber: phoneNumber\r\n      })\r\n    },\r\n    play: function (e) {\r\n      var item_id = e.target.dataset.id;\r\n      var innerAudioContext = this.data.audiosObj[item_id] || false;\r\n      if (!innerAudioContext) {\r\n        innerAudioContext = wx.createInnerAudioContext('audio_' + item_id);\r\n        var audiosObj = this.data.audiosObj;\r\n        audiosObj[item_id] = innerAudioContext;\r\n        this.setData({\r\n          audiosObj: audiosObj\r\n        })\r\n      }\r\n      var $this = this;\r\n      innerAudioContext.onPlay(() => {\r\n        var Time = setInterval(function () {\r\n          var width = innerAudioContext.currentTime / innerAudioContext.duration * 100 + '%';\r\n          var minute = Math.floor(Math.ceil(innerAudioContext.currentTime) / 60);  //分\r\n          var second = (Math.ceil(innerAudioContext.currentTime) % 60 / 100).toFixed(2).slice(-2); //秒\r\n          var seconds = Math.ceil(innerAudioContext.currentTime)\r\n          var audioicon = ''\r\n          if (minute < 10) {\r\n            minute = \"0\" + minute;\r\n          }\r\n          var time = minute + \":\" + second;\r\n          var audios = $this.data.audios;\r\n          audios[item_id].audiowidth = width;\r\n          audios[item_id].Time = Time;\r\n          audios[item_id].audiotime = time;\r\n          audios[item_id].seconds = seconds;\r\n          $this.setData({ audios: audios })\r\n        }, 1000)\r\n      })\r\n\r\n      var src = e.currentTarget.dataset.audio;\r\n      var time = e.currentTarget.dataset.time;\r\n      var pausestop = e.currentTarget.dataset.pausestop;\r\n      var loopplay = e.currentTarget.dataset.loopplay;\r\n      if (loopplay == 0) {\r\n        innerAudioContext.onEnded((res) => {\r\n          audios[item_id].status = false;\r\n          $this.setData({ audios: audios })\r\n        })\r\n      }\r\n      var audios = $this.data.audios;\r\n      \r\n      if (!audios[item_id]) {\r\n        audios[item_id] = {};\r\n      }\r\n      if (innerAudioContext.paused && time == 0) {\r\n        innerAudioContext.src = src;\r\n        innerAudioContext.play();\r\n        if (loopplay == 1) {\r\n          innerAudioContext.loop = true;\r\n        }\r\n        audios[item_id].status = true;\r\n        $this.pauseOther(item_id)\r\n\r\n      } else if (innerAudioContext.paused && time > 0) {\r\n        innerAudioContext.play();\r\n        if (pausestop == 0) {\r\n          innerAudioContext.seek(time);\r\n        } else {\r\n          innerAudioContext.seek(0);\r\n        }\r\n        audios[item_id].status = true;\r\n        $this.pauseOther(item_id)\r\n      }\r\n      else {\r\n        innerAudioContext.pause();\r\n        audios[item_id].status = false;\r\n      }\r\n      $this.setData({ audios: audios })\r\n    },\r\n    pauseOther: function (item_id) {\r\n      var $this = this;\r\n      $.each(this.data.audiosObj, function (id, obj) {\r\n        if (id == item_id) {\r\n          return;\r\n        }\r\n        obj.pause();\r\n        var audios = $this.data.audios;\r\n        if (audios[id]) {\r\n          audios[id].status = false;\r\n          $this.setData({ audios: audios });\r\n        }\r\n      });\r\n    },\r\n    /**\r\n * 生命周期函数--监听页面隐藏\r\n */\r\n    onHide: function () {\r\n      this.pauseOther();\r\n      // this.setData({ modelShow: false })\r\n    },\r\n\r\n    /**\r\n     * 生命周期函数--监听页面卸载\r\n     */\r\n    onUnload: function () {\r\n      this.pauseOther();\r\n    },\r\n    navigate: function (e) {\r\n      var url = e.currentTarget.dataset.url\r\n      var phone = e.currentTarget.dataset.phone\r\n      var appid = e.currentTarget.dataset.appid\r\n      var appurl = e.currentTarget.dataset.appurl\r\n      if (url) {\r\n        wx.navigateTo({\r\n          url: url,\r\n          fail: function () {\r\n            wx.switchTab({\r\n              url: url,\r\n        })\r\n      }\r\n        })\r\n      }\r\n      if (phone) {\r\n        wx.makePhoneCall({\r\n          phoneNumber: phone\r\n        })\r\n      }\r\n      if (appid) {\r\n        wx.navigateToMiniProgram({\r\n          appId: appid,\r\n          path: appurl\r\n        })\r\n      }\r\n    },\r\n    close: function () {\r\n      app.globalDataClose.flag = true;\r\n      wx.reLaunch({\r\n        url: '/pages/index/index',\r\n      })\r\n    },\r\n});","/**\r\n *\r\n * member\\info\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-10\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nvar diyform = app.requirejs('biz/diyform');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n    data: {\r\n        icons: app.requirejs('icons'),\r\n        member: {},\r\n        diyform: {},\r\n        postData: {},\r\n        openbind: false,\r\n        index: 0,\r\n        submit: false,\r\n\r\n        showPicker: false,\r\n        pvalOld: [0,0,0],\r\n        pval: [0,0,0],\r\n        areas: [],\r\n        noArea: true\r\n    },\r\n    onLoad: function (options) {\r\n    \tapp.url(options);\r\n    \tvar $this = this;\r\n    \tsetTimeout(function(){\r\n    \t\t$this.setData({areas: app.getCache(\"cacheset\").areas});\r\n    \t},1000)\r\n    },\r\n    onShow: function () {\r\n        this.getInfo();\r\n    },\r\n    getInfo: function () {\r\n        var $this = this;\r\n        core.get('member/info', {}, function(result){\r\n            var member = result.member;\r\n            var data = {member: member,diyform: result.diyform, openbind: result.openbind,show:true};\r\n            if(result.diyform.template_flag==0){\r\n                data.postData = {realname: member.realname, mobile: member.mobile, weixin: member.weixin, birthday: member.birthday, city: member.city};\r\n            }\r\n            $this.setData(data);\r\n        });\r\n    },\r\n    onChange: function (event) {\r\n        var value = event.detail.value;\r\n        var type = core.pdata(event).type;\r\n        var postData = this.data.postData;\r\n        postData[type] = $.trim(value);\r\n        this.setData({postData: postData});\r\n    },\r\n    DiyFormHandler: function(e){\r\n        return diyform.DiyFormHandler(this, e)\r\n    },\r\n    submit: function () {\r\n        if(this.data.submit){\r\n            return;\r\n        }\r\n        var $this = this;\r\n        var data = $this.data;\r\n        var diydata = data.diyform;\r\n        if(diydata.template_flag==0){\r\n            if(!data.postData.realname){\r\n                foxui.toast($this, \"请填写姓名\");\r\n                return;\r\n            }\r\n            if(!$.isMobile(data.postData.mobile) && !data.openbind){\r\n                foxui.toast($this, \"请填写正确手机号码\");\r\n                return;\r\n            }\r\n        }else{\r\n            var verify = diyform.verify(this, diydata);\r\n            if(!verify){\r\n                return;\r\n            }\r\n        }\r\n        $this.setData({submit: true});\r\n        var postData = {memberdata: data.postData};\r\n        if(diydata.template_flag){\r\n            postData.memberdata = diydata.f_data;\r\n        }\r\n\r\n        core.post('member/info/submit', postData, function(result){\r\n            if(result.error!=0){\r\n                foxui.toast($this, result.message);\r\n                return;\r\n            }\r\n            $this.setData({submit: false});\r\n            foxui.toast($this, \"修改成功\");\r\n            setTimeout(function () {\r\n                wx.navigateBack();\r\n            }, 500);\r\n        });\r\n    },\r\n\r\n    selectArea: function (e) {\r\n        return diyform.selectArea(this, e)\r\n    },\r\n    bindChange: function(e) {\r\n        return diyform.bindChange(this, e)\r\n    },\r\n    onCancel: function (e) {\r\n        return diyform.onCancel(this, e)\r\n    },\r\n    onConfirm: function (e) {\r\n        if(!this.data.diyform.template_flag){\r\n            var val = this.data.pval;\r\n            var areas = this.data.areas;\r\n            var postData = this.data.postData;\r\n            postData.city = areas[val[0]].name+\" \"+areas[val[0]].city[val[1]].name;\r\n            this.setData({postData: postData, showPicker: false});\r\n        }else{\r\n            return diyform.onConfirm(this, e)\r\n        }\r\n    },\r\n    getIndex: function (str, areas) {\r\n        return diyform.getIndex(str, areas)\r\n    }\r\n})\r\n","/**\r\n *\r\n * bind\\index.js\r\n *\r\n * @create 2017-01-11\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-12\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n    data: {\r\n        member: {},\r\n        binded: false,\r\n        endtime: 0,\r\n        postData: {},\r\n        submit: false,\r\n        subtext: \"立即绑定\",\r\n        smsimgcode:'',\r\n        verifycode_img:''\r\n    },\r\n    onLoad: function (options) {\r\n        app.url(options);\r\n        core.loading();\r\n        this.getInfo();\r\n    },\r\n    getInfo: function () {\r\n        var $this = this,title;\r\n        core.get('member/bind', {}, function(result){\r\n            if(result.error){\r\n                wx.redirectTo({url: \"/pages/member/index/index\"});\r\n                return;\r\n            }\r\n            var data = { member: result.member, binded: result.binded, endtime: result.endtime, show: true, smsimgcode: result.smsimgcode, verifycode_img: result.verifycode_img};\r\n            data.postData = {mobile: result.member.mobile, code: '', password: '', password1: ''};\r\n            $this.setData(data);\r\n            if(result.endtime>0){\r\n                $this.endTime();\r\n            }\r\n            if(result.binded){\r\n                title = \"更换绑定手机号\";\r\n            }else{\r\n                title = \"绑定手机号\";\r\n            }\r\n            wx.setNavigationBarTitle({title: title});\r\n        }, true, true, true);\r\n    },\r\n    endTime: function () {\r\n        var $this = this;\r\n        var endtime = $this.data.endtime;\r\n        if(endtime>0){\r\n            $this.setData({endtime: endtime-1});\r\n            var end = setTimeout(function () {\r\n                $this.endTime();\r\n            },1000);\r\n        }\r\n        return;\r\n    },\r\n    inputChange: function (event) {\r\n        var postData = this.data.postData;\r\n        var type = core.pdata(event).type;\r\n        var value = event.detail.value;\r\n        postData[type] = $.trim(value);\r\n        this.setData({postData: postData});\r\n    },\r\n    getCode: function (event) {\r\n        var $this = this;\r\n        if($this.data.endtime>0){\r\n            return;\r\n        }\r\n        var mobile = $this.data.postData.mobile;\r\n        if(!$.isMobile(mobile)){\r\n            foxui.toast($this, \"请填写正确的手机号\");\r\n            return;\r\n        }\r\n\r\n        if ($this.data.smsimgcode == 1){\r\n          var verifyImg = $this.data.postData.verifyImg;\r\n          if (verifyImg == undefined){\r\n            foxui.toast($this, \"请填写图形验证码\");\r\n            return;\r\n          }\r\n\r\n        }\r\n\r\n        core.get('sms/changemobile', { mobile: mobile, verifyImgCode: verifyImg, smsimgcode: $this.data.smsimgcode}, function(result){\r\n            if(result.error!=0){\r\n                foxui.toast($this, result.message);\r\n                return;\r\n            }\r\n            foxui.toast($this, \"短信发送成功\");\r\n            $this.setData({endtime: 60});\r\n            $this.endTime();\r\n            return;\r\n        }, true, true, true);\r\n    },\r\n    submit: function (event) {\r\n        if(this.data.submit){\r\n            return;\r\n        }\r\n        var $this = this;\r\n        var postData = this.data.postData;\r\n        if(!$.isMobile(postData.mobile)){\r\n            foxui.toast(this, \"请填写正确的手机号\");\r\n            return;\r\n        }\r\n        if(postData.code.length!=5){\r\n            foxui.toast(this, \"请填写5位短信验证码\");\r\n            return;\r\n        }\r\n        if(!postData.password || postData.password==''){\r\n            foxui.toast(this, \"请填写登录密码\");\r\n            return;\r\n        }\r\n        if(!postData.password1 || postData.password1==''){\r\n            foxui.toast(this, \"请确认登录密码\");\r\n            return;\r\n        }\r\n        if(postData.password != postData.password1){\r\n            foxui.toast(this, \"两次输入的密码不一致\");\r\n            return;\r\n        }\r\n        this.setData({submit: true, subtext: \"正在绑定...\"});\r\n\r\n        core.post('member/bind/submit', postData, function(ret){\r\n            if(ret.error==92001||ret.error==92002){\r\n                core.confirm(ret.message, function () {\r\n                    postData.confirm = 1;\r\n                    core.post('member/bind/submit', postData, function(ret2){\r\n                        if(ret2.error>0){\r\n                            foxui.toast($this, ret2.message);\r\n                        }else{\r\n                            wx.navigateBack();\r\n                        }\r\n                        $this.setData({submit: false, subtext: \"立即绑定\", \"postData.confirm\": 0});\r\n                    }, true, true, true);\r\n                })\r\n                return;\r\n            }\r\n            else if(ret.error!=0){\r\n                foxui.toast($this, ret.message);\r\n                $this.setData({submit: false, subtext: \"立即绑定\"});\r\n                return;\r\n            }\r\n            wx.navigateBack();\r\n        }, true, true, true);\r\n    },\r\n    imageChange:function(){\r\n      var $this = this;\r\n      core.get('member/bind/imageChange',{},function(result){\r\n         \r\n        $this.setData({ verifycode_img: result.verifycode_img});\r\n      });\r\n    }\r\n})","/**\r\n *\r\n * favorite\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-09\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\n\r\nPage({\r\n    data: {\r\n        icons: app.requirejs('icons'),\r\n        page: 1,\r\n        loading: false,\r\n        loaded: false,\r\n        isedit: false,\r\n        isCheckAll: false,\r\n        checkObj: {},\r\n        checkNum: 0,\r\n        list: []\r\n    },\r\n    onLoad: function (options) {\r\n        app.url(options);\r\n        this.getList();\r\n    },\r\n    onReachBottom: function () {\r\n        if (this.data.loaded || this.data.list.length==this.data.total) {\r\n            return;\r\n        }\r\n        this.getList();\r\n    },\r\n    onPullDownRefresh: function () {\r\n        wx.stopPullDownRefresh()\r\n    },\r\n    getList: function () {\r\n        var $this = this;\r\n        $this.setData({loading: true});\r\n        core.get('member/favorite/get_list', {page: $this.data.page}, function (result) {\r\n            var data = {loading: false, loaded: true, total: result.total, pagesize: result.pagesize,show:true};\r\n            if (result.list.length > 0) {\r\n                data.page = $this.data.page + 1;\r\n                data.list = $this.data.list.concat(result.list);\r\n                if(result.list.length<result.pagesize) {\r\n                    data.loaded = true\r\n                }\r\n            }\r\n            $this.setData(data);\r\n        });\r\n    },\r\n    itemClick: function (event) {\r\n        var $this = this;\r\n        var id = core.pdata(event).id;\r\n        var goodsid = core.pdata(event).goodsid;\r\n        if(!$this.data.isedit){\r\n            wx.navigateTo({url: '/pages/goods/detail/index?id='+goodsid});\r\n        }else{\r\n            var checkObj = $this.data.checkObj;\r\n            var checkNum = $this.data.checkNum\r\n            if(checkObj[id]){\r\n                checkObj[id] = false;\r\n                checkNum--;\r\n            }else{\r\n                checkObj[id] = true;\r\n                checkNum++;\r\n            }\r\n            var isCheckAll = true;\r\n            for (var i in checkObj){\r\n                if(!checkObj[i]){\r\n                    isCheckAll = false;\r\n                    break;\r\n                }\r\n            }\r\n            $this.setData({checkObj: checkObj, isCheckAll: isCheckAll, checkNum: checkNum});\r\n        }\r\n    },\r\n    btnClick: function (event) {\r\n        var $this = this;\r\n        var action = event.currentTarget.dataset.action;\r\n        if (action == 'edit') {\r\n            var checkObj = {};\r\n            for(var i in this.data.list){\r\n                var id = this.data.list[i].id;\r\n                checkObj[id] = false;\r\n            }\r\n            $this.setData({isedit: true, checkObj: checkObj, isCheckAll: false});\r\n        }\r\n        else if (action == 'delete') {\r\n            var checkObj = $this.data.checkObj;\r\n            var ids = [];\r\n            for (var i in checkObj){\r\n                if(checkObj[i]){\r\n                    ids.push(i);\r\n                }\r\n            }\r\n            if(ids.length<1){\r\n                return;\r\n            }\r\n            core.confirm(\"删除后不可恢复，确定要删除吗？\", function () {\r\n                core.post('member/favorite/remove', {ids: ids}, function (result) {\r\n                    $this.setData({isedit: false, checkNum: 0, page: 0, list: []});\r\n                    $this.getList();\r\n                });\r\n            });\r\n        }\r\n        else if (action == 'finish') {\r\n            $this.setData({isedit: false, checkNum: 0});\r\n        }\r\n    },\r\n    checkAllClick: function () {\r\n        var isCheckAll = this.data.isCheckAll?false:true;\r\n        var checkObj = this.data.checkObj;\r\n        var data = {isCheckAll: isCheckAll, checkObj: checkObj};\r\n        for(var i in checkObj){\r\n            data.checkObj[i] = isCheckAll?true:false;\r\n        }\r\n        data.checkNum = isCheckAll ? this.data.list.length :0;\r\n        this.setData(data);\r\n    }\r\n})","/**\r\n *\r\n * history\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-09\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\n\r\nPage({\r\n    data: {\r\n        icons: app.requirejs('icons'),\r\n        page: 1,\r\n        loading: false,\r\n        loaded: false,\r\n        isedit: false,\r\n        isCheckAll: false,\r\n        checkObj: {},\r\n        checkNum: 0,\r\n        list: []\r\n    },\r\n    onLoad: function (options) {\r\n        app.url(options);\r\n        this.getList();\r\n    },\r\n    onShow: function(){\r\n      var isIpx = app.getCache('isIpx');\r\n      var $this = this;\r\n      if (isIpx) {\r\n        $this.setData({\r\n          isIpx: true,\r\n          iphonexnavbar: 'fui-iphonex-navbar',\r\n          paddingb: 'padding-b'\r\n        })\r\n      } else {\r\n        $this.setData({\r\n          isIpx: false,\r\n          iphonexnavbar: '',\r\n          paddingb: ''\r\n        })\r\n      }\r\n    },\r\n    onReachBottom: function () {\r\n        if (this.data.loaded || this.data.list.length==this.data.total) {\r\n            return;\r\n        }\r\n        this.getList();\r\n    },\r\n    onPullDownRefresh: function () {\r\n        wx.stopPullDownRefresh()\r\n    },\r\n    getList: function () {\r\n        var $this = this;\r\n        $this.setData({loading: true});\r\n        core.get('member/history/get_list', {page: $this.data.page}, function (result) {\r\n            var data = {loading: false, loaded: true, total: result.total, pagesize: result.pagesize,show:true};\r\n            if (result.list.length > 0) {\r\n                data.page = $this.data.page + 1;\r\n                data.list = $this.data.list.concat(result.list);\r\n                if(result.list.length<result.pagesize) {\r\n                    data.loaded = true\r\n                }\r\n            }\r\n            $this.setData(data);\r\n        });\r\n    },\r\n    itemClick: function (event) {\r\n        var $this = this;\r\n        var id = core.pdata(event).id;\r\n        var goodsid = core.pdata(event).goodsid;\r\n        if (!$this.data.isedit) {\r\n            wx.navigateTo({url: '/pages/goods/detail/index?id=' + goodsid});\r\n        } else {\r\n            var checkObj = $this.data.checkObj;\r\n            var checkNum = $this.data.checkNum\r\n            if (checkObj[id]) {\r\n                checkObj[id] = false;\r\n                checkNum--;\r\n            } else {\r\n                checkObj[id] = true;\r\n                checkNum++;\r\n            }\r\n            var isCheckAll = true;\r\n            for (var i in checkObj) {\r\n                if (!checkObj[i]) {\r\n                    isCheckAll = false;\r\n                    break;\r\n                }\r\n            }\r\n            $this.setData({checkObj: checkObj, isCheckAll: isCheckAll, checkNum: checkNum});\r\n        }\r\n    },\r\n    btnClick: function (event) {\r\n        var $this = this;\r\n        var action = event.currentTarget.dataset.action;\r\n        if (action == 'edit') {\r\n            var checkObj = {};\r\n            for (var i in this.data.list) {\r\n                var id = this.data.list[i].id;\r\n                checkObj[id] = false;\r\n            }\r\n            $this.setData({isedit: true, checkObj: checkObj, isCheckAll: false});\r\n        }\r\n        else if (action == 'delete') {\r\n            var checkObj = $this.data.checkObj;\r\n            var ids = [];\r\n            for (var i in checkObj) {\r\n                if (checkObj[i]) {\r\n                    ids.push(i);\r\n                }\r\n            }\r\n            if (ids.length < 1) {\r\n                return;\r\n            }\r\n            core.confirm(\"删除后不可恢复，确定要删除吗？\", function () {\r\n                core.post('member/history/remove', {ids: ids}, function (result) {\r\n                    $this.setData({isedit: false, checkNum: 0, page: 0, list: []});\r\n                    $this.getList();\r\n                });\r\n            });\r\n        }\r\n        else if (action == 'finish') {\r\n            $this.setData({isedit: false, checkNum: 0});\r\n        }\r\n    },\r\n    checkAllClick: function () {\r\n        var isCheckAll = this.data.isCheckAll ? false : true;\r\n        var checkObj = this.data.checkObj;\r\n        var data = {isCheckAll: isCheckAll, checkObj: checkObj};\r\n        for (var i in checkObj) {\r\n            data.checkObj[i] = isCheckAll ? true : false;\r\n        }\r\n        data.checkNum = isCheckAll ? this.data.list.length : 0;\r\n        this.setData(data);\r\n    }\r\n})","/**\r\n *\r\n * favorite\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  Young 2017-01-18\r\n *\r\n */\r\nvar app=getApp(),core = app.requirejs('core'),$=app.requirejs('jquery');\r\nPage({\r\n    data: {\r\n        disabled: true,\r\n        coupon: {\r\n            count: 0\r\n        }\r\n    },\r\n    onLoad: function (options) {\r\n        // 页面初始化 options为页面跳转所带来的参数\r\n        app.url(options);\r\n        this.get_list();\r\n    },\r\n    onShow: function () {\r\n        var coupon = app.getCache(\"coupon\");\r\n        this.setData({\"coupon.id\": coupon.id, \"coupon.name\": coupon.name||''});\r\n    },\r\n    get_list: function () {\r\n        var $this=this;\r\n        core.get('member/recharge',{},function (json) {\r\n            json.show = true;\r\n            $this.setData(json)\r\n        });\r\n    },\r\n    toggle: function (e) {\r\n        var data = core.pdata(e),id=data.id,type=data.type,d={};\r\n        (id == 0 || typeof id =='undefined') ? d[type] = 1 : d[type] = 0;\r\n        this.setData(d);\r\n    },\r\n    money: function (e) {\r\n     \r\n      var disabled = true, money = $.trim(e.detail.value), $this = this;\r\n      if (money>=this.data.minimumcharge){\r\n            disabled = false;\r\n        }\r\n        core.get('sale/coupon/query',{type:1, money: money},function (ret) {\r\n            $this.setData({money: money,disabled:disabled, coupon: {id:0,name:'',count:ret.count}});\r\n        });\r\n    },\r\n    submit: function () {\r\n        var money = $.toFixed(this.data.money,2),data={};\r\n        if (this.data.disabled){\r\n            return;\r\n        }\r\n        if (typeof money == 'undefined' || isNaN(money)){\r\n            core.alert('请填写正确的充值金额!');\r\n            return;\r\n        }\r\n        if (money<=0 || this.data.disabled){\r\n            core.alert('最低充值金额为'+this.data.minimumcharge+'元!');\r\n            return;\r\n        }\r\n        data.money = money;\r\n        data.type = 'wechat';\r\n        data.couponid = this.data.coupon.id;\r\n        core.post('member/recharge/submit',data,function (json) {\r\n            if (json.error==0){\r\n                if (json.wechat.success){\r\n                    core.pay(json.wechat.payinfo,function (res) {\r\n                        if (res.errMsg == \"requestPayment:ok\"){\r\n                            core.post('member/recharge/wechat_complete',{logid:json.logid},function (js) {\r\n                                if (js.error==0){\r\n                                    wx.navigateBack();\r\n                                }else{\r\n                                    core.alert(js.message);\r\n                                }\r\n                            },true)\r\n                        }\r\n                    })\r\n                }else{\r\n                    core.alert(list.wechat.payinfo.message + '\\n不能使用微信支付!')\r\n                }\r\n            }else{\r\n                core.alert(json.message);\r\n            }\r\n        },true);\r\n    }\r\n});","/**\r\n *\r\n * withdraw\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-10\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n    data: {\r\n        loading: true,\r\n        objectArray: [],\r\n        checkedIndex: 1,\r\n        checked: {},\r\n        bankChecked: {},\r\n        money: 0,\r\n        chargeShow: false,\r\n        disabled: true,\r\n        info: {},\r\n        realInfo: {}\r\n    },\r\n    onShow: function (options) {\r\n        app.url(options);\r\n        this.getInfo();\r\n        this.setData({isSubmit: false});\r\n    },\r\n    onPullDownRefresh: function () {\r\n        wx.stopPullDownRefresh()\r\n    },\r\n    getInfo: function () {\r\n        var $this = this;\r\n        core.get('member/withdraw', {}, function (result) {\r\n          // result.type_array.push({ type: 0, title: \"提现到微信余额\"});\r\n            var data = {info: result, objectArray: [],show:true};\r\n            if(!$.isEmptyObject(result.last_data)){\r\n                data.realInfo = {alipay: result.last_data.alipay, alipay1: result.last_data.alipay, bankcard: result.last_data.bankcard, bankcard1: result.last_data.bankcard, bankname: result.last_data.bankname, realname: result.last_data.realname};\r\n            }\r\n            if(result.type_array){\r\n                $.each(result.type_array, function (index,val) {\r\n                    data.objectArray.push({id: val.type, name: val.title})\r\n                    if(val.checked){\r\n                        if(!data.checked){\r\n                            data.checked = {id: val.type, name: val.title};\r\n                        }\r\n                        data.checkedIndex = index;\r\n                    }\r\n                });\r\n            }\r\n            if(!data.checked){\r\n                data.checked = data.objectArray[0];\r\n                data.checkedIndex = 0;\r\n            }\r\n            data.bankCheckedIndex = result.lastbankindex||0;\r\n            $this.setData(data);\r\n            if(result.withdrawmoney>0 && result.credit>=result.withdrawmoney){\r\n                data.money = result.withdrawmoney;\r\n                $this.moneyChange({detail: {value: result.withdrawmoney}});\r\n            }\r\n            if(data.checked.id==3){\r\n                $this.bankChange({detail: {value: result.lastbankindex||0}});\r\n            }\r\n            wx.setNavigationBarTitle({title: result.moneytext+\"提现\"})\r\n        });\r\n    },\r\n    bindAll: function (event) {\r\n        if(this.data.info.credit<=0){\r\n            return;\r\n        }\r\n        this.setData({money: this.data.info.credit});\r\n        this.allow();\r\n        this.moneyChange({detail: {value: this.data.info.credit}});\r\n    },\r\n    allow: function () {\r\n        var info = this.data.info;\r\n        var money = parseFloat(this.data.money);\r\n        if(money<=0 || isNaN(money)){\r\n            return false;\r\n        }\r\n        if(info.withdrawmoney>0 && money<info.withdrawmoney){\r\n            return false;\r\n        }\r\n        if(money>info.credit){\r\n            return false;\r\n        }\r\n        if ($.isEmptyObject(this.data.checked)){\r\n            return false;\r\n        }\r\n        if (info.withdrawcharge>0 && money>0) {\r\n            var deductionmoney = money / 100 * info.withdrawcharge;\r\n            deductionmoney = Math.round(deductionmoney*100)/100;\r\n            if (deductionmoney >= info.withdrawbegin && deductionmoney <= info.withdrawend) {\r\n                deductionmoney = 0;\r\n            }\r\n            var realmoney = money - deductionmoney;\r\n            realmoney = Math.round(realmoney*100)/100;\r\n            this.setData({deductionmoney: deductionmoney, realmoney: realmoney, chargeShow: true})\r\n        }\r\n        return true;\r\n    },\r\n    moneyChange: function (event) {\r\n        var money = event.detail.value;\r\n        if(money<0 || isNaN(money)){\r\n            money = 0;\r\n        }\r\n        this.setData({money: money});\r\n        this.setData({disabled: this.allow()?false:true})\r\n    },\r\n   \r\n    typeChange: function (e) {\r\n      \r\n      var data = {};\r\n      var index = e.currentTarget.dataset.name;\r\n        data.checked = this.data.objectArray[index];\r\n        if(data.checked.id==3){\r\n            data.bankChecked = this.data.info.banklist[0];\r\n            data.bankCheckedIndex = 0;\r\n        }\r\n        this.setData(data);\r\n    },\r\n    inputChange: function (event) {\r\n        var realinfo = this.data.realInfo;\r\n        var bindtype = event.currentTarget.dataset.type;\r\n        var value = $.trim(event.detail.value);\r\n        realinfo[bindtype]=value;\r\n        this.setData({realInfo: realinfo});\r\n    },\r\n    bankChange: function (event) {\r\n        var index=$.trim(event.detail.value), bank=this.data.info.banklist[index];\r\n        this.setData({bankChecked: bank});\r\n    },\r\n    submit: function (event) {\r\n        var $this=this, data=this.data;\r\n        if(data.disabled || data.isSubmit){\r\n            return;\r\n        }\r\n        if(data.money<=0){\r\n            foxui.toast($this, \"请填写提现金额\");\r\n            return;\r\n        }\r\n        if($.isEmptyObject(data.checked)){\r\n            foxui.toast($this, \"请选择提现方式\");\r\n            return;\r\n        }\r\n        var html = data.checked.name;\r\n        var postData = {applytype: data.checked.id, money: data.money};\r\n        if(data.checked.id==2){\r\n            if(!data.realInfo.realname){\r\n                foxui.toast($this, \"请填写姓名\");\r\n                return;\r\n            }\r\n            if(!data.realInfo.alipay){\r\n                foxui.toast($this, \"请填写支付宝帐号\");\r\n                return;\r\n            }\r\n            if(!data.realInfo.alipay1){\r\n                foxui.toast($this, \"请确认支付宝帐号\");\r\n                return;\r\n            }\r\n            if(data.realInfo.alipay != data.realInfo.alipay1){\r\n                foxui.toast($this, \"两次填写的支付宝不一致\");\r\n                return;\r\n            }\r\n            html += \"？姓名:\" + data.realInfo.realname + \" 支付宝帐号:\" + data.realInfo.alipay;\r\n            postData.realname = data.realInfo.realname;\r\n            postData.alipay = data.realInfo.alipay;\r\n            postData.alipay1 = data.realInfo.alipay1;\r\n        }\r\n        else if(data.checked.id==3){\r\n            if($.isEmptyObject(data.bankChecked)){\r\n                foxui.toast($this, \"请选择提现银行\");\r\n                return;\r\n            }\r\n            if(!data.realInfo.realname){\r\n                foxui.toast($this, \"请填写姓名\");\r\n                return;\r\n            }\r\n            if(!data.realInfo.bankcard){\r\n                foxui.toast($this, \"请填写银行卡号\");\r\n                return;\r\n            }\r\n            if(!data.realInfo.bankcard1){\r\n                foxui.toast($this, \"请确认银行卡号\");\r\n                return;\r\n            }\r\n            if(data.realInfo.bankcard != data.realInfo.bankcard1){\r\n                foxui.toast($this, \"两次填写的银行卡号不一致\");\r\n                return;\r\n            }\r\n            html += \"？姓名:\" + data.realInfo.realname + \" 银行:\" + data.bankChecked.bankname + \" 卡号:\" + data.realInfo.bankcard;\r\n            postData.realname = data.realInfo.realname;\r\n            postData.bankname = data.bankChecked.bankname;\r\n            postData.bankcard = data.realInfo.bankcard;\r\n            postData.bankcard1 = data.realInfo.bankcard1;\r\n        }\r\n        if (data.checked.id < 2) {\r\n            var confirm_msg = '确认要' + html + \"？\";\r\n        } else {\r\n            var confirm_msg = '确认要' + html;\r\n        }\r\n        if (data.info.withdrawcharge > 0) {\r\n            confirm_msg += ' 扣除手续费 ' + data.deductionmoney + ' 元,实际到账金额 ' + data.realmoney + ' 元';\r\n        }\r\n        core.confirm(confirm_msg, function () {\r\n            $this.setData({isSubmit: true});\r\n            core.post('member/withdraw/submit', postData, function (result) {\r\n                if(result.error){\r\n                    foxui.toast($this, result.message);\r\n                    $this.setData({isSubmit: false});\r\n                    return;\r\n                }\r\n                foxui.toast($this, \"提现申请成功，请等待审核\");\r\n                setTimeout(function () {\r\n                    wx.navigateTo({url: '/pages/member/log/index?type=1'});\r\n                }, 500);\r\n            });\r\n        });\r\n    }\r\n})","/**\r\n *\r\n * favorite\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-09\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\n\r\nPage({\r\n    data: {\r\n        icons: app.requirejs('icons'),\r\n        type: 0,\r\n        isopen: false,\r\n        page: 1,\r\n        loaded: false,\r\n        loading: true,\r\n        list: []\r\n    },\r\n    onLoad: function (options) {\r\n        if(options.type>0){\r\n            this.setData({type: 1});\r\n        }\r\n        app.url(options);\r\n        this.getList();\r\n    },\r\n    onPullDownRefresh: function () {\r\n        wx.stopPullDownRefresh()\r\n    },\r\n    onReachBottom:function(){\r\n        if(this.data.loaded || this.data.list.length==this.data.total){\r\n            return;\r\n        }\r\n        this.getList();\r\n    },\r\n    getList: function () {\r\n        var $this = this;\r\n        $this.setData({loading:true});\r\n        core.get('member/log/get_list', {type: $this.data.type, page: $this.data.page}, function(result){\r\n            var data = {loading: false, total: result.total,show:true};\r\n            if($this.data.page==1){\r\n                data.isopen = result.isopen;\r\n                var title = \"充值记录\";\r\n                if (result.isopen==1){\r\n                    title = result.moneytext +\"明细\"\r\n                }\r\n                wx.setNavigationBarTitle({title: title})\r\n            }\r\n            if(!result.list){\r\n                result.list = [];\r\n            }\r\n            if(result.list.length>0){\r\n                data.page = $this.data.page+1;\r\n                data.list = $this.data.list.concat(result.list);\r\n                if(result.list.length<result.pagesize) {\r\n                    data.loaded = true\r\n                }\r\n            }\r\n            $this.setData(data);\r\n        });\r\n    },\r\n    myTab: function (event) {\r\n        var $this = this;\r\n        var type = core.pdata(event).type;\r\n        $this.setData({type: type, page: 1, list: [], loading: true});\r\n        $this.getList();\r\n    }\r\n})","/**\r\n *\r\n * address\\index.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-09\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\n\r\nPage({\r\n    data: {\r\n        loaded: false,\r\n        list: []\r\n    },\r\n    onLoad: function (options) {\r\n        app.url(options);\r\n    },\r\n    onShow: function () {\r\n        this.getList();\r\n        var $this = this;\r\n        var isIpx = app.getCache('isIpx');\r\n        if (isIpx) {\r\n          $this.setData({\r\n            isIpx: true,\r\n            iphonexnavbar: 'fui-iphonex-navbar',\r\n            paddingb: 'padding-b'\r\n          })\r\n        } else {\r\n          $this.setData({\r\n            isIpx: false,\r\n            iphonexnavbar: '',\r\n            paddingb: ''\r\n          })\r\n        }\r\n    },\r\n    onPullDownRefresh: function(){\r\n        wx.stopPullDownRefresh()\r\n    },\r\n  chooseAddress() {\r\n    var $this = this\r\n    this.data.can = false\r\n    wx.chooseAddress({\r\n      success(res) {\r\n        var params = {\r\n          realname: res.userName,\r\n          mobile: res.telNumber,\r\n          address: res.detailInfo,\r\n          province: res.provinceName,\r\n          city: res.cityName,\r\n          area: res.countyName,\r\n          is_from_wx: 1\r\n        }\r\n        setTimeout(function () {\r\n        wx.navigateTo({\r\n          url: '/pages/member/address/post?type=member&params=' + JSON.stringify(params)\r\n          })\r\n        },0)\r\n      }\r\n    })\r\n  },\r\n    getList: function () {\r\n      \r\n        var $this = this;\r\n        core.get('member/address/get_list',{}, function(result){\r\n            $this.setData({loaded: true, list: result.list,show:true});\r\n        });\r\n    },\r\n    setDefault: function (event) {\r\n        var $this = this;\r\n        var id = core.pdata(event).id;\r\n        $this.setData({loaded: false});\r\n        core.get('member/address/set_default',{id: id}, function(result){\r\n            core.toast(\"设置成功\");\r\n            $this.getList();\r\n        });\r\n    },\r\n    deleteItem: function (event) {\r\n        var $this = this;\r\n        var id = core.pdata(event).id;\r\n        core.confirm(\"删除后无法恢复, 确认要删除吗 ?\", function () {\r\n            $this.setData({loaded: false});\r\n            core.get('member/address/delete',{id : id}, function(result){\r\n                core.toast(\"删除成功\");\r\n                $this.getList();\r\n            });\r\n        });\r\n    }\r\n})","/**\r\n *\r\n * address\\post.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-18\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar fui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n  data: {\r\n    id: null,\r\n    posting: false,\r\n    subtext: \"保存地址\",\r\n    detail: {\r\n      realname: '',\r\n      mobile: '',\r\n      areas: '',\r\n      street: '',\r\n      address: ''\r\n    },\r\n    showPicker: false,\r\n    pvalOld: [0, 0, 0],\r\n    pval: [0, 0, 0],\r\n    areas: [],  // 原始数据\r\n    street: [],\r\n    streetIndex: 0,\r\n    noArea: false\r\n  },\r\n  onLoad: function (options) {\r\n    if (options.params){\r\n      this.setData({ detail: JSON.parse(options.params) });\r\n    }\r\n    this.setData({ id: Number(options.id)});\r\n    this.setData({ areas: app.getCache(\"cacheset\").areas, type: options.type });\r\n    app.url(options);\r\n      this.getDetail();\r\n    if (!options.id) {\r\n      wx.setNavigationBarTitle({ title: '添加收货地址' })\r\n    }\r\n    //处理一个客户切换新版地址库之后 无法清除地址库缓存的问题\r\n\r\n  },\r\n  getDetail: function () {\r\n    var $this = this;\r\n    var id = $this.data.id;\r\n    core.get('member/address/get_detail', { id: id }, function (result) {\r\n      var data = { openstreet: result.openstreet, show: true };\r\n     \r\n      if (!$.isEmptyObject(result.detail)) {\r\n        wx.setNavigationBarTitle({ title: '编辑收货地址' });\r\n        var area = result.detail.province + \" \" + result.detail.city + \" \" + result.detail.area;\r\n        var index = $this.getIndex(area, $this.data.areas);\r\n        data.pval = index;\r\n        data.pvalOld = index;\r\n        data.detail = result.detail;\r\n      } else if ($this.data.detail){\r\n        console.log($this.data.detail)\r\n        var area = $this.data.detail.province + \" \" + $this.data.detail.city + \" \" + $this.data.detail.area;\r\n        var index = $this.getIndex(area, $this.data.areas);\r\n        data.pval = index;\r\n        data.pvalOld = index;\r\n      }\r\n      console.log(index)\r\n      $this.setData(data);\r\n      if (result.openstreet && index) {\r\n        $this.getStreet($this.data.areas, index);\r\n      }\r\n    });\r\n  },\r\n  submit: function () {\r\n    var $this = this;\r\n    var detail = $this.data.detail;\r\n    if ($this.data.posting) {\r\n      return;\r\n    }\r\n    if (detail.realname == '' || !detail.realname) {\r\n      fui.toast($this, \"请填写收件人\");\r\n      return;\r\n    } if (detail.mobile == '' || !detail.mobile) {\r\n      fui.toast($this, \"请填写联系电话\");\r\n      return;\r\n    }\r\n    if (detail.city == '' || !detail.city) {\r\n      fui.toast($this, \"请选择所在地区\");\r\n      return;\r\n    }\r\n    if ($this.data.street.length > 0 && (detail.street == '' || !detail.street)) {\r\n      fui.toast($this, \"请选择所在街道\");\r\n      return;\r\n    }\r\n    if (detail.address == '' || !detail.address) {\r\n      fui.toast($this, \"请填写详细地址\");\r\n      return;\r\n    }\r\n    console.log(detail)\r\n    if (detail.is_from_wx){\r\n      $this.onConfirm('is_from_wx')\r\n    }\r\n    console.log(detail)\r\n    if (!detail.datavalue) {\r\n      fui.toast($this, \"地址数据出错，请重新选择\");\r\n      return;\r\n    }\r\n    // 手机号验证更换为大陆港澳台地区都适用\r\n    if (!/^[1][3-9]\\d{9}$|^([6|9])\\d{7}$|^[0][9]\\d{8}$|^[6]([8|6])\\d{5}$/.test(detail.mobile)) {\r\n      fui.toast($this, \"请填写正确联系电话\");\r\n      return;\r\n    }\r\n    detail.id = $this.data.id||'';\r\n    $this.setData({ posting: true });\r\n    core.post('member/address/submit', detail, function (result) {\r\n      if (result.error != 0) {\r\n        $this.setData({ posting: false });\r\n        fui.toast($this, result.message);\r\n        return;\r\n      }\r\n      $this.setData({ subtext: \"保存成功\" });\r\n      core.toast(\"保存成功\");\r\n      setTimeout(function () {\r\n        detail.id = result.addressid;\r\n        console.log($this.data.type)\r\n        console.log($this.data.type == 'member')\r\n        if ($this.data.type == 'member') {\r\n          // wx.redirectTo({\r\n          //   url: '/pages/member/address/index'\r\n          // });\r\n          wx.navigateBack();\r\n          return\r\n        } if ($this.data.type == 'quickaddress') {\r\n          app.setCache(\"orderAddress\", detail, 30);\r\n          wx.navigateBack();\r\n        } else {\r\n          wx.navigateTo({\r\n            url: '/pages/member/address/select'\r\n          });\r\n        }\r\n      }, 1000);\r\n    });\r\n  },\r\n  onChange: function (event) {\r\n    var $this = this;\r\n    var vname = $this.data.detail;\r\n    var bindtype = event.currentTarget.dataset.type;\r\n    var value = $.trim(event.detail.value);\r\n    if (bindtype == 'street') {\r\n      vname.streetdatavalue = $this.data.street[value].code\r\n      value = $this.data.street[value].name;\r\n    }\r\n    vname[bindtype] = value;\r\n    $this.setData({ detail: vname });\r\n  },\r\n  getStreet: function (areas, val) {\r\n    console.log(areas, val)\r\n    if (!areas || !val) {\r\n      return;\r\n    }\r\n    var $this = this;\r\n    if (!$this.data.detail.province || !$this.data.detail.city || !this.data.openstreet) {\r\n      return;\r\n    }\r\n    var city = areas[val[0]].city[val[1]].code;\r\n    var area = areas[val[0]].city[val[1]].area[val[2]].code;\r\n    core.get('getstreet', { city: city, area: area }, function (result) {\r\n      var street = result.street;\r\n      var data = { street: street };\r\n      if (street && $this.data.detail.streetdatavalue) {\r\n        for (var i in street) {\r\n          if (street[i].code == $this.data.detail.streetdatavalue) {\r\n            data.streetIndex = i;\r\n            $this.setData({ 'detail.street': street[i].name });\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      $this.setData(data);\r\n    });\r\n  },\r\n  selectArea: function (e) {\r\n    var area = e.currentTarget.dataset.area;\r\n    var index = this.getIndex(area, this.data.areas);\r\n    this.setData({ pval: index, pvalOld: index, showPicker: true })\r\n  },\r\n  bindChange: function (e) {\r\n    var oldValue = this.data.pvalOld;\r\n    var newValue = e.detail.value;\r\n    if (oldValue[0] != newValue[0]) {\r\n      newValue[1] = 0;\r\n    }\r\n    if (oldValue[1] != newValue[1]) {\r\n      newValue[2] = 0;\r\n    }\r\n    this.setData({ pval: newValue, pvalOld: newValue });\r\n  },\r\n  onCancel: function (e) {\r\n    this.setData({ showPicker: false });\r\n  },\r\n  onConfirm: function (e) {\r\n    var val = this.data.pval;\r\n    var areas = this.data.areas;\r\n    var detail = this.data.detail;\r\n    detail.province = areas[val[0]].name;\r\n    detail.city = areas[val[0]].city[val[1]].name;\r\n    detail.datavalue = areas[val[0]].code + \" \" + areas[val[0]].city[val[1]].code;\r\n    if (areas[val[0]].city[val[1]].area && areas[val[0]].city[val[1]].area.length > 0) {\r\n      detail.area = areas[val[0]].city[val[1]].area[val[2]].name;\r\n      detail.datavalue += \" \" + areas[val[0]].city[val[1]].area[val[2]].code;\r\n      this.getStreet(areas, val);\r\n    } else {\r\n      detail.area = \"\";\r\n    }\r\n    if (e!='is_from_wx'){\r\n      detail.street = '';\r\n    }\r\n    this.setData({ detail: detail, streetIndex: 0, showPicker: false });\r\n  },\r\n  getIndex: function (str, areas) {\r\n    if ($.trim(str) == '' || !$.isArray(areas)) {\r\n      return [0, 0, 0];\r\n    }\r\n    var arr = str.split(\" \");\r\n    var index = [0, 0, 0];\r\n    for (var i in areas) {\r\n      if (areas[i].name == arr[0]) {\r\n        index[0] = Number(i);\r\n        for (var ii in areas[i].city) {\r\n          if (areas[i].city[ii].name == arr[1]) {\r\n            index[1] = Number(ii);\r\n            for (var iii in areas[i].city[ii].area) {\r\n              if (areas[i].city[ii].area[iii].name == arr[2]) {\r\n                index[2] = Number(iii);\r\n                break;\r\n              }\r\n            }\r\n            break;\r\n          }\r\n        }\r\n        break;\r\n      }\r\n    }\r\n    return index;\r\n  }\r\n})","/**\r\n *\r\n * address\\select.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-09\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\n\r\nPage({\r\n  data: {\r\n    loaded: false,\r\n    list: [],\r\n    can:true\r\n  },\r\n  onLoad: function (options) {\r\n    app.url(options);\r\n  },\r\n  onShow: function () {\r\n    if(!this.data.can){\r\nreturn\r\n    }\r\n    this.getList();\r\n    var isIpx = app.getCache('isIpx');\r\n    var $this = this;\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar',\r\n        paddingb: 'padding-b'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: '',\r\n        paddingb: ''\r\n      })\r\n    }\r\n  },\r\n  onPullDownRefresh: function () {\r\n    wx.stopPullDownRefresh()\r\n  },\r\n  getList: function () {\r\n    var $this = this;\r\n    console.log(33)\r\n    core.get('member/address/get_list', {}, function (result) {\r\n      $this.setData({ loaded: true, list: result.list, show: true });\r\n    });\r\n  },\r\n  chooseAddress() {\r\n    var $this = this\r\n    this.data.can = false\r\n    wx.chooseAddress({\r\n      success(res) {\r\n        var params = {\r\n          realname: res.userName,\r\n          mobile: res.telNumber,\r\n          address: res.detailInfo,\r\n          province: res.provinceName,\r\n          city: res.cityName,\r\n          area: res.countyName,\r\n          is_from_wx: 1\r\n        }\r\n        setTimeout(function () {\r\n           wx.redirectTo({\r\n          url: '/pages/member/address/post?type=quickaddress&params=' + JSON.stringify(params)\r\n        })\r\n        },0)\r\n      }\r\n    })\r\n  },\r\n  select: function (event) {\r\n    var index = core.pdata(event).index;\r\n    app.setCache(\"orderAddress\", this.data.list[index], 30);\r\n    wx.navigateBack();\r\n  }\r\n});","/**\r\n *\r\n * member/cart/index.js\r\n *\r\n * @create 2017-1-5\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-10\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n    data: {\r\n        route:'cart',\r\n        icons: app.requirejs('icons'),\r\n        merch_list:false,\r\n        list:false,\r\n        edit_list:[],\r\n      can_sync_goodscircle:false,\r\n        modelShow: false\r\n    },\r\n    onLoad: function (options) {\r\n      app.checkAuth();\r\n      var $this = this;\r\n      core.get('black', {}, function (res) {\r\n        if (res.isblack) {\r\n          wx.showModal({\r\n            title: '无法访问',\r\n            content: '您在商城的黑名单中，无权访问！',\r\n            success: function (res) {\r\n              if (res.confirm) {\r\n                $this.close()\r\n              }\r\n              if (res.cancel) {\r\n                $this.close()\r\n              }\r\n            }\r\n          })\r\n        }\r\n      });\r\n        app.url(options);\r\n    },\r\n    onShow:function () {\r\n        this.get_cart();\r\n        var $this = this;\r\n        $this.setData({\r\n          imgUrl: app.globalData.approot,\r\n    isgoods: app.globalData.isgoods \r\n        });\r\n        wx.getSetting({\r\n    \t\tsuccess: function(res) {\r\n    \t\t\tvar limits = res.authSetting['scope.userInfo'];\r\n    \t\t\t$this.setData({limits: limits})\r\n    \t\t\tif(!limits) {\r\n    \t\t\t\t// $this.setData({modelShow: true})\r\n    \t\t\t}\r\n    \t\t}\r\n    \t})\r\n    },\r\n    get_cart:function () {\r\n        var $this = this,setData;\r\n        core.get('member/cart/get_cart',{},function (data) {\r\n          \r\n            setData = {\r\n                show:true,\r\n                ismerch:false,\r\n                ischeckall:data.ischeckall,\r\n              can_sync_goodscircle: data.can_sync_goodscircle,\r\n                total:data.total,\r\n                cartcount:data.total,\r\n                totalprice:data.totalprice,\r\n                empty:data.empty||false,\r\n                sysset: data.sysset\r\n            };\r\n            if (typeof data.merch_list == 'undefined'){\r\n                setData.list = data.list||[];\r\n                $this.setData(setData)\r\n            }else{\r\n                setData.merch_list = data.merch_list||[];\r\n                setData.ismerch = true;\r\n                $this.setData(setData)\r\n            }\r\n        });\r\n    },\r\n    edit: function (e) {\r\n        var $this = this;\r\n        if (!$this.data.limits) {\r\n          // $this.setData({ modelShow: true })\r\n          return;\r\n        }\r\n        var dataset = core.data(e),$this=this,ids;\r\n        switch (dataset.action){\r\n            case 'edit':\r\n                this.setData({edit: true});break;\r\n            case 'complete':\r\n                this.allgoods(false);\r\n                this.setData({edit: false});break;\r\n            case 'move':\r\n                ids = this.checked_allgoods().data;\r\n                if (!$.isEmptyObject(ids)){\r\n                    core.post('member/cart/tofavorite',{ids:ids},function (data) {\r\n                        $this.get_cart();\r\n                    });\r\n                }break;\r\n            case 'delete':\r\n                ids = this.checked_allgoods().data;\r\n                if (!$.isEmptyObject(ids)){\r\n                    core.confirm('是否确认删除该商品?',function () {\r\n                        core.post('member/cart/remove',{ids:ids},function (data) {\r\n                            $this.get_cart();\r\n                        });\r\n                    });\r\n                }break;\r\n            case 'pay':\r\n                if (this.data.total > 0){\r\n                  core.get('member/cart/submit', {}, function (ret) {\r\n\r\n                    if(ret.error == 0) {\r\n                      wx.navigateTo({\r\n                        url: '/pages/order/create/index'\r\n                      });\r\n                    } else {\r\n                      foxui.toast($this, ret.message );\r\n                      $this.get_cart();\r\n                      return\r\n                    }\r\n                  });\r\n                }\r\n                break;\r\n        }\r\n    },\r\n    checkall:function (e) {\r\n        core.loading();\r\n        var $this=this,select = this.data.ischeckall ? 0 : 1;\r\n        core.post('member/cart/select',{id:'all',select:select},function (data) {\r\n            $this.get_cart();\r\n            core.hideLoading();\r\n        });\r\n    },\r\n    update:function (e) {\r\n        var $this=this,select = this.data.ischeckall ? 0 : 1;\r\n        core.post('member/cart/select',{id:'all',select:select},function (data) {\r\n            $this.get_cart();\r\n        });\r\n    },\r\n    number: function (e) {\r\n        var $this=this,dataset = core.pdata(e),val = foxui.number(this,e),id = dataset.id,optionid=dataset.optionid;\r\n        if ((val == 1 && dataset.value == 1 && e.target.dataset.action=='minus') || (dataset.value == dataset.max && e.target.dataset.action=='plus')){\r\n            return;\r\n        }\r\n        core.post('member/cart/update',{id:id,optionid:optionid,total:val},function (data) {\r\n            $this.get_cart();\r\n        });\r\n    },\r\n    selected: function (e) {\r\n        core.loading();\r\n        var $this=this,dataset = core.pdata(e),id = dataset.id,select=dataset.select==1?0:1;\r\n        core.post('member/cart/select',{id:id,select:select},function (data) {\r\n            $this.get_cart();\r\n            core.hideLoading();\r\n        });\r\n    },\r\n    allgoods:function (check) {\r\n        var edit_list = this.data.edit_list;\r\n        if (!$.isEmptyObject(edit_list) && typeof check =='undefined'){\r\n            return edit_list;\r\n        }\r\n        check = typeof check =='undefined' ? false : check;\r\n        if (this.data.ismerch){\r\n            for(var i in this.data.merch_list){\r\n                for(var ii in this.data.merch_list[i].list){\r\n                    edit_list[this.data.merch_list[i].list[ii].id] =check\r\n                }\r\n            }\r\n        }else{\r\n            for(var i in this.data.list){\r\n                edit_list[this.data.list[i].id] =check\r\n            }\r\n        }\r\n        return edit_list;\r\n    },\r\n    checked_allgoods:function () {\r\n        var allgoods = this.allgoods(),data=[],cartcount = 0;\r\n        for(var ii in allgoods){\r\n            if (allgoods[ii]){\r\n                data.push(ii);\r\n                cartcount++\r\n            }\r\n        }\r\n        return {data:data,cartcount:cartcount};\r\n    },\r\n    editcheckall:function (e) {\r\n        var check = core.pdata(e).check,edit_list=this.allgoods(!check);\r\n        this.setData({\r\n            edit_list:edit_list,\r\n            editcheckall:!check\r\n        });\r\n        this.editischecked();\r\n    },\r\n    editischecked:function () {\r\n        var editischecked = false,editcheckall=true,allgoods = this.allgoods();\r\n        for(var i in this.data.edit_list){\r\n            if (this.data.edit_list[i]){\r\n                editischecked=true;break;\r\n            }\r\n        }\r\n        for(var ii in allgoods){\r\n            if (!allgoods[ii]){\r\n                editcheckall=false;break;\r\n            }\r\n        }\r\n        this.setData({\r\n            editischecked:editischecked,\r\n            editcheckall:editcheckall\r\n        })\r\n    },\r\n    edit_list:function (e) {\r\n        var dataset = core.pdata(e),edit_list=this.data.edit_list;\r\n        if (typeof edit_list[dataset.id] != 'undefined' && edit_list[dataset.id] ==1){\r\n            edit_list[dataset.id] = false;\r\n        }else{\r\n            edit_list[dataset.id] = true;\r\n        }\r\n        this.setData({\r\n            edit_list:edit_list\r\n        });\r\n        this.editischecked();\r\n    },\r\n    url:function (e) {\r\n        var data = core.pdata(e);\r\n        wx.navigateTo({\r\n            url:data.url\r\n        });\r\n    },\r\n    onShareAppMessage: function () {\r\n        return core.onShareAppMessage();\r\n    },\r\n    \r\n    \r\n    /*用户授权-取消*/\r\n    cancelclick:  function(){\r\n   \t  this.setData({modelShow: false})\r\n   \t  wx.switchTab({\r\n  \t\t url: '/pages/index/index'\r\n  \t  })\r\n    },\r\n    /*用户授权-去设置*/\r\n    confirmclick: function(){\r\n      this.setData({modelShow: false});\r\n      wx.openSetting({\r\n        success: function (res) { }\r\n      })\r\n    },\r\n    close: function () {\r\n      app.globalDataClose.flag = true;\r\n      wx.reLaunch({\r\n        url: '/pages/index/index',\r\n      })\r\n    },\r\n    // userinfo:function(e){\r\n    //   var $this = this;\r\n    //   app.getUserInfo(function(){\r\n    //     $this.onShow();\r\n    //   });\r\n    // }\r\n\r\n});","// pages/verifygoods/index.js\r\nvar app = getApp(), core = app.requirejs('core'), $ = app.requirejs('jquery');\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n      list:[],\r\n      page:1,\r\n      cate: '',\r\n      loaded: false,\r\n      loading: true,\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    this.get_list();\r\n  },\r\n  get_list: function () {\r\n    var $this = this;\r\n    $this.setData({ loading: true });\r\n    core.get('verifygoods/get_list', { page: $this.data.page, cate: $this.data.cate }, function (result) {\r\n      var data = { loading: false, total: result.total, show: true };\r\n      if (!result.list) {\r\n        result.list = [];\r\n      }\r\n      if (result.list.length > 0) {\r\n        data.page = $this.data.page + 1;\r\n        data.list = $this.data.list.concat(result.list);\r\n        if (result.list.length < result.pagesize) {\r\n          data.loaded = true\r\n        }\r\n      }\r\n      $this.setData(data);\r\n    });\r\n  },\r\n  selected:function(e){\r\n    var $this = this;\r\n    var cate = e.currentTarget.dataset.cate;\r\n    $this.setData({ cate: cate, page: 1, list: [], loading: true});\r\n    this.get_list();\r\n  },\r\n  onPullDownRefresh: function () {\r\n    wx.stopPullDownRefresh()\r\n  },\r\n  onReachBottom: function () {\r\n    if (this.data.loaded || this.data.list.length == this.data.total) {\r\n      return;\r\n    }\r\n    this.getList();\r\n  }\r\n})","// pages/verifygoods/detail/index.js\r\nvar app = getApp(), core = app.requirejs('core'), $ = app.requirejs('jquery');\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    verifygoods:[],\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    this.setData({\r\n      options: options\r\n    });\r\n    app.url(options);\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n    this.get_detail();\r\n  },\r\n  get_detail: function () {\r\n    var $this = this;\r\n    core.get('verifygoods/get_detail', $this.data.options, function (result) {\r\n      if (result.error == 0) {\r\n      \r\n        $this.setData({ verifygoods: result.item,store:result.store,canverify:result.canverify,canverify_message:result.canverify_message, qrcode: result.qrcode, verifygoodlogs: result.verifygoodlogs, verifynum: result.verifynum, limitdatestr: result.limitdatestr, verifycode: result.verifycode })\r\n      } else {\r\n        if (result.error != 50000) {\r\n          core.toast(result.message, 'loading');\r\n        }\r\n        wx.redirectTo({\r\n          url: '/pages/verifygoods/index'\r\n        })\r\n      }\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  }\r\n})","/**\r\n *\r\n * coupon\\index\\index.js\r\n *\r\n * @create 2017-02-03\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-02-04\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\n\r\nPage({\r\n    data: {\r\n        cates: [],\r\n        cateid: 0,\r\n        page: 1,\r\n        loading: false,\r\n        loaded: false,\r\n        list: [],\r\n        approot: app.globalData.approot\r\n    },\r\n    onLoad: function (options) {\r\n        if(options.cateid){\r\n            this.setData({cateid: options.cateid});\r\n        }\r\n        this.getCate();\r\n        this.getList();\r\n    },\r\n    getCate: function () {\r\n        var $this = this;\r\n        core.get('sale/coupon/getCouponCate', {}, function (ret) {\r\n            if(ret.list.length>0){\r\n                $this.setData({cates: ret.list});\r\n            }\r\n        });\r\n    },\r\n    getList: function () {\r\n        var $this = this;\r\n        core.loading();\r\n        this.setData({loading: true});\r\n        core.get('sale/coupon/getlist', {page: this.data.page, cateid:this.data.cateid}, function (ret) {\r\n            var data = {loading: false, total: ret.total, pagesize: ret.pagesize};\r\n            if (ret.list.length > 0) {\r\n                data.page = $this.data.page + 1;\r\n                data.list = $this.data.list.concat(ret.list);\r\n                if(ret.list.length<ret.pagesize) {\r\n                    data.loaded = true\r\n                }\r\n                $this.setSpeed(ret.list);\r\n            }\r\n            $this.setData(data);\r\n            core.hideLoading();\r\n        });\r\n    },\r\n    setSpeed:function (list) {\r\n        if (!list || list.length<1){\r\n            return\r\n        }\r\n        for(var i in list){\r\n            var item = list[i];\r\n            if(isNaN(item.lastratio)){\r\n                continue;\r\n            }\r\n            var angle = item.lastratio / 100 * 2.5;\r\n            var context = wx.createContext();\r\n            context.beginPath()\r\n            context.arc(34, 35, 30, 0.5 * Math.PI, 2.5 * Math.PI);\r\n            context.setFillStyle('rgba(0,0,0,0)');\r\n            context.setStrokeStyle('rgba(0,0,0,0.2)');\r\n            context.setLineWidth(4);\r\n            context.stroke();\r\n            context.beginPath()\r\n            context.arc(34, 35, 30, 0.5 * Math.PI, angle * Math.PI);\r\n            context.setFillStyle('rgba(0,0,0,0)');\r\n            context.setStrokeStyle('#ffffff');\r\n            context.setLineWidth(4);\r\n            context.setLineCap('round');\r\n            context.stroke();\r\n            var canvasId = 'coupon-'+item.id;\r\n            wx.drawCanvas({\r\n                canvasId: canvasId,\r\n                actions: context.getActions(),\r\n            })\r\n        }\r\n    },\r\n    bindTab: function (e) {\r\n        var cateid = core.pdata(e).cateid;\r\n        this.setData({cateid: cateid, page: 1, list:[]});\r\n        this.getList();\r\n    },\r\n    onReachBottom: function () {\r\n        if (this.data.loaded || this.data.list.length==this.data.total) {\r\n            return;\r\n        }\r\n        this.getList();\r\n    },\r\n    jump: function (e) {\r\n        var id = core.pdata(e).id;\r\n        if(id>0){\r\n            wx.navigateTo({url: '/pages/sale/coupon/detail/index?id=' + id});\r\n        }\r\n    }\r\n})","/**\r\n *\r\n * coupon\\index\\index.js\r\n *\r\n * @create 2017-02-04\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-02-06\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar fui = app.requirejs('foxui');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\n\r\nPage({\r\n    data: {\r\n        id: 0,\r\n        detail: {}\r\n    },\r\n    onLoad: function (options) {\r\n        this.setData({id: options.id});\r\n        this.getDetail();\r\n    },\r\n    getDetail: function () {\r\n        var $this = this;\r\n        core.get('sale/coupon/getdetail', {id: this.data.id}, function (ret) {\r\n            if(ret.error>0){\r\n                wx.navigateBack();\r\n            }else{\r\n                parser.wxParse('wxParseData','html', ret.detail.desc,$this,'5');\r\n                $this.setData({detail: ret.detail, show: true});\r\n            }\r\n        });\r\n    },\r\n    receive: function (e) {\r\n        var detail=this.data.detail,$this=this;\r\n        if(this.data.buying){\r\n            fui.toast($this, \"正在执行请稍后\");\r\n            return;\r\n        }\r\n        if(detail.canget!=1){\r\n            fui.toast($this, detail.getstr);\r\n            return;\r\n        }\r\n        var text = \"确认使用\";\r\n        if(detail.money>0){\r\n            text += detail.money+\"元\";\r\n            if(detail.credit>0){\r\n                text += \"+\";\r\n            }\r\n        }\r\n        if(detail.credit>0){\r\n            text += detail.credit+\"积分\";\r\n        }\r\n        text += detail.gettypestr+\"吗？\";\r\n\r\n        core.confirm(text, function () {\r\n            $this.setData({buying: true});\r\n            core.post('sale/coupon/pay', {id: $this.data.id}, function (ret) {\r\n                if(ret.error>0){\r\n                    fui.toast($this, ret.message);\r\n                    $this.setData({buying: false});\r\n                    return;\r\n                }\r\n                $this.setData({logid: ret.logid});\r\n                if(ret.wechat && ret.wechat.success){\r\n                    core.pay(ret.wechat.payinfo,function (res) {\r\n                        if (res.errMsg == \"requestPayment:ok\"){\r\n                            $this.payResult()\r\n                        }\r\n                    });\r\n                }else{\r\n                    $this.payResult();\r\n                }\r\n                $this.setData({buying: false});\r\n            });\r\n        });\r\n    },\r\n    payResult: function () {\r\n        var $this=this,text,url;\r\n        core.get('sale/coupon/payresult', {logid: this.data.logid}, function (ret) {\r\n            if(ret.error>0){\r\n                fui.toast($this, ret.message);\r\n                return;\r\n            }\r\n\r\n            if(ret.coupontype==0){\r\n                wx.redirectTo({url: \"/pages/sale/coupon/my/showcoupons2/index?id=\"+ret.dataid});\r\n                return;\r\n            }\r\n\r\n            var url = \"/pages/sale/coupon/my/index/index\";\r\n            if(ret.coupontype==1){\r\n                url = \"/pages/member/recharge/index\";\r\n            }\r\n\r\n            core.confirm(ret.confirm_text, function () {\r\n                wx.redirectTo({url: url});\r\n            }, function () {\r\n                wx.redirectTo({url: \"/pages/sale/coupon/my/index/index\"});\r\n            })\r\n        })\r\n    }\r\n})","/**\r\n *\r\n * coupon\\my\\index\\index.js\r\n *\r\n * @create 2017-02-07\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-02-07\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\n\r\nPage({\r\n    data: {},\r\n    onLoad: function (options) {\r\n        this.setData({id: options.id});\r\n        this.getDetail();\r\n    },\r\n    getDetail: function () {\r\n        var $this = this;\r\n        core.get('sale/coupon/my/getdetail', {id: this.data.id}, function (ret) {\r\n            if(ret.error>0){\r\n                wx.navigateBack();\r\n            }else{\r\n                parser.wxParse('wxParseData','html', ret.detail.desc,$this,'5');\r\n                $this.setData({detail: ret.detail, show: true});\r\n            }\r\n        });\r\n    },\r\n    receive: function (e) {\r\n        var detail = this.data.detail,url;\r\n        if(detail.coupontype==0){\r\n            wx.switchTab({\r\n                url: '/pages/index/index'\r\n            })\r\n            return;\r\n        }\r\n        else if(detail.coupontype==1){\r\n            url = \"/pages/member/recharge/index\";\r\n        }\r\n        else if(detail.coupontype==2){\r\n            url = \"/pages/sale/coupon/my/index\";\r\n        }\r\n        wx.redirectTo({url: url});\r\n    }\r\n})","/**\r\n *\r\n * coupon\\my\\index\\index.js\r\n *\r\n * @create 2017-02-07\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-02-07\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\n\r\nPage({\r\n    data: {\r\n        cate: '',\r\n        page: 1,\r\n        loading: false,\r\n        loaded: false,\r\n        list: [],\r\n        approot: app.globalData.approot\r\n    },\r\n    onLoad: function (options) {\r\n        this.getList();\r\n    },\r\n    myTab: function (e) {\r\n        var $this = this;\r\n        var cate = core.pdata(e).cate;\r\n        $this.setData({cate: cate, page: 1, list: []});\r\n        $this.getList();\r\n    },\r\n    getList: function () {\r\n        var $this = this;\r\n        core.loading();\r\n        this.setData({loading: true});\r\n        core.get('sale/coupon/my/getlist', {page:this.data.page, cate:this.data.cate}, function (ret) {\r\n            var data = {loading: false, total: ret.total, pagesize: ret.pagesize, closecenter:ret.closecenter};\r\n            if (ret.list.length > 0) {\r\n                data.page = $this.data.page + 1;\r\n                data.list = $this.data.list.concat(ret.list);\r\n                if(ret.list.length<ret.pagesize) {\r\n                    data.loaded = true\r\n                }\r\n            }\r\n            $this.setData(data);\r\n            core.hideLoading();\r\n        });\r\n    },\r\n    onReachBottom: function () {\r\n        if (this.data.loaded || this.data.list.length==this.data.total) {\r\n            return;\r\n        }\r\n        this.getList();\r\n    },\r\n    jump: function (e) {\r\n        var id = core.pdata(e).id;\r\n        if(id>0){\r\n            wx.navigateTo({url: '/pages/sale/coupon/my/detail/index?id=' + id});\r\n        }\r\n    }\r\n})","/**\r\n *\r\n * coupon\\my\\index\\index.js\r\n *\r\n * @create 2017-02-07\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-02-07\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\n\r\nPage({\r\n    data: {\r\n        approot: app.globalData.approot\r\n    },\r\n    onLoad: function (options) {\r\n        this.setData({id: options.id});\r\n        this.getDetail();\r\n    },\r\n    getDetail: function (e) {\r\n        var $this = this;\r\n        core.get('sale/coupon/my/showcoupon2', {id: this.data.id}, function (ret) {\r\n            if(ret.error>0){\r\n                wx.redirectTo({\r\n                    url: '/pages/sale/coupon/my/index/index'\r\n                })\r\n            }else{\r\n                parser.wxParse('wxParseData','html', ret.detail.desc,$this,'5');\r\n                $this.setData({detail: ret.detail, goods: ret.goods, show: true});\r\n            }\r\n        });\r\n    }\r\n})","/**\r\n *\r\n * plugin/coupon/index.js\r\n *\r\n * @create 2017-1-19\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-19\r\n *\r\n */\r\nvar app=getApp(),core=app.requirejs('core'),$ = app.requirejs('jquery');\r\n\r\nPage({\r\n    data: {\r\n        type: 0,\r\n        merchs: [],\r\n        goodslist: [],\r\n        goodsid: 0,\r\n        money: 0,\r\n        list: [],\r\n        loading: true\r\n    },\r\n    onLoad: function (options) {\r\n        if(!Number(options.type)){\r\n            var goodsinfo = app.getCache('goodsInfo');\r\n            this.setData({goodslist: goodsinfo.goodslist, merchs: goodsinfo.merchs});\r\n        }else{\r\n            this.setData({money:options.money});\r\n        }\r\n        this.setData({type:options.type});\r\n        this.getList();\r\n    },\r\n    getList: function () {\r\n        var $this=this,data=this.data;\r\n        for (var i=0; i < data.goodslist.length;i++){\r\n          delete data.goodslist[i]['title'];\r\n          delete data.goodslist[i]['optiontitle'];\r\n          delete data.goodslist[i]['thumb'];\r\n        }\r\n        if(data.type<2){    // 充值、购物\r\n            core.get('sale/coupon/query', {type: data.type, money: data.money, goods: data.goodslist, merchs: data.merchs}, function (result) {\r\n                $this.setData({list: result.list, loading: false});\r\n            });\r\n        }else{\r\n            // 商品详情显示\r\n        }\r\n    },\r\n    search: function (e) {\r\n        var val = e.detail.value,old_list=this.data.old_list,list=this.data.list,new_list=[];\r\n        if ($.isEmptyObject(old_list)){\r\n            old_list = list;\r\n        }\r\n        if (!$.isEmptyObject(old_list)){\r\n            $.each(old_list,function (index,item) {\r\n                if (item.couponname.indexOf(val)!=-1){\r\n                    new_list.push(item);\r\n                }\r\n            })\r\n        }\r\n        this.setData({list:new_list,old_list:old_list});\r\n    },\r\n    bindBtn: function (e) {\r\n        var $this=this,data=this.data,dataset=e.currentTarget.dataset;\r\n        if(data.type<2){\r\n            app.setCache(\"coupon\", dataset, 20);\r\n            wx.navigateBack();\r\n        }else{\r\n            // 商品详情 (请求领取)\r\n        }\r\n    }\r\n})","var app = getApp();\r\nvar core = require('./../../../utils/core.js')\r\n\r\nPage({\r\n  data: {\r\n    close:0,\r\n    text:'',\r\n    imgUrl: ''\r\n   },\r\n    onLoad: function (options) {\r\n      this.setData({ \r\n        close: options.close, \r\n        text: options.text, \r\n        imgUrl: app.globalData.approot\r\n        });\r\n    },\r\n    onShow: function () {\r\n        var name = app.getCache('sysset').shopname;\r\n        wx.setNavigationBarTitle({title: name||'提示'});\r\n    },\r\n\r\n    bind: function(){\r\n      var $this = this;\r\n      var timer =  setInterval(function () {\r\n        wx.getSetting({\r\n          success: function (res) {\r\n            var userInfo = res.authSetting['scope.userInfo'];\r\n            if (userInfo){\r\n              wx.reLaunch({\r\n                url: '/pages/index/index'\r\n              })\r\n              clearInterval(timer)\r\n            \r\n              $this.setData({ userInfo: userInfo})\r\n            }else{\r\n\r\n            }\r\n          }\r\n        })\r\n      }, 1000);\r\n  },\r\n\r\n  // 点击open-type=\"getUserInfo\"时候的回调函数\r\n  bindGetUserInfo: function (res) {\r\n    const routeData = app.getCache('routeData');\r\n    let { url, params } = routeData;\r\n    // 拼接重新跳转的url\r\n    let ret = '';\r\n    Object.keys(params).forEach(key => {\r\n      ret += key + '=' + params[key] + '&'\r\n    })\r\n    params = ret.substring(0, ret.length - 1)\r\n    var redirectUrl = '/' + url + '?' + params;\r\n    \r\n\r\n    wx.login({\r\n      success: function (ret) {\r\n        core.post('wxapp/login', { code: ret.code }, function (login_res) {\r\n          if (login_res.error) {\r\n            core.alert('获取用户登录态失败:' + login_res.message);\r\n            return;\r\n           }\r\n          core.get('wxapp/auth', {\r\n            data: res.detail.encryptedData,\r\n            iv: res.detail.iv,\r\n            sessionKey: login_res.session_key\r\n          }, function (auth_res) {\r\n            if (auth_res.isblack == 1) {\r\n              wx.showModal({\r\n                title: '无法访问',\r\n                content: '您在商城的黑名单中，无权访问！',\r\n                success: function (res) {\r\n                  if (res.confirm) {\r\n                    app.close();\r\n                  }\r\n                  if (res.cancel) {\r\n                    app.close();\r\n                  }\r\n                }\r\n              })\r\n            }\r\n            res.detail.userInfo.openid = auth_res.openId\r\n            res.detail.userInfo.id = auth_res.id\r\n            res.detail.userInfo.uniacid = auth_res.uniacid\r\n            app.setCache('userinfo', res.detail.userInfo);\r\n            app.setCache('userinfo_openid', res.detail.userInfo.openid);\r\n            app.setCache('userinfo_id', auth_res.id);\r\n            app.getSet();\r\n            wx.reLaunch({\r\n              url: redirectUrl\r\n            })\r\n          })\r\n        })\r\n      },\r\n      fail: function () {\r\n        core.alert('获取用户信息失败!');\r\n      }\r\n    })\r\n  }\r\n})","/*\r\n * \r\n * @create 2017-11-10\r\n * @author Ma \r\n * \r\n */\r\nPage({\r\n  data: {\r\n  \turl: ''\r\n  },\r\n  onLoad: function (options) {\r\n    if (options.module == 'sign'){\r\n      var url = options.domain + '?' + decodeURIComponent(options.params) + '&uid=' + options.mid;\r\n    }else{\r\n      var url = decodeURIComponent(options.url);\r\n    }\r\n  \r\n   \tvar $this = this;\r\n    $this.setData({\r\n      url: url\r\n    })\r\n  }\r\n})","/*\r\n * \r\n * *\r\n * @create 2017-1-12\r\n * @author AHa\r\n * \r\n * \r\n */\r\nvar app = getApp(),core=app.requirejs('core')\r\nPage({\r\n  data: {\r\n      lng: 0,\r\n      lat: 0,\r\n      scale:13,\r\n      name:'未填写',\r\n      address:'地址：未填写',\r\n      tel1:'',\r\n      tel2: '',\r\n      logo:'/static/images/noface.png',\r\n    markers: [{\r\n      iconPath: \"/static/images/location.png\",\r\n      id: 0,\r\n      longitude: 0,\r\n      latitude: 0,\r\n      width: 30,\r\n      height: 30,\r\n      label: {\r\n        content:'未填写',\r\n      \tcolor: '#666666',\r\n      \tfontSize: 12,\r\n      \tborderRadius: 10,\r\n      \tbgColor: '#ffffff',\r\n      \tpadding: 5,\r\n        display: 'ALWAYS',\r\n        textAlign:'center',\r\n        x:-20,\r\n        y:-60,\r\n      \t\r\n      }\r\n    }],\r\n    circles: [{\r\n        longitude: 0,\r\n        latitude: 0,\r\n    \t  color: '#4e73f1DD',\r\n        fillColor: '#4e73f1AA',\r\n        radius: 15,\r\n        strokeWidth: 1\r\n    }]\r\n  },\r\n  get_list: function () {\r\n        \r\n    },\r\n  regionchange(e) {\r\n    \r\n  },\r\n  markertap(e) {\r\n  \r\n  },\r\n  controltap(e) {\r\n    \r\n  },\r\n\tonLoad: function(options){\r\n\t\tvar $this = this;\r\n\r\n        core.get('shop.cityexpress.map',{},function (res) {\r\n         \r\n            $this.setData({\r\n              lng:res.cityexpress.lng,\r\n              lat:res.cityexpress.lat,\r\n              scale: res.cityexpress.zoom,\r\n              name: res.cityexpress.name,\r\n              address:res.cityexpress.address,\r\n              tel1: res.cityexpress.tel1,\r\n              tel2: res.cityexpress.tel2,\r\n              logo:res.cityexpress.logo,\r\n              'markers[0].longitude':res.cityexpress.lng,\r\n              'markers[0].latitude':res.cityexpress.lat,\r\n              'markers[0].label.content':res.cityexpress.name,\r\n              'circles[0].longitude': res.cityexpress.lng,\r\n              'circles[0].latitude': res.cityexpress.lat,\r\n              'circles[0].radius': parseInt(res.cityexpress.range),\r\n            })\r\n        });\r\n\r\n\t},\r\n\t\r\n\t\t//打开电话列表\r\n\t\tcall: function() {\r\n\t\t\tvar $this = this;\r\n      if ($this.data.tel1=='' || $this.data.tel2==''){\r\n        if ($this.data.tel1!=''){\r\n          wx.makePhoneCall({\r\n            phoneNumber: $this.data.tel1\r\n          })\r\n        }\r\n        if ($this.data.tel2!='') {\r\n          wx.makePhoneCall({\r\n            phoneNumber: $this.data.tel2\r\n          })\r\n        }\r\n      }else{\r\n        $this.setData({\r\n          listout: 'out',\r\n          listin: 'in'\r\n        })\r\n      }\r\n\t\t},\r\n\r\n\t\t//关闭电话列表\r\n\t\tcalldown: function() {\r\n\t\t\tvar $this = this;\r\n\t\t\t$this.setData({\r\n\t\t\t\tlistout: '',\r\n\t\t\t\tlistin: ''\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\t//拨打电话\r\n\t\tcallup: function(e) {\r\n    wx.makePhoneCall({\r\n      phoneNumber: e.target.dataset.tel\r\n    })\r\n  }\r\n})","var app = getApp();\r\nPage({\r\n\r\n  \r\n  data: {\r\n    paperplane: false\r\n  },\r\n\r\n  onLoad: function (options) {\r\n    this.setData({ imgUrl: app.globalData.approot })\r\n  },\r\n\r\n  transmit: function(){\r\n    this.setData({paperplane: true})\r\n  },\r\n\r\n  hidepaperplane: function(){\r\n    this.setData({ paperplane: false })\r\n  }\r\n})","// pages/order/pay/coupons/coupons.js\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  }\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons');\r\nvar foxui = app.requirejs('foxui');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n  data: {\r\n    status: 0,\r\n    showcode: false,\r\n    list:{},\r\n    page:1,\r\n    total:0,\r\n    more:true,\r\n    load:true,\r\n    notgoods:true,\r\n\r\n  },\r\n\r\n  onLoad: function (options) {\r\n        var $this = this;\r\n        $this.get_list();\r\n  },\r\n\r\n  // tab切换\r\n  tab: function(e){\r\n      var status = e.currentTarget.dataset.type;\r\n      this.setData({ status: status });\r\n      this.setData({page:1});\r\n      this.get_list();\r\n  },\r\n  finish: function (e) {\r\n    var $this = this;\r\n    var logid = e.currentTarget.dataset.logid;\r\n    wx.showModal({\r\n      title: '提示',\r\n      content: '确认已收到货了吗？',\r\n      success: function (sm) {\r\n        if (sm.confirm) {\r\n          core.get('creditshop/log/finish', { id: logid }, function (res) {\r\n            if (res.error == 0) {\r\n              foxui.toast($this, \"确认收货\");\r\n              $this.onShow();\r\n            }else{\r\n              foxui.toast($this, res.message);\r\n              return;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    })\r\n  },\r\n\r\n  //拉取列表\r\n  get_list: function (onpage){\r\n    var $this = this;\r\n    core.post('creditshop/log/getlist', { page: $this.data.page, status: $this.data.status},function(msg){\r\n      if( msg.error == 0 ){\r\n\r\n        if (!onpage) {\r\n          $this.setData({ list: msg.list });\r\n        } else {\r\n          //如果是翻页的话则追加\r\n          msg.list = $this.data.list.concat(msg.list);\r\n          $this.setData({ list: msg.list });\r\n        }\r\n\r\n        $this.setData({ total: msg.total });\r\n      }\r\n      \r\n      if( msg.pagesize >= msg.next_page) {\r\n        $this.setData({more:false});\r\n      }\r\n\r\n      if (msg.total == 0 ){\r\n        $this.setData({ more: true });\r\n      }\r\n\r\n      if( !onpage ){\r\n          $this.setData({ datas: msg.list });\r\n        }else{\r\n          //如果是翻页的话则追加\r\n          msg.list = $this.data.datas.concat(msg.list );\r\n          $this.setData({ datas: msg.list });\r\n        }\r\n\r\n\r\n      if ($this.data.total <= 0) {\r\n\r\n        $this.setData({ notgoods: false });\r\n      } else {\r\n        $this.setData({ notgoods: true });\r\n      }\r\n    });\r\n\r\n\r\n    \r\n  },\r\n\r\n  onReachBottom: function (e) {\r\n    this.setData({ page: this.data.page + 1, load: false });\r\n    this.get_list(true);\r\n    this.setData({ load: true });\r\n  },\r\n  /*\r\n  exchange:function(e){\r\n    var url = '/pages/creditshop/verify/index?id='+e.currentTarget.dataset.id;\r\n    \r\n    wx.navigateTo({\r\n      url: url\r\n    });\r\n  }\r\n  */\r\n\r\n\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons');\r\nvar foxui = app.requirejs('foxui');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar $ = app.requirejs('jquery');\r\n// pages/integral/order/detail/index.js\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    options:[],\r\n    log:[],\r\n    logid:0,\r\n    store:[],\r\n    stores:[],\r\n    goods:[],\r\n    verifynum:0,\r\n    replyset: [],\r\n    ordercredit: 0,\r\n    ordermoney: 0,\r\n    address: [],\r\n    carrier: [],\r\n    shop: [],\r\n    allmoney: [],\r\n    togglestore:'',\r\n    togglecode:'',\r\n    verify:[],\r\n    iswechat:true,\r\n    paymentmodal:false,\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n    options = options || {};\r\n    wx.getSystemInfo({\r\n      success: function (result) {\r\n        $this.setData({\r\n          windowWidth: result.windowWidth,\r\n          windowHeight: result.windowHeight\r\n        });\r\n      }\r\n    });\r\n    $this.setData({ options: options ,logid:options.id});\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n    var $this = this;\r\n    // var specs = [];\r\n    // var options = [];\r\n    var isIpx = app.getCache('isIpx');\r\n\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: ''\r\n      })\r\n    }\r\n    $this.getDetail();\r\n    /*获取授权*/\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        $this.setData({ limits: limits })\r\n      }\r\n    })\r\n  },\r\n  getDetail:function(){\r\n    var $this = this;\r\n    var options = $this.data.options;\r\n    core.get('creditshop/log/detail', options, function (result) {\r\n      if (result.error == 0) {\r\n        var allmoney = parseFloat(result.ordermoney) + parseFloat(result.log.dispatch);\r\n        $this.setData({\r\n          log: result.log,\r\n          store: result.store,\r\n          stores: result.stores,\r\n          goods: result.goods,\r\n          verifynum: result.verifynum,\r\n          log: result.log,\r\n          replyset:result.set,\r\n          ordercredit: result.ordercredit,\r\n          ordermoney: result.ordermoney,\r\n          address: result.address,\r\n          carrier: result.carrier,\r\n          shop: result.shop,\r\n          allmoney: allmoney,\r\n          verify: result.verify,\r\n        });\r\n        var allprice = 0;\r\n        if (result.goods.isverify == 0 && result.address.lenght > 0) {\r\n          core.get('creditshop/dispatch', { goodsid: result.goods.id, optionid: options.id }, function (res) {\r\n            allprice = res.dispatch;\r\n            $this.setData({ dispatchprice: allprice });\r\n          });\r\n        }\r\n        allprice = parseFloat(allprice) + parseFloat(result.goods.money);\r\n        $this.setData({ allprice: allprice });\r\n      }\r\n\r\n    });\r\n  },\r\n  toggle: function (e) {\r\n    var $this = this;\r\n    var togglestore = $this.data.togglestore;\r\n    if (togglestore == '') {\r\n      $this.setData({ togglestore: 'toggleSend-group' });\r\n    } else {\r\n      $this.setData({ togglestore: '' });\r\n    }\r\n  },\r\n  togglecode: function (e) {\r\n    var $this = this;\r\n    var togglecode = $this.data.togglecode;\r\n    if (togglecode == '') {\r\n      $this.setData({ togglecode: 'toggleSend-group' });\r\n    } else {\r\n      $this.setData({ togglecode: '' });\r\n    }\r\n  },\r\n  finish:function(){\r\n    var $this = this;\r\n    wx.showModal({\r\n      title: '提示',\r\n      content: '确认已收到货了吗？',\r\n      success: function (sm) {\r\n        if (sm.confirm) {\r\n          var logid = $this.data.log.id;\r\n          core.get('creditshop/log/finish', { id: logid}, function (res) {\r\n            if (res.error == 0) {\r\n              foxui.toast($this, \"确认收货\");\r\n              $this.onShow();\r\n            }else{\r\n              foxui.toast($this, res.message);\r\n              return;\r\n            }\r\n          });\r\n        } \r\n      }\r\n    })\r\n  },\r\n  paydispatch:function(e){\r\n    var $this = this;\r\n    var dispatchtype = e.currentTarget.dataset.paytype;\r\n    var content = '';\r\n    if (dispatchtype =='dispatch'){\r\n      content = \"确认兑换并支付运费吗\";\r\n    }else{\r\n      content = \"确认兑换吗\";\r\n    }\r\n    wx.showModal({\r\n      title: '提示',\r\n      content: content,\r\n      success: function (sm) {\r\n        if (sm.confirm) {\r\n          var logid = $this.data.log.id;\r\n          var dispatchprice = $this.data.goods.dispatch;          \r\n          core.get('creditshop/log/paydispatch', { id: logid,addressid:$this.data.address.id,dispatchprice:dispatchprice}, function (res) {\r\n            if (res.error > 0) {\r\n              fui.toast($this, res.message);\r\n              return;\r\n            }\r\n            if (res.wechat && res.wechat.success) {\r\n              core.pay(res.wechat.payinfo, function (res) {\r\n                if (res.errMsg == \"requestPayment:ok\") {\r\n                  $this.payResult()\r\n                }\r\n              });\r\n            } \r\n          });          \r\n        }\r\n      }\r\n    })\r\n  },\r\n  payResult:function(){\r\n    var $this = this;\r\n    core.get('creditshop/log/paydispatchresult', { id: $this.data.log.id}, function (res) {\r\n      if (res.error > 0) {\r\n        fui.toast($this, res.message);\r\n        return;\r\n      }\r\n      $this.onShow();\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  }\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n  data: {\r\n      page:1,\r\n      datas:{},\r\n      more:true,\r\n      load:true,\r\n      notgoods:true,\r\n      keywords:'',\r\n      cate:''\r\n  },\r\n\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n    if ( options.cate ){\r\n      $this.setData({ cate: options.cate});\r\n    }\r\n    if(options.keywords){\r\n      $this.setData({ keywords: options.keywords} );\r\n    }\r\n    $this.get_list(  );\r\n  },\r\n  //下拉刷新\r\n  onPullDownRefresh: function (e) {\r\n    wx.showNavigationBarLoading();\r\n    this.get_list();\r\n    wx.stopPullDownRefresh();\r\n    wx.hideNavigationBarLoading();\r\n  },\r\n  //上拉翻页\r\n  onReachBottom:function(e){\r\n    this.setData({ page: this.data.page + 1, load:false});\r\n    this.get_list( '' , true );\r\n    this.setData({load: true });\r\n  },\r\n\r\n  focus: function () {\r\n    this.setData({ showbtn: 'in' })\r\n  },\r\n\r\n  get_list: function ( keywords , onpage ) {\r\n    var $this = this;\r\n    core.post('creditshop/lists/getlist', { page: $this.data.page, keywords: $this.data.keywords, cate: $this.data.cate}, function (msg) {\r\n      if( msg.error == 0 ){\r\n        if (msg.list.length == 0 ){\r\n          //如果没有数据则显示没有更多\r\n          if ($this.data.page == 1 ){\r\n            $this.setData({ notgoods: false });\r\n          }\r\n        }else{\r\n\r\n          $this.setData({ notgoods: true });\r\n          if (msg.next_page <= $this.data.page && $this.data.page != 1) {\r\n            $this.setData({ more: false });\r\n          }\r\n        }\r\n\r\n        if( !onpage ){\r\n          $this.setData({ datas: msg.list });\r\n        }else{\r\n          //如果是翻页的话则追加\r\n          msg.list = $this.data.datas.concat(msg.list );\r\n          $this.setData({ datas: msg.list });\r\n        }\r\n        \r\n      }\r\n    });\r\n  },\r\n  search:function(){\r\n    this.setData({page:1});\r\n    this.get_list(  );\r\n  },\r\n  doinput:function(e){\r\n    this.setData({keywords:e.detail.value});\r\n  },\r\n  \r\n  \r\n  \r\n\r\n\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar $ = app.requirejs('jquery');\r\n\r\n\r\n// pages/integral/my/index.js\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n      page:1,\r\n      list:{},\r\n      total:0,\r\n      load:true,\r\n      more:true,\r\n      notgoods:true\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n        var $this = this;\r\n        $this.get_list();\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n  \r\n  },\r\n  get_list: function (onpage){\r\n    var $this = this;\r\n    core.post('creditshop/creditlog/getlist',{page:$this.data.page},function(msg){\r\n        $this.setData({total:msg.credit});\r\n        if( !onpage ){\r\n          $this.setData({ list: msg.list });\r\n        }else{\r\n          //如果是翻页的话则追加\r\n          msg.list = $this.data.list.concat(msg.list );\r\n          $this.setData({ list: msg.list });\r\n        }\r\n\r\n        if( msg.total == 0 ){\r\n          $this.setData({ notgoods:false});\r\n        }else{\r\n          $this.setData({ notgoods: true });\r\n        }\r\n\r\n\r\n        if( msg.pagesize >= msg.next_page ){\r\n          $this.setData({ more: false });\r\n        }else{\r\n          $this.setData({ more: true });\r\n        }\r\n\r\n\r\n    });\r\n  },\r\n\r\n  onReachBottom: function (e) {\r\n    this.setData({ page: this.data.page + 1, load: false });\r\n    this.get_list(true);\r\n    this.setData({ load: true });\r\n  },\r\n\r\n})","/**\r\n *\r\n * index.js\r\n *\r\n * @create 2017-01-04\r\n * @author 咖啡\r\n *\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons');\r\nvar foxui = app.requirejs('foxui');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar $ = app.requirejs('jquery');\r\nPage({\r\n  data: {\r\n    paymentmodal:false,\r\n    showmodal:false,\r\n    successmodal: false,\r\n    member:[],\r\n    goods: [],\r\n    options:[],\r\n    carrierInfo:[],\r\n    stores:[],\r\n    is_openmerch:false,\r\n    isverify:false,\r\n    iswechat:true,\r\n    iscredit:true,\r\n    paytype:'',\r\n    togglestore:'',\r\n    addressid:0,\r\n    dispatchprice:0,\r\n    allprice:0,\r\n    logid:0,\r\n    successmessage:'',\r\n    successstatus:false,\r\n  },\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n    options = options || {};\r\n    wx.getSystemInfo({\r\n      success: function (result) {\r\n        $this.setData({\r\n          windowWidth: result.windowWidth,\r\n          windowHeight: result.windowHeight\r\n        });\r\n      }\r\n    });\r\n    $this.setData({ options: options });\r\n  },\r\n  /*页面加载*/\r\n  onShow: function () {\r\n    var $this = this;\r\n    // var specs = [];\r\n    // var options = [];\r\n    var isIpx = app.getCache('isIpx');\r\n    var address = app.getCache(\"orderAddress\"), \r\n    shop = app.getCache(\"orderShop\");\r\n    if (shop) {\r\n      $this.setData({\r\n        carrierInfo: shop\r\n      });\r\n    }\r\n    var addressid = $this.data.addressid;\r\n    if (address.id>0 ){\r\n      $this.addressid = address.id;\r\n      $this.setData({addressid:address.id});\r\n      $this.getDetail();\r\n    }\r\n\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: ''\r\n      })\r\n    }\r\n    var member = $this.data.member;\r\n    if(member==''){\r\n      $this.getDetail();\r\n    }\r\n    \r\n    /*获取授权*/\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        $this.setData({ limits: limits })\r\n      }\r\n    })\r\n  },\r\n  /*核销人员信息*/\r\n  listChange: function (e) {\r\n    var member = this.data.member, id = e.target.id;\r\n    switch (id) {\r\n      case 'realname': member.realname = e.detail.value; break;\r\n      case 'mobile': member.mobile = e.detail.value; break;\r\n    }\r\n    this.setData({\r\n      member: member\r\n    })\r\n  },\r\n  /*订单详情*/\r\n  getDetail:function(){\r\n    var $this = this;\r\n    var options = $this.data.options;\r\n    core.get('creditshop/create', options, function (result) {\r\n      if(result.error==0){\r\n        result.goods.num = 1;\r\n        $this.setData({\r\n          goods: result.goods,\r\n          address: result.address,\r\n          shop: result.shop,\r\n          stores: result.stores,\r\n          isverify: result.goods.isverify,\r\n          member: result.member,\r\n          addressid:result.address.id\r\n        });\r\n        var allprice = 0;\r\n        if (result.goods.isverify == 0 && result.goods.type==0 && result.address.id>0) {\r\n          \r\n          core.get('creditshop/create/getaddress', { addressid: $this.addressid}, function (rest) {\r\n            if(rest.error ==0){\r\n              $this.setData({ address: rest.address});\r\n            }\r\n          })\r\n          $this.dispatch();\r\n        }else{\r\n          $this.setData({ allprice: result.goods.money });\r\n        }\r\n        \r\n      }\r\n      \r\n    });\r\n  },\r\n  dispatch:function(){\r\n    var $this = this;\r\n    core.get('creditshop/create/dispatch', { goodsid: $this.data.goods.id, optionid: $this.data.options.optionid }, function (res) {\r\n      var allprice = res.dispatch;\r\n      allprice = parseFloat(allprice) + parseFloat($this.data.goods.money);\r\n      $this.setData({ dispatchprice: res.dispatch, allprice: allprice });\r\n    });     \r\n  },\r\n  number: function (e) {\r\n    var $this = this,\r\n      goods = $this.data.goods,\r\n      options = $this.data.options;\r\n    var action = e.target.dataset.action;\r\n    if (action=='minus'){\r\n      goods.num = parseInt(goods.num) - 1;\r\n    } else if (action == 'plus') {\r\n      goods.num = parseInt(goods.num) + 1;\r\n    }\r\n    if (goods.num<1){\r\n      goods.num = 1;\r\n    }\r\n    var num = goods.num;\r\n    core.get('creditshop/create/number', { goodsid: goods.id, optionid: options.id, num: num}, function (res) {\r\n      if (res.goods.canbuy == false) {\r\n        if (goods.num>1){\r\n          goods.num = parseInt(goods.num)-1;\r\n        }\r\n        $this.setData({goods:goods});\r\n        foxui.toast($this, res.goods.buymsg);\r\n        return;\r\n      } else {\r\n        goods = res.goods;\r\n        goods.num = num;\r\n        var allprice = parseFloat(goods.money * num) + parseFloat(goods.dispatch);\r\n        $this.setData({ goods: goods, allprice: allprice});\r\n      }\r\n    });  \r\n  },\r\n  /*\r\n  inputNumber:function(e){\r\n    var $this = this;\r\n    var goods = $this.data.goods;\r\n    var options = $this.data.options;\r\n    goods.num = parseInt(e.detail.value);\r\n    var num = goods.num;\r\n    core.get('creditshop/create/number', { goodsid: goods.id, optionid: options.id, num: num }, function (res) {\r\n      if (res.goods.canbuy == false) {\r\n        if (goods.num > 1) {\r\n          goods.num = parseInt(goods.num) - 1;\r\n        }\r\n        $this.setData({ goods: goods });\r\n        foxui.toast($this, res.goods.buymsg);\r\n        return;\r\n      } else {\r\n        goods = res.goods;\r\n        var allprice = parseFloat(goods.money * num) + parseFloat(goods.dispatch);\r\n        $this.setData({ goods: goods, allprice: allprice });\r\n      }\r\n    });  \r\n  },*/\r\n  // 立即支付\r\n  pay: function(){\r\n    var $this = this;\r\n    var goods = $this.data.goods;\r\n    if (!goods.canbuy) {\r\n      foxui.toast($this, $this.data.goods.buymsg);\r\n      return;\r\n    }\r\n    /*核销商品提交订单*/\r\n    if (goods.isverify>0){\r\n      var member = $this.data.member;\r\n      if(member.realname==''){\r\n        foxui.toast($this, \"请填写真实姓名\");\r\n        return;\r\n      }\r\n      if(member.mobile==''){\r\n        foxui.toast($this, \"请填写联系电话\");\r\n        return;\r\n      }\r\n      var carrierInfo = $this.data.carrierInfo;\r\n      if (carrierInfo.length==0){\r\n        foxui.toast($this, \"请选择兑换门店\");\r\n        return;\r\n      }\r\n    }\r\n     \r\n    /*选择地址*/\r\n    if (goods.isverify == 0 && goods.goodstype == 0 && goods.type==0){\r\n      var addressid = $this.data.addressid;\r\n      if (addressid == 0 || addressid == undefined){\r\n        foxui.toast($this, \"请选择收货地址\");\r\n        return;\r\n      }\r\n    }\r\n    if (goods.type == 1){\r\n      $this.setData({ addressid: 0 });\r\n    }\r\n\r\n    $this.setData({ paymentmodal:true});\r\n  },\r\n  // 取消\r\n  cancel: function() {\r\n    var $this = this;\r\n    $this.setData({ paymentmodal: false, showmodal: false});\r\n  },\r\n  /*支付*/\r\n  payClick:function(e){\r\n    var $this = this;\r\n    var paytype = e.target.dataset.type;\r\n    $this.setData({ paymentmodal: false, showmodal: true, paytype: paytype});\r\n  },\r\n  // 确定\r\n  confirm: function() {\r\n    var $this = this;\r\n    var paytype = $this.data.paytype;\r\n    core.get('creditshop/detail/pay', { id: $this.data.goods.id, optionid: $this.data.optionid, num: $this.data.goods.num, paytype: $this.data.paytype, addressid: $this.data.addressid, storeid: $this.data.carrierInfo.id}, function (res) {\r\n      if(res.error>0){\r\n        foxui.toast($this, res.message);\r\n        return;\r\n      }\r\n      $this.setData({ logid: res.logid});\r\n      if (res.wechat && res.wechat.success) {\r\n        core.pay(res.wechat.payinfo, function (res) {\r\n          if (res.errMsg == \"requestPayment:ok\") {\r\n            $this.lottery()\r\n          }\r\n        });\r\n      } \r\n      if (paytype =='credit' && res.logid>0){\r\n        $this.lottery();\r\n      }\r\n      \r\n    });   \r\n  },\r\n  /*确认兑换成功*/\r\n  success:function(){\r\n    var $this = this;\r\n    var logid = $this.data.logid;\r\n    //$this.setData({ successmodal:false});\r\n    wx.redirectTo({\r\n      url: '/pages/creditshop/log/detail/index?id='+logid ,\r\n    });\r\n  },\r\n  lottery:function(){\r\n    var $this = this;\r\n    var gtype = $this.data.goods.type;\r\n    var successmessage = '';\r\n    if(gtype==0){\r\n      core.get('creditshop/detail/lottery', { id: $this.data.goods.id, logid:$this.data.logid}, function (res) {\r\n        if (res.error > 0) {\r\n          foxui.toast($this, res.message);\r\n          return;\r\n        }\r\n        if (res.status==2){\r\n          successmessage = \"恭喜您，商品兑换成功\";\r\n        }\r\n        if(res.status==3){\r\n          if (res.goodstype==1){\r\n            successmessage = \"恭喜您，优惠券兑换成功\";\r\n          } else if (res.goodstype == 2){\r\n            successmessage = \"恭喜您，余额兑换成功\";\r\n          } else if (res.goodstype == 3){\r\n            successmessage = \"恭喜您，红包兑换成功\";\r\n          }\r\n        }\r\n        $this.setData({ successmessage: successmessage,successstatus:true})\r\n      });   \r\n    }else{\r\n      successmessage = \"努力抽奖中，请稍后....\";\r\n      $this.setData({ successmessage: successmessage, successstatus: true })\r\n      setTimeout(function(){\r\n        core.get('creditshop/detail/lottery', { id: $this.data.goods.id, logid:$this.data.logid}, function (res) {\r\n          if (res.error > 0) {\r\n            foxui.toast($this, res.message);\r\n            return;\r\n          }\r\n          if (res.status==2){\r\n            successmessage = \"恭喜您，您中奖啦\";\r\n          }else if(res.status==3){\r\n            if (res.goodstype==1){\r\n              successmessage = \"恭喜您，优惠券已经发到您账户啦\";\r\n            } else if (res.goodstype == 2){\r\n              successmessage = \"恭喜您，余额已经发到您账户啦\";\r\n            } else if (res.goodstype == 3){\r\n              successmessage = \"恭喜您，红包兑换成功\";\r\n            }\r\n          }else{\r\n            successmessage = \"很遗憾，您没有中奖\";\r\n          }\r\n          $this.setData({ successmessage: successmessage,successstatus:true})\r\n        });   \r\n      },1000);\r\n\r\n    }\r\n    $this.setData({ successmodal: true });\r\n  },\r\n  toggle: function (e) {\r\n    var $this = this;\r\n    var togglestore = $this.data.togglestore;\r\n    if (togglestore==''){\r\n      $this.setData({ togglestore:'toggleSend-group'});\r\n    }else{\r\n      $this.setData({ togglestore: '' });\r\n    }\r\n    \r\n  },\r\n\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar icons = app.requirejs('icons');\r\nvar foxui = app.requirejs('foxui');\r\nvar parser = app.requirejs('wxParse/wxParse');\r\nvar $ = app.requirejs('jquery');\r\n\r\n// pages/creditshop/verify/index.js\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n      eno:0,\r\n      qrcode:'',\r\n      logid:0,\r\n      options:[],\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n    options = options || {};\r\n    wx.getSystemInfo({\r\n      success: function (result) {\r\n        $this.setData({\r\n          windowWidth: result.windowWidth,\r\n          windowHeight: result.windowHeight\r\n        });\r\n      }\r\n    });\r\n    $this.setData({ options: options, logid:options.id});\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n  \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n    var $this = this;\r\n    // var specs = [];\r\n    // var options = [];\r\n    var isIpx = app.getCache('isIpx');\r\n\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: ''\r\n      })\r\n    }\r\n    $this.getDetail();\r\n    /*获取授权*/\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        $this.setData({ limits: limits })\r\n      }\r\n    })\r\n  },\r\n  getDetail:function(id){\r\n    var $this = this;\r\n    core.get('creditshop/exchange/qrcode', { id: $this.data.logid},function(msg){\r\n      $this.setData({eno:msg.eno,qrcode:msg.qrcode});\r\n    })\r\n  }\r\n})","\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar $ = app.requirejs('jquery');\r\nPage({\r\n  data: {\r\n    swiperCurrent:0,\r\n    indicatorDots:true,\r\n    autoplay:true,\r\n    interval:3000,\r\n    duration:800,\r\n    circular:true,\r\n    //轮播图url\r\n    imgUrls:[],\r\n    //轮播图链接\r\n    links:[],\r\n    //参数\r\n    params:{},\r\n    //积分抽奖\r\n    lotterydraws:[],\r\n    //积分兑换\r\n    exchanges:[],\r\n    //优惠券\r\n    coupons:[],\r\n    //余额兑换\r\n    balances:[],\r\n    //红包兑换\r\n    //redbags:[],\r\n    category:[],\r\n    hidden:false,\r\n    keywords:''\r\n  },\r\n\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n  },\r\n  doinput: function (e) {\r\n    this.setData({ keywords: e.detail.value });\r\n  },\r\n  search: function () {\r\n    var url = '/pages/creditshop/lists/index?keywords='+this.data.keywords;\r\n    wx.navigateTo({\r\n      url: url\r\n    });\r\n  },\r\n\r\n  focus: function(){\r\n    this.setData({showbtn: 'in'})\r\n  },\r\n\r\n  onReady:function(){\r\n    var $this = this;\r\n    $this.get_index();\r\n  },\r\n\r\n  changeTo:function( e ){\r\n    var url = e.currentTarget.dataset.url+'?id='+e.currentTarget.dataset.gid\r\n    wx.navigateTo({\r\n      url:url\r\n    });\r\n  },\r\n\r\n  get_index:function(){\r\n    var $this = this;\r\n    core.post('creditshop/index', $this.data.params,function(msg){\r\n      if( msg.error == 0 ){\r\n        $this.setData({ \r\n          imgUrls: msg.data.advs, \r\n          category: msg.data.category,\r\n          lotterydraws: msg.data.lotterydraws,\r\n          exchanges: msg.data.exchanges,\r\n          coupons: msg.data.coupons,\r\n          balances: msg.data.balances,\r\n          redbags: msg.data.redbags,\r\n          sysset: msg.sysset\r\n        });\r\n      }\r\n      $this.setData({ hidden: true });\r\n    });\r\n  \r\n  \r\n  },\r\n  \r\n})","var app = getApp(), core = app.requirejs('core'),$ = app.requirejs('jquery');\r\nvar selectdate = app.requirejs('biz/selectdate'), foxui = app.requirejs('foxui');\r\nPage({\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    status: '0',\r\n    currentDate: \"\",\r\n    dayList: '',\r\n    currentDayList: '',\r\n    currentObj: '',\r\n    currentDay: '',\r\n    cycelData:{},\r\n    nowDate:'',\r\n    maxday:'',\r\n    cycelbuy_periodic:'',\r\n    period_index:1,\r\n    cycelid:'',\r\n    orderid:'',\r\n    refundstate:0,\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    var $this=this;\r\n    var isIpx = app.getCache('isIpx');\r\n    if (isIpx) {\r\n      this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar'\r\n      })\r\n    } else {\r\n      this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: ''\r\n      })\r\n    }\r\n  \r\n    this.get_list();\r\n  },\r\n\r\n  show_cycelbuydate: function () {\r\n    var $this = this;\r\n    /*周期购时间选择器初始化*/\r\n    var currentObj = selectdate.getCurrentDayString(this, $this.data.nowDate);\r\n    var week = ['周日', '周一', '周二', '周三', '周四', '周五', '周六'];\r\n    $this.setData({\r\n      currentObj: currentObj,\r\n      currentDate: currentObj.getFullYear() + '年' + (currentObj.getMonth() + 1) + '月' + currentObj.getDate() + '日 ' + week[currentObj.getDay()],\r\n      currentYear: currentObj.getFullYear(),\r\n      currentMonth: (currentObj.getMonth() + 1),\r\n      currentDay: currentObj.getDate(),\r\n      initDate: Date.parse(currentObj.getFullYear() + '/' + (currentObj.getMonth() + 1) + '/' + currentObj.getDate()),\r\n      checkedDate: Date.parse(currentObj.getFullYear() + '/' + (currentObj.getMonth() + 1) + '/' + currentObj.getDate()),\r\n      maxday: $this.data.maxday,//可选的天数\r\n      cycelbuy_periodic: $this.data.cycelbuy_periodic,//周期购数据   时间间隔，单位，期数\r\n      period_index: $this.data.period_index,//当前第几期\r\n    })\r\n  },\r\n\r\n  cycle:function(e){\r\n    var index = e.currentTarget.dataset.status;\r\n    var period_index = index + 1;\r\n    this.setData({ status: e.currentTarget.dataset.status, cycelid: e.currentTarget.dataset.id, period_index: period_index})\r\n  },\r\n\r\n    // 取消时间选择时间\r\n    syclecancle: function () {\r\n        this.setData({\r\n            cycledate: false\r\n        });\r\n    },\r\n    //确定选择时间\r\n    sycleconfirm: function () {\r\n      var $this = this;\r\n      var cycelid = $this.data.cycelid;\r\n      var newDate = $this.data.checkedDate / 1000; \r\n      var orderid = $this.data.orderid;\r\n      var isall = $this.data.isdelay;\r\n      core.get('order/do_deferred', { cycelid: cycelid, time: newDate, orderid: orderid,is_all:isall},function(res){\r\n        \r\n        if(res.error == 0){\r\n          foxui.toast($this,'修改成功');\r\n        }\r\n      });\r\n      this.setData({\r\n          cycledate: false\r\n      });\r\n    },\r\n    // 周期购 修改送达时间\r\n    editdate: function (e) {\r\n        var $this = this;\r\n        var isdelay=e.currentTarget.dataset.isdelay;\r\n        var cycelid = e.currentTarget.dataset.id;\r\n        core.get('order/getCycelbuyDate', { cycelid: cycelid}, function (res) {\r\n          $this.setData({ nowDate: res.receipttime});\r\n          $this.show_cycelbuydate();\r\n          selectdate.setSchedule($this);\r\n        })\r\n        \r\n        this.setData({\r\n            isdelay: isdelay\r\n        });\r\n        \r\n        this.setData({\r\n            cycledate: true\r\n        });\r\n    },\r\n\r\n    //时间选择器 前后月份选择\r\n    doDay: function (e) {\r\n        selectdate.doDay(e,this);\r\n    },\r\n    //周期购选择时间\r\n    selectDay: function (e) {\r\n        selectdate.selectDay(e,this);\r\n        selectdate.setSchedule(this);  \r\n    },\r\n\r\n  //获取周期购数据\r\n  get_list:function(){\r\n    var $this = this;\r\n    core.get('order/cycelbuy_list', $this.options,function(res){\r\n     \r\n      if(res.error > 0){\r\n        if (list.error != 50000) {\r\n          core.toast(list.message, 'loading');\r\n        }\r\n      }\r\n \r\n      if (res.notStart == false){\r\n        $.each(res.list,function(index,data){\r\n          if(data.status == 1){\r\n            $this.setData({\r\n              status:index\r\n            })\r\n          }else{\r\n            $this.setData({\r\n              status: res.period_index,\r\n            })\r\n          }\r\n        })\r\n      }\r\n      $this.setData({cycelid:res.list[0]['id'],orderid:res.orderid});\r\n      $this.setData(res);\r\n\r\n    })\r\n  },\r\n  confirm_receipt:function(e){\r\n    var $this = this;\r\n    var id = e.currentTarget.dataset.id;\r\n    var orderid = $this.data.orderid;\r\n    core.get('order/confirm_receipt', { id:id,orderid:orderid }, function (res) {\r\n\r\n      if (res.error == 0) {\r\n        foxui.toast($this, '修改成功');\r\n        $this.onLoad();\r\n      }\r\n    });\r\n  }\r\n  \r\n})","/**\r\n *\r\n * address\\post.js\r\n *\r\n * @create 2017-01-09\r\n * @author 晚秋\r\n *\r\n * @update  晚秋 2017-01-18\r\n *\r\n */\r\n\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar fui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n  data: {\r\n    id: null,\r\n    posting: false,\r\n    subtext: \"保存地址\",\r\n    detail: {\r\n      realname: '',\r\n      mobile: '',\r\n      areas: '',\r\n      street: '',\r\n      address: ''\r\n    },\r\n    showPicker: false,\r\n    pvalOld: [0, 0, 0],\r\n    pval: [0, 0, 0],\r\n    areas: [],  // 原始数据\r\n    street: [],\r\n    streetIndex: 0,\r\n    noArea: false,\r\n    cycelid:''\r\n  },\r\n  onLoad: function (options) {\r\n    this.setData({ id: Number(options.orderid), cycelid: Number(options.cycelid), applyid: Number(options.applyid) });\r\n    app.url(options);\r\n    this.getDetail();\r\n    if (!options.id) {\r\n      wx.setNavigationBarTitle({ title: '添加收货地址' })\r\n    }\r\n    this.setData({ areas: app.getCache(\"cacheset\").areas, type: options.type });\r\n  },\r\n  getDetail: function () {\r\n    var $this = this;\r\n    var id = $this.data.id;\r\n    core.get('order/address', { id: id, applyid: $this.data.applyid, cycelid: $this.data.cycelid}, function (result) {\r\n      var data = { openstreet: result.openstreet, show: true };\r\n      if (!$.isEmptyObject(result.detail)) {\r\n        wx.setNavigationBarTitle({ title: '编辑收货地址' });\r\n        var area = result.detail.province + \" \" + result.detail.city + \" \" + result.detail.area;\r\n        var index = $this.getIndex(area, $this.data.areas);\r\n        data.pval = index;\r\n        data.pvalOld = index;\r\n        data.detail = result.detail;\r\n      }\r\n      $this.setData(data);\r\n      if (result.openstreet && index) {\r\n        $this.getStreet($this.data.areas, index);\r\n      }\r\n    });\r\n  },\r\n  submit: function () {\r\n    var $this = this;\r\n    var detail = $this.data.detail;\r\n    if ($this.data.posting) {\r\n      return;\r\n    }\r\n    if (detail.realname == '' || !detail.realname) {\r\n      fui.toast($this, \"请填写收件人\");\r\n      return;\r\n    } if (detail.mobile == '' || !detail.mobile) {\r\n      fui.toast($this, \"请填写联系电话\");\r\n      return;\r\n    }\r\n    if (detail.city == '' || !detail.city) {\r\n      fui.toast($this, \"请选择所在地区\");\r\n      return;\r\n    }\r\n    if ($this.data.street.length > 0 && (detail.street == '' || !detail.street)) {\r\n      fui.toast($this, \"请选择所在街道\");\r\n      return;\r\n    }\r\n    if (detail.address == '' || !detail.address) {\r\n      fui.toast($this, \"请填写详细地址\");\r\n      return;\r\n    }\r\n\r\n    if (!detail.datavalue) {\r\n      fui.toast($this, \"地址数据出错，请重新选择\");\r\n      return;\r\n    }\r\n\r\n    detail.orderid = $this.data.id;\r\n    detail.cycelid = $this.data.cycelid;\r\n    $this.setData({ posting: true });\r\n    core.post('order/addressSubmit', detail, function (result) {\r\n      \r\n      if (result.error != 0) {\r\n        $this.setData({ posting: false });\r\n        fui.toast($this, result.message);\r\n        return;\r\n      }\r\n      $this.setData({ subtext: \"提交成功\" });\r\n      core.toast(\"提交成功\");\r\n      // setTimeout(function () {\r\n      //   wx.navigateBack();\r\n      // }, 1000);\r\n    });\r\n  },\r\n  onChange: function (event) {\r\n    var $this = this;\r\n    var vname = $this.data.detail;\r\n    var bindtype = event.currentTarget.dataset.type;\r\n    var value = $.trim(event.detail.value);\r\n    if (bindtype == 'street') {\r\n      vname.streetdatavalue = $this.data.street[value].code\r\n      value = $this.data.street[value].name;\r\n    }\r\n    vname[bindtype] = value;\r\n    $this.setData({ detail: vname });\r\n  },\r\n  getStreet: function (areas, val) {\r\n    if (!areas || !val) {\r\n      return;\r\n    }\r\n    var $this = this;\r\n    if (!$this.data.detail.province || !$this.data.detail.city || !this.data.openstreet) {\r\n      return;\r\n    }\r\n    var city = areas[val[0]].city[val[1]].code;\r\n    var area = areas[val[0]].city[val[1]].area[val[2]].code;\r\n    core.get('getstreet', { city: city, area: area }, function (result) {\r\n      var street = result.street;\r\n      var data = { street: street };\r\n      if (street && $this.data.detail.streetdatavalue) {\r\n        for (var i in street) {\r\n          if (street[i].code == $this.data.detail.streetdatavalue) {\r\n            data.streetIndex = i;\r\n            $this.setData({ 'detail.street': street[i].name });\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      $this.setData(data);\r\n    });\r\n  },\r\n  selectArea: function (e) {\r\n    var area = e.currentTarget.dataset.area;\r\n    var index = this.getIndex(area, this.data.areas);\r\n    this.setData({ pval: index, pvalOld: index, showPicker: true })\r\n  },\r\n  bindChange: function (e) {\r\n    var oldValue = this.data.pvalOld;\r\n    var newValue = e.detail.value;\r\n    if (oldValue[0] != newValue[0]) {\r\n      newValue[1] = 0;\r\n    }\r\n    if (oldValue[1] != newValue[1]) {\r\n      newValue[2] = 0;\r\n    }\r\n    this.setData({ pval: newValue, pvalOld: newValue });\r\n  },\r\n  onCancel: function (e) {\r\n    this.setData({ showPicker: false });\r\n  },\r\n  onConfirm: function (e) {\r\n    var val = this.data.pval;\r\n    var areas = this.data.areas;\r\n    var detail = this.data.detail;\r\n    detail.province = areas[val[0]].name;\r\n    detail.city = areas[val[0]].city[val[1]].name;\r\n    detail.datavalue = areas[val[0]].code + \" \" + areas[val[0]].city[val[1]].code;\r\n    if (areas[val[0]].city[val[1]].area && areas[val[0]].city[val[1]].area.length > 0) {\r\n      detail.area = areas[val[0]].city[val[1]].area[val[2]].name;\r\n      detail.datavalue += \" \" + areas[val[0]].city[val[1]].area[val[2]].code;\r\n      this.getStreet(areas, val);\r\n    } else {\r\n      detail.area = \"\";\r\n    }\r\n    detail.street = '';\r\n    this.setData({ detail: detail, streetIndex: 0, showPicker: false });\r\n  },\r\n  getIndex: function (str, areas) {\r\n    if ($.trim(str) == '' || !$.isArray(areas)) {\r\n      return [0, 0, 0];\r\n    }\r\n    var arr = str.split(\" \");\r\n    var index = [0, 0, 0];\r\n    for (var i in areas) {\r\n      if (areas[i].name == arr[0]) {\r\n        index[0] = Number(i);\r\n        for (var ii in areas[i].city) {\r\n          if (areas[i].city[ii].name == arr[1]) {\r\n            index[1] = Number(ii);\r\n            for (var iii in areas[i].city[ii].area) {\r\n              if (areas[i].city[ii].area[iii].name == arr[2]) {\r\n                index[2] = Number(iii);\r\n                break;\r\n              }\r\n            }\r\n            break;\r\n          }\r\n        }\r\n        break;\r\n      }\r\n    }\r\n    return index;\r\n  },\r\n  updateAll:function(e){\r\n   \r\n  }\r\n})","/**\r\n *\r\n * order/index.js\r\n *\r\n * @create 2017-1-15\r\n * @author Young\r\n *\r\n * @update  Young 2017-02-04\r\n *\r\n */\r\nvar app = getApp(),\r\n  core = app.requirejs('core'),\r\n  order = app.requirejs('biz/order');\r\nPage({\r\n  data: {\r\n    icons: app.requirejs('icons'),\r\n    status: '',\r\n    list: [],\r\n    page: 1,\r\n    code: false,\r\n    cancel: order.cancelArray,\r\n    cancelindex: 0\r\n  },\r\n  onLoad: function (options) {\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n    this.setData({\r\n      options: options,\r\n      status: options.status || ''\r\n    });\r\n    app.url(options);\r\n    this.get_list();\r\n  },\r\n  get_list: function () {\r\n    var $this = this;\r\n    $this.setData({ loading: true });\r\n    core.get('order/cycel_orderList', { page: $this.data.page, status: $this.data.status, merchid: 0 }, function (list) {\r\n      if (list.error == 0) {\r\n        $this.setData({ loading: false, show: true, total: list.total, empty: true });\r\n        if (list.list.length > 0) {\r\n          $this.setData({\r\n            page: $this.data.page + 1,\r\n            list: $this.data.list.concat(list.list)\r\n          });\r\n        }\r\n        if (list.list.length < list.pagesize) {\r\n          $this.setData({\r\n            loaded: true\r\n          });\r\n        }\r\n      } else {\r\n        core.toast(list.message, 'loading')\r\n      }\r\n    }, this.data.show);\r\n  },\r\n  selected: function (e) {\r\n    var status = core.data(e).type;\r\n    this.setData({\r\n      list: [],\r\n      page: 1,\r\n      status: status,\r\n      empty: false\r\n    });\r\n    this.get_list();\r\n  },\r\n  onReachBottom: function () {\r\n    if (this.data.loaded || this.data.list.length == this.data.total) {\r\n      return;\r\n    }\r\n    this.get_list();\r\n  },\r\n  code: function (e) {\r\n    var $this = this, orderid = core.data(e).orderid;\r\n    core.post('verify/qrcode', { id: orderid }, function (json) {\r\n      if (json.error == 0) {\r\n        $this.setData({\r\n          code: true,\r\n          qrcode: json.url\r\n        })\r\n      } else {\r\n        core.alert(json.message);\r\n      }\r\n    }, true);\r\n  },\r\n  close: function () {\r\n    this.setData({\r\n      code: false\r\n    })\r\n  },\r\n  cancel: function (e) {\r\n    var orderid = core.data(e).orderid;\r\n    order.cancel(orderid, e.detail.value, '/pages/order/index?status=' + this.data.status);\r\n  },\r\n  delete: function (e) {\r\n    var type = core.data(e).type, orderid = core.data(e).orderid;\r\n    order.delete(orderid, type, '/pages/order/index', this);\r\n  },\r\n  finish: function (e) {\r\n    var type = core.data(e).type, orderid = core.data(e).orderid;;\r\n    order.finish(orderid, '/pages/order/index');\r\n  },\r\n  onShareAppMessage: function () {\r\n    return core.onShareAppMessage();\r\n  }\r\n});","/**\r\n *\r\n * order/express/number.js\r\n *\r\n * @create 2018-5-7\r\n * @author Liugt\r\n *\r\n *\r\n */\r\nvar app = getApp(), core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\nPage({\r\n  data: {\r\n    express:'',\r\n    expresscom:'',\r\n    express_number:'',\r\n  },\r\n  onLoad: function (options) {\r\n    // 页面初始化 options为页面跳转所带来的参数\r\n    this.setData({\r\n      options: options\r\n    });\r\n    app.url(options);\r\n    this.get_list();\r\n  },\r\n  get_list: function () {\r\n    var $this = this;\r\n    if(typeof($this.data.options.singlerefund)=='undefined'){\r\n        core.get('order/express_number', $this.data.options, function (list) {\r\n             \r\n              if (list.error == 0) {\r\n                list.show = true;\r\n                $this.setData(list);\r\n              } else {\r\n                core.toast(list.message, 'loading')\r\n              }\r\n            });\r\n    }else{\r\n        core.get('order/single_express_number', $this.data.options, function (list) {\r\n         \r\n            if (list.error == 0) {\r\n                list.show = true;\r\n                $this.setData(list);\r\n            } else {\r\n                core.toast(list.message, 'loading')\r\n            }\r\n        });\r\n    }\r\n  },\r\n  inputPrickChange: function(e){\r\n    var $this = this;\r\n    var express_list = $this.data.express_list;\r\n    var index = e.detail.value;\r\n    var expresscom = express_list[index].name;\r\n    var express = express_list[index].express;\r\n    $this.setData({ expresscom: expresscom,express:express,index:index });\r\n  },\r\n  inputChange:function(e){\r\n    var express_number = e.detail.value;\r\n    this.setData({express_number:express_number});\r\n  },\r\n  back:function(){\r\n    wx.navigateBack();\r\n  },\r\n  submit:function(e){\r\n    var $this = this;\r\n    var refundid = e.currentTarget.dataset.refund;\r\n    var express_number = $this.data.express_number;\r\n    var refundid = $this.data.options.refundid;\r\n    var orderid = $this.data.options.id;\r\n    if(express_number==\"\"){\r\n      foxui.toast($this, \"请填写快递单号\");\r\n      return;\r\n    }\r\n\r\n    var express = $this.data.express;\r\n    var expresscom = $this.data.expresscom;\r\n\r\n    if(typeof($this.data.options.singlerefund)=='undefined'){\r\n      core.get('order/express_number', { submit:1,refundid: refundid, orderid: orderid, express_number: express_number, express: express, expresscom: expresscom},function(result){\r\n        if(result.error == 0){\r\n          wx.navigateTo({\r\n            url: '/pages/order/detail/index?id='+orderid,\r\n          })\r\n        }\r\n      });\r\n    }else{\r\n        core.get('order/single_express_number', { submit:1,refundid: refundid, orderid: orderid, express_number: express_number, express: express, expresscom: expresscom},function(result){\r\n            if(result.error == 0){\r\n                wx.navigateTo({\r\n                    url: '/pages/order/detail/index?id='+orderid,\r\n                })\r\n            }\r\n        });\r\n    }\r\n  }\r\n});","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n  data: {\r\n    page: 1,\r\n    cate: 'all',\r\n    list:[]\r\n  },\r\n  onLoad: function (options) {\r\n    var $this = this;\r\n    $this.setData({options: options,cate: options.cate || ''})\r\n    if (options.hasmembercard == 'true') {\r\n      $this.setData({ cate: 'my' })\r\n    }\r\n    $this.get_list()\r\n  },\r\n\r\n  tab: function(e){\r\n    var $this = this;\r\n    $this.setData({ cate: e.currentTarget.dataset.cate,list: [],page: 1})\r\n    $this.get_list()\r\n  },\r\n  onReachBottom: function () {\r\n    \r\n    if (this.data.loaded || this.data.list.length == this.data.total) {\r\n      return;\r\n    }\r\n    this.get_list();\r\n  },\r\n  get_list: function () {\r\n    var $this = this;\r\n    $this.setData({ loading: true });\r\n    core.get('membercard.getlist', { page: $this.data.page, cate: $this.data.cate}, function (res) {\r\n      if (res.error == 0) {\r\n        $this.setData({ loading: false, total: res.total, empty: true, all_total: res.all_total, my_total: res.my_total});\r\n        if (res.list.length > 0) {\r\n          $this.setData({\r\n            page: $this.data.page + 1,\r\n            list: $this.data.list.concat(res.list)\r\n          });\r\n        }\r\n        if (res.list.length > res.pagesize) {\r\n          $this.setData({\r\n            loaded: true\r\n          });\r\n        }\r\n      } else {\r\n        core.toast(res.message, 'loading')\r\n      }\r\n    }, this.data.show);\r\n  },\r\n  // 立即开通\r\n  // 购买\r\n  submit: function (e) {\r\n    var data = e.currentTarget.dataset,$this = this;\r\n    if (data.startbuy == -1){\r\n      return\r\n    }\r\n    if (data.stock == '0') {\r\n      foxui.toast($this, '库存不足');\r\n      return\r\n    }\r\n    core.post('membercard.order.create_order', { id: data.id }, function (res) {\r\n      if (res.error != 0) {\r\n        foxui.toast($this, res.message);\r\n        return;\r\n      }\r\n      wx.navigateTo({\r\n        url: '/pages/member/membercard/pay/index?order_id=' + res.order.order_id\r\n      })\r\n    })\r\n  },\r\n})","var app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n  data: {\r\n    list: [\r\n      \r\n    ],\r\n    indicatorDots: false,\r\n    autoplay: false,\r\n    current: 0,\r\n    \r\n    modal: false,\r\n  },\r\n\r\n  onLoad: function(options){\r\n    var $this = this, args = {cate: options.cate};\r\n    var isIpx = app.getCache('isIpx');\r\n    if (isIpx) {\r\n      $this.setData({\r\n        isIpx: true,\r\n        iphonexnavbar: 'fui-iphonex-navbar'\r\n      })\r\n    } else {\r\n      $this.setData({\r\n        isIpx: false,\r\n        iphonexnavbar: ''\r\n      })\r\n    }\r\n    $this.setData({ options: options })\r\n    if(options.id){\r\n      args.id = options.id;\r\n      args.page = options.page;\r\n      $this.setData({id: options.id})\r\n    }\r\n    $this.getlist(args)\r\n  },\r\n\r\n  // submit: function(){\r\n  //   this.setData({ modal: false})\r\n  // },\r\n\r\n  swiperchange: function(e){\r\n    this.setData({ current: e.detail.current})\r\n  },\r\n  getlist: function(args){\r\n    var $this = this;\r\n    core.get('membercard.detail', args, function(res){\r\n      if(res.error == 0){\r\n        if (args.id){\r\n          for(var i in res.list){\r\n            if (args.id == res.list[i].id){\r\n              $this.setData({ current: i})\r\n            }\r\n          }\r\n        }\r\n        $this.setData({list: res.list})\r\n      }\r\n    })\r\n  },\r\n\r\n  // 购买\r\n  submit: function(e){\r\n    var data = e.currentTarget.dataset,$this = this;\r\n    console.error(data)\r\n    if (data.startbuy == -1) {\r\n      return\r\n    }\r\n    if (data.stock == '0') {\r\n      foxui.toast($this, '库存不足');\r\n      return\r\n    }\r\n    core.post('membercard.order.create_order', { id: data.id }, function(res){\r\n      if (res.error != 0) {\r\n        foxui.toast($this, res.message);\r\n        return;\r\n      }\r\n      wx.navigateTo({\r\n        url: '/pages/member/membercard/pay/index?order_id=' + res.order.order_id\r\n      })\r\n    }) \r\n  },\r\n\r\n  // 领取每月优惠券\r\n  coupon: function(e){\r\n    var $this = this, data = e.currentTarget.dataset, current = $this.data.current, list = $this.data.list, options = $this.data.options, arg = { cate: options.cate };\r\n    var args = { id: data.id, couponid: data.couponid }\r\n    if (data.issend){\r\n      return\r\n    }\r\n    if (options.id) {\r\n      arg.id = options.id;\r\n    }\r\n\r\n    core.post('membercard.get_month_coupon', args, function(res){\r\n      if(res.error == 0){\r\n        foxui.toast($this, '领取成功')\r\n        for (var i in list[current].month_coupon) {\r\n          if (data.couponid == list[current].month_coupon[i].id) {\r\n            list[current].month_coupon[i].isget_month_coupon = true\r\n            $this.setData({list: list})\r\n          }\r\n        }\r\n      }else{\r\n        foxui.toast($this, res.message)\r\n      }\r\n    })\r\n  },\r\n\r\n  // 领取每月积分\r\n  credit: function (e) {\r\n    var $this = this, data = e.currentTarget.dataset, list = $this.data.list, current = $this.data.current,options = $this.data.options, arg = { cate: options.cate };\r\n    var args = { id: data.id }\r\n    if (data.iscredit) {\r\n      return\r\n    }\r\n    core.post('membercard.get_month_point', args, function (res) {\r\n      if (res.error == 0) {\r\n        foxui.toast($this, '领取成功')\r\n        list[current].isget_month_point = 1;\r\n        $this.setData({list: list})\r\n      } else {\r\n        foxui.toast($this, res.message)\r\n      }\r\n    })\r\n  }\r\n})","/**\r\n *\r\n * order/pay/index.js\r\n *\r\n * @create 2017-1-5\r\n * @author Young\r\n *\r\n * @update  Young 2017-01-10\r\n *\r\n */\r\nvar app = getApp();\r\nvar core = app.requirejs('core');\r\nvar foxui = app.requirejs('foxui');\r\nPage({\r\n    data: {\r\n        icons:app.requirejs('icons'),\r\n        success:false,\r\n        successData:{},\r\n\r\n        coupon: false,\r\n        show: true\r\n    },\r\n    onLoad: function (options) {\r\n        var $this = this;\r\n        this.setData({\r\n            options: options\r\n        });\r\n    },\r\n    onShow:function () {\r\n        this.get_list();\r\n    },\r\n    get_list:function () {\r\n        var $this=this;\r\n        this.setData({ order_id: $this.data.options.order_id});\r\n        core.post('membercard.order.pay', { order_id: $this.data.options.order_id}, function (res) {\r\n            console.error(res)\r\n            \r\n            if( res.error == 1 ){\r\n              core.alert(res.message);\r\n            }\r\n            $this.setData({ wechat: res.wechat, credit: res.credit, order: res.order, show: true })\r\n            return\r\n        });\r\n    },\r\n    pay: function (e) {\r\n        var type = core.pdata(e).type,$this=this,wechat = this.data.wechat;\r\n        if (type == 'wechat') {\r\n          core.pay(wechat.payinfo,function (res) {\r\n                if (res.errMsg == \"requestPayment:ok\"){\r\n                    $this.complete(type)\r\n                }\r\n            });\r\n        } else if (type == 'credit') {\r\n            core.confirm('确认要支付吗?', function () {\r\n                $this.complete(type)\r\n            }, function () {\r\n            })\r\n        } else {\r\n            $this.complete(type)\r\n        }\r\n    },\r\n    complete: function (type) {\r\n        var $this = this;\r\n        core.post('membercard/order/complete', {id: $this.data.order.id, type: type}, function (ret) {\r\n          if(ret.error != 0){\r\n            foxui.toast($this, ret.message)\r\n            return\r\n          }\r\n          if (ret.error == 0) {\r\n                wx.setNavigationBarTitle({title: '支付成功'});\r\n                $this.setData({\r\n                    success: true,\r\n                    pay_type: ret.type,\r\n                    pay_fee: ret.fee,\r\n                    orderno: ret.orderno,\r\n                    pay_msg: ret.msg\r\n                });\r\n            }\r\n            foxui.toast($this, ret.msg)\r\n            setTimeout(function(){\r\n              wx.reLaunch({\r\n                url: '/pages/member/membercard/index?cate=my',\r\n              })\r\n            },500)\r\n        }, true, true)\r\n    }\r\n});","// pages/groups/imdex/index.js\r\nvar app = getApp(), core = app.requirejs('core'), $ = app.requirejs('jquery'), foxui = app.requirejs('foxui');\r\nPage({\r\n  data: {\r\n    show: false\r\n  },\r\n  onPullDownRefresh: function () {\r\n    wx.startPullDownRefresh()\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n\r\n  },\r\n  onLoad: function () {\r\n    var $this =this;\r\n    setTimeout(function () {\r\n      $this.onPullDownRefresh()\r\n    }, 300);\r\n    console.log('wwwwww')\r\n    wx.reLaunch({\r\n      url: '../../../groups/index/index',\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  onReachBottom: function () {\r\n  },\r\n\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n\r\n  }\r\n})","// pages/groups/imdex/index.js\r\nvar app = getApp(), core = app.requirejs('core'), $ = app.requirejs('jquery'), foxui = app.requirejs('foxui');\r\nPage({\r\n  data: {\r\n    show: false\r\n  },\r\n  onPullDownRefresh: function () {\r\n    wx.startPullDownRefresh()\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n\r\n  },\r\n  onLoad: function () {\r\n    var $this = this;\r\n    setTimeout(function () {\r\n      $this.onPullDownRefresh()\r\n    }, 300)\r\n    wx.reLaunch({\r\n      url: '/bargain/index/index',\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  onReachBottom: function () {\r\n  },\r\n\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n\r\n  }\r\n})","// pages/groups/imdex/index.js\r\nvar app = getApp(), core = app.requirejs('core'), $ = app.requirejs('jquery'), foxui = app.requirejs('foxui');\r\nPage({\r\n  data: {\r\n    show: false\r\n  },\r\n  onPullDownRefresh: function () {\r\n    wx.startPullDownRefresh()\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n\r\n  },\r\n  onLoad: function () {\r\n    var $this = this;\r\n    setTimeout(function () {\r\n      $this.onPullDownRefresh()\r\n    }, 300)\r\n    wx.reLaunch({\r\n      url: '/seckill/pages/index/index',\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  onReachBottom: function () {\r\n  },\r\n\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n\r\n  }\r\n})","// pages/mall_index/mall_index.js\r\nvar app = getApp()\r\nvar core = app.requirejs('core');\r\nvar goodspicker = app.requirejs('biz/goodspicker'), foxui = app.requirejs('foxui'), diyform = app.requirejs('biz/diyform');\r\n\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    arrLabel: [],\r\n    num: [],  // 购物车商品数量\r\n    clickCar: false, // 点击出现购物车列表\r\n    num: 0,\r\n    change: false,\r\n    div: false,\r\n    numtotal: {},\r\n    clearcart: true,\r\n    canBuy: '',\r\n    // 购物车\r\n    specs: [],\r\n    options: [],\r\n    diyform: {},\r\n    specsTitle: '',\r\n    total: 1,\r\n    active: '',\r\n    slider: '',\r\n    tempname: '',\r\n    buyType: '',\r\n    areas: [],\r\n    closeBtn: false,\r\n    soundpic: true,\r\n    closespecs: false,\r\n    buyType: 'cart',\r\n    quickbuy: true,\r\n    formdataval: {},\r\n    showPicker: false\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    wx.showLoading({\r\n      title: '加载中...',\r\n    })\r\n    var pageid = options.id;\r\n\r\n    if (pageid==undefined){\r\n        var pages = getCurrentPages(); //获取页面栈\r\n        var url_arr = pages[pages.length - 1].route.split(\"/\");//当前页面路径/分割后的数组\r\n        pageid = url_arr[url_arr.length - 1];\r\n    }\r\n\r\n\r\n\r\n    var that = this;\r\n    let systemInfo = wx.getStorageSync('systemInfo');\r\n\r\n    this.busPos = {};\r\n    this.busPos['x'] = 45;//购物车的位置\r\n    this.busPos['y'] = app.globalData.hh - 80;\r\n\r\n    this.setData({\r\n      goodsH: systemInfo.windowHeight - 245 - 48,\r\n      pageid: pageid\r\n    });\r\n    // 左边选项卡切换控制数组\r\n    var arrLab = [1];\r\n    for (var i = 1; i < that.data.arrLabel.length; i++) {\r\n      arrLab.push(0);\r\n    }\r\n    that.setData({\r\n      arrLab: arrLab,\r\n    })\r\n\r\n\r\n    core.get('quick/index/main', { id: this.data.pageid }, function (ret) {\r\n     \r\n      var arr = []; // 商品在购物车中的数量 \r\n\r\n      var style = ''; // 样式\r\n      style = ret.style.shopstyle == 1 ? 'changeCss2' : (ret.style.shopstyle == 2 ? 'changeCss3' : '')\r\n\r\n      style += ' ' + ret.style.logostyle\r\n\r\n      that.setData({\r\n        main: ret,\r\n        group: ret.group,\r\n        goodsArr: ret.goodsArr,\r\n        arrCart: arr,\r\n        style: style\r\n      })\r\n\r\n\r\n\r\n\r\n\r\n\r\n      var id = that.data.main.cartdata == 1 ? that.data.pageid : '';\r\n      var numtotal = {};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n      // 计算高度\r\n      if (that.data.main.advs) {\r\n        if (that.data.main.advs.length > 0) {\r\n          var arr = [198];\r\n          var goodslength = 198;\r\n        }\r\n      } else {\r\n        var arr = [18];\r\n        var goodslength = 18;\r\n      }\r\n   \r\n      for (var i = 0; i < that.data.main.group.length; i++) {\r\n        if (that.data.main.goodsArr[that.data.main.group[i].type]) {\r\n          var templength = that.data.main.goodsArr[that.data.main.group[i].type].length ? that.data.main.goodsArr[that.data.main.group[i].type].length : 0.6;\r\n          goodslength = goodslength + templength * 106 + 66;\r\n          arr.push(goodslength)\r\n          that.setData({\r\n            arrscroll: arr\r\n          })\r\n\r\n        }\r\n\r\n   \r\n      }\r\n\r\n\r\n\r\n      var id = that.data.main.cartdata == 1 ? that.data.pageid : '';\r\n      core.get('quick/index/getCart', { quickid: id }, function (ret) {\r\n      \r\n        var numtotal = {};\r\n        for (var i in ret.simple_list) {\r\n         \r\n          numtotal[i] = ret.simple_list[i];\r\n        }\r\n        that.setData({\r\n          numtotal: numtotal\r\n        })\r\n      })\r\n\r\n      wx.hideLoading();\r\n      wx.setNavigationBarTitle({\r\n        title: ret.pagetitle\r\n      })\r\n    })\r\n  },\r\n\r\n  // 导航菜单跳转\r\n  menunavigage: function (e) {\r\n      const url = e.currentTarget.dataset.url\r\n      wx.navigateTo({\r\n          url: url,\r\n          fail: function () {\r\n              wx.switchTab({\r\n                  url: url,\r\n              })\r\n          }\r\n      })\r\n  },\r\n\r\n  // 幻灯片跳转\r\n  gobigimg: function (e) {\r\n    wx.navigateTo({\r\n      url: e.currentTarget.dataset.link,\r\n    })\r\n  },\r\n\r\n  // 左边选项卡切换方法\r\n  clickLab: function (e) {\r\n    var id = e.currentTarget.dataset.id; //左侧点击跳转id\r\n  \r\n    var arr = this.data.arrLab;\r\n    for (var i = 0; i < arr.length; i++) {\r\n      arr[i] = 0;\r\n    }\r\n    arr[id] = 1;\r\n\r\n    this.setData({\r\n      arrLab: arr,\r\n      id: e.currentTarget.dataset.id\r\n    })\r\n  },\r\n  // 查看购物车列表\r\n  shopCarList: function () {\r\n    var that = this;\r\n    this.setData({\r\n      clickCar: true,\r\n      cartcartArr: [],\r\n      showPicker: true\r\n    })\r\n    var id = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n \r\n    core.get('quick/index/getCart', { quickid: id }, function (ret) {\r\n    \r\n      var main = that.data.main;\r\n      main.cartList = ret\r\n      that.setData({\r\n        main: main\r\n      })\r\n\r\n      var tempcartid = [];\r\n      for (var i = 0; i < ret.list.length; i++) {\r\n        tempcartid[i] = ret.list[i].goodsid;\r\n      }\r\n      that.setData({\r\n        tempcartid: tempcartid\r\n      })\r\n    \r\n    })\r\n  },\r\n  shopCarHid: function () {\r\n    this.setData({\r\n      clickCar: false,\r\n      showPicker: false\r\n    })\r\n  },\r\n\r\n\r\n\r\n\r\n  // 购买picker\r\n  selectPicker: function (e) {\r\n    var $this = this;\r\n    wx.getSetting({\r\n      success: function (res) {\r\n        var limits = res.authSetting['scope.userInfo'];\r\n        if (limits) {\r\n          var goodslist = 'goodslist';\r\n          goodspicker.selectpicker(e, $this, goodslist)\r\n          $this.setData({\r\n            cover: '',\r\n            showvideo: false\r\n          });\r\n        } else {\r\n          $this.setData({ modelShow: true })\r\n          return\r\n        }\r\n      }\r\n    })\r\n  },\r\n  // 选规格\r\n  specsTap: function (event) {\r\n    var $this = this\r\n    goodspicker.specsTap(event, $this)\r\n  },\r\n  //关闭pickerpicker\r\n  emptyActive: function () {\r\n    this.setData({\r\n      active: '', slider: 'out', tempname: '', specsTitle: '', showPicker: false\r\n    });\r\n  },\r\n  // 立即购买\r\n  buyNow: function (event) {\r\n    var $this = this\r\n    goodspicker.buyNow(event, $this)\r\n  },\r\n  //加入购物车\r\n  getCart: function (event) {\r\n    var $this = this\r\n    goodspicker.getCart(event, $this)\r\n  },\r\n  select: function () {\r\n    var $this = this\r\n    goodspicker.select($this)\r\n  },\r\n  //数量输入绑定事件\r\n  inputNumber: function (e) {\r\n    var $this = this\r\n    goodspicker.inputNumber(e, $this)\r\n  },\r\n  number: function (e) {\r\n    var $this = this\r\n    goodspicker.number(e, $this)\r\n  },\r\n  onChange: function (e) {\r\n    return diyform.onChange(this, e)\r\n  },\r\n  DiyFormHandler: function (e) {\r\n    return diyform.DiyFormHandler(this, e)\r\n  },\r\n  selectArea: function (e) {\r\n    return diyform.selectArea(this, e)\r\n  },\r\n  bindChange: function (e) {\r\n    return diyform.bindChange(this, e)\r\n  },\r\n  onCancel: function (e) {\r\n    return diyform.onCancel(this, e)\r\n  },\r\n  onConfirm: function (e) {\r\n    return diyform.onConfirm(this, e)\r\n  },\r\n  getIndex: function (str, areas) {\r\n    return diyform.getIndex(str, areas)\r\n  },\r\n\r\n  closespecs: function () {\r\n    this.setData({\r\n      closespecs: false\r\n    })\r\n  },\r\n\r\n\r\n  /**\r\n   * 生命周期函数--监听页面滚动\r\n   */\r\n  onPageScroll: function (e) {\r\n    \r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n\r\n  },\r\n\r\n  // 弹窗picker点击确定按钮或单规格商品加入购物车\r\n  addCartquick: function (a, b) {\r\n    var that = this;\r\n\r\n    var numbers = that.data.numtotal;\r\n    var id = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n\r\n\r\n    // 加入购物车\r\n    core.get('quick/index/update', {\r\n      quickid: id,\r\n      goodsid: that.data.goodsid,\r\n      optionid: a ? a : '',\r\n      update: '',\r\n      total: '',\r\n      type: that.data.addtype,\r\n      typevalue: b ? b : '',\r\n      diyformdata: that.data.formdataval ? that.data.formdataval : ''\r\n    }, function (ret) {\r\n    \r\n\r\n\r\n      // 如果达到最大购买数量或者超出库存，提示错误信息\r\n      if (ret.error != 0) {\r\n        that.setData({\r\n          cantclick: true\r\n        })\r\n        foxui.toast(that, ret.message);\r\n        that.setData({\r\n          active: '', slider: 'out', isSelected: true, tempname: '', showPicker: false\r\n        })\r\n      } else {\r\n        // 修改底部购物车的数据\r\n        var main = that.data.main;\r\n        main.cartList.total = ret.total;\r\n        main.cartList.totalprice = ret.totalprice;\r\n        main.cartList.list = [1];\r\n\r\n        numbers[that.data.goodsid] = ret.goodstotal;\r\n    \r\n        that.setData({\r\n          numtotal: numbers,\r\n          main: main,\r\n          clearcart: true,\r\n          active: '', slider: 'out', isSelected: true, tempname: '', showPicker: false,\r\n          formdataval: {}\r\n        })\r\n        if (that.data.addtype == 'value') {\r\n          // that.animate(that.data.mouse)\r\n        }\r\n      }\r\n\r\n\r\n      // $this.setData({  });\r\n\r\n\r\n    })\r\n  },\r\n\r\n  //添加商品到购物车\r\n  addGoodToCartFn: function (e) {\r\n    app.checkAuth();\r\n    var that = this;\r\n    var modeltakeout = this.data.main.cartdata == 1 ? 'takeoutmodel' : 'shopmodel';\r\n    if (!e.currentTarget.dataset.canadd) {\r\n      modeltakeout = 'cantaddcart'\r\n    }\r\n  \r\n    that.setData({\r\n      morechose: e.currentTarget.dataset.more\r\n    })\r\n    // if(e.currentTarget.dataset.color!='#ccc') {\r\n    that.setData({\r\n      addtype: e.currentTarget.dataset.add,\r\n      goodsid: e.currentTarget.dataset.id,\r\n      mouse: e\r\n    })\r\n    if (that.data.addtype == 'reduce' && e.currentTarget.dataset.min == e.currentTarget.dataset.num) {\r\n      that.setData({\r\n        addtype: 'delete'\r\n      })\r\n    }\r\n    // 如果有多规格减号\r\n    if (e.currentTarget.dataset.more == '1' && that.data.addtype == 'reduce') {\r\n      //如果点击减号且为多规格，提示在购物车中修改数量\r\n      foxui.toast(that, \"请在购物车中修改多规格商品\");\r\n    }\r\n    else if (that.data.addtype == 'reduce' && e.currentTarget.dataset.min == e.currentTarget.dataset.num) {\r\n      foxui.toast(that, \"不能少于\" + e.currentTarget.dataset.min + \"件商品\");\r\n    }\r\n    // 如果是多规格或有自定义表单 加号\r\n    else if (e.currentTarget.dataset.more == '1' || e.currentTarget.dataset.diyformtype != '0' || !e.currentTarget.dataset.canadd) {\r\n      if (that.data.addtype != 'reduce' && that.data.addtype != 'delete') {\r\n        var goodslist = 'quickbuy';\r\n        that.setData({\r\n          showPicker: true,\r\n          cycledate: false\r\n        })\r\n        goodspicker.selectpicker(e, that, goodslist, modeltakeout);\r\n       \r\n\r\n      } else {\r\n        that.setData({\r\n          storenum: e.currentTarget.dataset.store,\r\n          maxnum: e.currentTarget.dataset.maxnum\r\n        })\r\n        that.addCartquick('', 1);\r\n      }\r\n    }\r\n\r\n    // 如果是单规格\r\n    if (e.currentTarget.dataset.more != '1' && e.currentTarget.dataset.diyformtype == '0' && e.currentTarget.dataset.canadd) {\r\n      that.setData({\r\n        storenum: e.currentTarget.dataset.store,\r\n        maxnum: e.currentTarget.dataset.maxnum\r\n      })\r\n      // 减号且不能再少\r\n      if (that.data.addtype == 'reduce' && e.currentTarget.dataset.min == e.currentTarget.dataset.num) {\r\n        foxui.toast(that, \"不能少于\" + e.currentTarget.dataset.min + \"件商品\");\r\n      } else {\r\n        that.addCartquick('', 1);\r\n      }\r\n\r\n    }\r\n    // }\r\n  },\r\n\r\n  // 加购物车动画\r\n  animate: function (e) {\r\n    var that = this;\r\n\r\n    that.finger = {}; var topPoint = {};\r\n    that.finger['x'] = e.touches[\"0\"].clientX;//点击的位置\r\n    that.finger['y'] = e.touches[\"0\"].clientY;\r\n\r\n    if (that.finger['y'] < that.busPos['y']) {\r\n      topPoint['y'] = that.finger['y'] - 150;\r\n    } else {\r\n      topPoint['y'] = that.busPos['y'] - 150;\r\n    }\r\n    topPoint['x'] = Math.abs(that.finger['x'] - that.busPos['x']) / 2;\r\n\r\n    if (that.finger['x'] > that.busPos['x']) {\r\n      topPoint['x'] = (that.finger['x'] - that.busPos['x']) / 2 + that.busPos['x'];\r\n    } else {//\r\n      topPoint['x'] = (that.busPos['x'] - that.finger['x']) / 2 + that.finger['x'];\r\n    }\r\n\r\n    //topPoint['x'] = that.busPos['x'] + 80\r\n    //that.linePos = app.bezier([that.finger, topPoint, that.busPos], 30);\r\n    that.linePos = that.bezier([that.busPos, topPoint, that.finger], 30);\r\n    that.startAnimation(e);\r\n  },\r\n  bezier: function (pots, amount) {\r\n    var pot;\r\n    var lines;\r\n    var ret = [];\r\n    var points;\r\n    for (var i = 0; i <= amount; i++) {\r\n      points = pots.slice(0);\r\n      lines = [];\r\n      while (pot = points.shift()) {\r\n        if (points.length) {\r\n          lines.push(pointLine([pot, points[0]], i / amount));\r\n        } else if (lines.length > 1) {\r\n          points = lines;\r\n          lines = [];\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n      ret.push(lines[0]);\r\n    }\r\n    function pointLine(points, rate) {\r\n      var pointA, pointB, pointDistance, xDistance, yDistance, tan, radian, tmpPointDistance;\r\n      var ret = [];\r\n      pointA = points[0];//点击\r\n      pointB = points[1];//中间\r\n      xDistance = pointB.x - pointA.x;\r\n      yDistance = pointB.y - pointA.y;\r\n      pointDistance = Math.pow(Math.pow(xDistance, 2) + Math.pow(yDistance, 2), 1 / 2);\r\n      tan = yDistance / xDistance;\r\n      radian = Math.atan(tan);\r\n      tmpPointDistance = pointDistance * rate;\r\n      ret = {\r\n        x: pointA.x + tmpPointDistance * Math.cos(radian),\r\n        y: pointA.y + tmpPointDistance * Math.sin(radian)\r\n      };\r\n      return ret;\r\n    }\r\n    return {\r\n      'bezier_points': ret\r\n    };\r\n  },\r\n  startAnimation: function (e) {\r\n    var index = 0, that = this,\r\n      bezier_points = that.linePos['bezier_points'];\r\n\r\n    this.setData({\r\n      hide_good_box: false,\r\n      bus_x: that.finger['x'],\r\n      bus_y: that.finger['y']\r\n    })\r\n    var len = bezier_points.length;\r\n    index = len\r\n    this.timer = setInterval(function () {\r\n      index--;\r\n      that.setData({\r\n        bus_x: bezier_points[index]['x'],\r\n        bus_y: bezier_points[index]['y']\r\n      })\r\n      if (index < 1) {\r\n        clearInterval(that.timer);\r\n        // that.addGoodToCartFn(e);\r\n        that.setData({\r\n          hide_good_box: true\r\n        })\r\n      }\r\n    }, 13);\r\n  },\r\n\r\n  //清空购物车\r\n  clearShopCartFn: function (e) {\r\n    var that = this;\r\n    var id = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n    core.get('quick/index/clearCart', { quickid: id }, function (ret) {\r\n     \r\n      var main = that.data.main;\r\n      main.cartList = {\r\n        list: [],\r\n        total: 0,\r\n        totalprice: 0\r\n      };\r\n      var tempcartid = that.data.tempcartid\r\n      var arr = [];\r\n      // 这里有bug，清空购物车的时候遍历id数组，比当前有的id大的商品不在数组里所以要找到最大的id值将数组置为0\r\n      for (var i = 0; i < tempcartid.length; i++) {\r\n      \r\n        arr[Number(tempcartid[i])] = -1\r\n      \r\n      }\r\n      that.setData({\r\n        main: main,\r\n        clickCar: false,\r\n        numtotal: arr,\r\n        clearcart: false,\r\n        showPicker: false\r\n      })\r\n      \r\n    })\r\n  },\r\n\r\n  // 关闭多规格弹窗\r\n  closemulti: function () {\r\n    this.setData({\r\n      showPicker: false,\r\n      clickCar: false,\r\n      cycledate: true\r\n    })\r\n  },\r\n\r\n  // 结算\r\n  gopay: function () {\r\n    \r\n    var fromquick = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n    if (!this.data.main.cartList.list.length) {\r\n      // 如果购物车中没有商品\r\n      foxui.toast(this, \"请先添加商品到购物车\");\r\n    } else {\r\n      wx.navigateTo({\r\n        url: '/pages/order/create/index?fromquick=' + fromquick\r\n      })\r\n    }\r\n  },\r\n  // 跳转到购物车\r\n  gotocart: function () {\r\n    const url = '/pages/member/cart/index'\r\n    wx.navigateTo({\r\n        url: url,\r\n        fail: function () {\r\n            wx.switchTab({\r\n              url: url,\r\n            })\r\n        }\r\n    })\r\n  },\r\n\r\n  // 购物车弹层加减商品\r\n  cartaddcart: function (e) {\r\n    var that = this;\r\n    var id = this.data.main.cartdata == 1 ? this.data.pageid : '';\r\n    var opid = e.currentTarget.dataset.id == '0' ? e.currentTarget.dataset.goodsid : e.currentTarget.dataset.id;\r\n\r\n    var carttype = e.currentTarget.dataset.add;\r\n    var value = 1;\r\n    if (e.currentTarget.dataset.min == e.currentTarget.dataset.num && carttype == 'reduce') {\r\n      carttype = 'delete'\r\n    }\r\n\r\n    // 加入购物车\r\n    core.get('quick/index/update', {\r\n      quickid: id,\r\n      goodsid: e.currentTarget.dataset.goodsid,\r\n      optionid: e.currentTarget.dataset.id == '0' ? '' : e.currentTarget.dataset.id,\r\n      update: '',\r\n      total: '',\r\n      type: carttype,\r\n      typevalue: value,\r\n      // diyformdata: ''\r\n    }, function (ret) {\r\n      \r\n      if (ret.error == 0) {\r\n        var arr = that.data.cartcartArr;\r\n        arr[opid] = ret.goodsOptionTotal || ret.goodsOptionTotal == 0 ? ret.goodsOptionTotal : ret.goodstotal;\r\n\r\n        var main = that.data.main;\r\n        main.cartList.total = ret.total;\r\n        main.cartList.totalprice = ret.totalprice;\r\n\r\n        var numbers = that.data.numtotal;\r\n        numbers[e.currentTarget.dataset.goodsid] = ret.goodstotal;\r\n\r\n        that.setData({\r\n          cartcartArr: arr,\r\n          main: main,\r\n          numtotal: numbers\r\n        })\r\n      } else {\r\n        foxui.toast(that, ret.message);\r\n      }\r\n    })\r\n  },\r\n\r\n  // 右侧主体滚动事件\r\n  scrollfn: function (e) {\r\n  \r\n    var that = this;\r\n    var arrtemp = this.data.arrLab;\r\n    for (var i = 0; i < that.data.arrscroll.length; i++) {\r\n      arrtemp[i] = 0;\r\n      if (Math.abs(e.detail.scrollTop - that.data.arrscroll[i]) < 26) {\r\n\r\n        arrtemp[i] = 1;\r\n        this.setData({\r\n          arrLab: arrtemp\r\n        })\r\n        break;\r\n      }\r\n\r\n    }\r\n  },\r\n  onShareAppMessage: function (res) {\r\n\r\n  }\r\n})","var app = getApp();\r\nvar core = app.requirejs('/core');\r\nvar foxui = app.requirejs('foxui');\r\nvar $ = app.requirejs('jquery');\r\n\r\nPage({\r\n  data: {\r\n    activity_setting: {},\r\n    shareid: '',\r\n    id: '',\r\n    share_id: '',\r\n    time: ['00', '00', '00', '00'],\r\n    listlength: false,\r\n    pindex: 6,\r\n    \r\n  },\r\n\r\n  onLoad: function (options) {\r\n    app.url(options);\r\n    var $this = this;\r\n    if(options.share_id){\r\n      $this.setData({ share_id: options.share_id});\r\n    }\r\n    if (options.id) {\r\n      $this.setData({ id: options.id });\r\n    }\r\n    $this.getList();\r\n  },\r\n\r\n  // onShow: function() {\r\n  //   var $this = this;\r\n  //   $this.getList();\r\n  // },\r\n\r\n  // 领取优惠券\r\n  getCoupon: function(e){\r\n    var $this = this;\r\n    if($this.data.isGet){\r\n      return;\r\n    }\r\n    var args = { id: $this.data.id, share_id: $this.data.share_id, form_id: e.detail.formId};\r\n    if (!$this.data.isLogin) {\r\n      app.checkAuth();\r\n      return;\r\n    }\r\n    $this.setData({ isGet: true})\r\n    core.get('friendcoupon/receive', args , function (ret) {\r\n      if(ret.error == 0){\r\n        foxui.toast($this, '领取成功');\r\n        $this.getList();\r\n        $this.setData({ isGet: false })\r\n      }else{\r\n        $this.setData({\r\n          invalidMessage: ret.message.replace('<br>', \"\\n\"),\r\n          isGet: false \r\n        })\r\n      }\r\n    })\r\n  },\r\n\r\n  // 参与瓜分  \r\n  carve: function (e) {\r\n    var $this = this;\r\n    var args = { id: $this.data.id, share_id: $this.data.share_id, form_id: e.detail.formId };\r\n    if (!$this.data.isLogin){\r\n      app.checkAuth();\r\n      return;\r\n    }\r\n    core.get('friendcoupon/divide', args , function (ret) {\r\n        if(ret.error == 0){\r\n          foxui.toast($this, ret.message);\r\n          $this.getList();\r\n        } else {\r\n          foxui.toast($this, ret.message);\r\n          $this.getList();\r\n        }\r\n    })\r\n  },\r\n\r\n  // 查看我的\r\n  mycoupon: function() {\r\n    this.setData({\r\n      id: this.data.data.currentActivityInfo.activity_id,\r\n      share_id: this.data.data.currentActivityInfo.headerid\r\n    })\r\n    this.getList();\r\n  },\r\n\r\n  // 分享\r\n  onShareAppMessage(res) {\r\n    var $this = this;\r\n    var title = $this.data.data.activitySetting.title\r\n    var url = '/friendcoupon/index?share_id=' + $this.data.shareid + '&id=' + $this.data.id\r\n    return core.onShareAppMessage(url, title);\r\n  },\r\n  // 查看更多\r\n  more: function(){\r\n    var $this = this;\r\n    var activityList = $this.data.activityList;\r\n    core.get('friendcoupon/more', {\r\n      id: $this.data.id,\r\n      share_id: $this.data.shareid,\r\n      pindex: $this.data.pindex\r\n    }, function (ret) {\r\n      if (ret.result.list.length === 0) {\r\n        foxui.toast($this, \"没有更多了\")\r\n      } else {\r\n        $this.setData({ activityList: activityList.concat(ret.result.list), pindex: $this.data.pindex + 10});\r\n      }\r\n    })\r\n    // core.get('friendcoupon/more', {id: $this.data.id, share_id: $this.data.share_id, pindex: $this.data.data.activityData.length}, function (ret) {\r\n    //     console.log(ret)\r\n    // })\r\n\r\n  },\r\n\r\n  // 获取数据\r\n  getList() {\r\n    var $this = this;\r\n    core.get('friendcoupon', { id: $this.data.id, share_id: $this.data.share_id}, function (ret) {\r\n      if(ret.error == 0){\r\n        if (ret.currentActivityInfo){\r\n          ret.currentActivityInfo.enough = Number(ret.currentActivityInfo.enough);\r\n        }\r\n        if (typeof (ret.activitySetting.desc) == 'string'){\r\n          $this.setData({ isArray: true })\r\n        }\r\n\r\n        //接口里activityData字段返回了所有数据，超过五条时我只需要显示五条，所以赋值给另一数组来显示\r\n\r\n        $this.setData({ \r\n          activityData: ret.activityData,\r\n          activityList: ret.activityData.length > 5 ? ret.activityData.slice(0,5) : ret.activityData,\r\n          data: ret,\r\n          isLogin: ret.isLogin,\r\n          mylink: ret.mylink,\r\n          invalidMessage: ret.invalidMessage,\r\n          shareid: ret.currentActivityInfo ? ret.currentActivityInfo.headerid : '',\r\n        })\r\n\r\n\r\n\r\n        // 活动还没有结束的时候显示倒计时\r\n        if (+ret.overTime + 3 > Math.round(+new Date / 1000)){\r\n          let timer = setInterval(function () {\r\n            $this.setData({\r\n              time: core.countDown(+ret.overTime + 3)\r\n            })\r\n            if (!$this.data.time) {\r\n              clearInterval(timer);\r\n                $this.getList();\r\n            }\r\n          }, 1000);\r\n        }\r\n      }else{\r\n        foxui.toast($this, ret.message);\r\n      }\r\n    })\r\n  }\r\n})","// pages/groups/imdex/index.js\r\nvar app = getApp(), core = app.requirejs('core'), $ = app.requirejs('jquery'), foxui = app.requirejs('foxui');\r\nPage({\r\n  data: {\r\n    show: false\r\n  },\r\n  onPullDownRefresh: function () {\r\n    wx.startPullDownRefresh()\r\n  },\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n\r\n  },\r\n  onLoad: function () {\r\n    var $this = this;\r\n    setTimeout(function () {\r\n      $this.onPullDownRefresh()\r\n    }, 300)\r\n    wx.reLaunch({\r\n      url: '/commission/pages/index',\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n    wx.showTabBar({})\r\n  },\r\n\r\n  onReachBottom: function () {\r\n  },\r\n\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n\r\n  }\r\n})","var app = getApp();\r\nvar core = require('../../utils/core.js')\r\n\r\n// pages/auth/auth.js\r\nPage({\r\n\r\n  /**\r\n   * 页面的初始数据\r\n   */\r\n  data: {\r\n    shop_logo: '',\r\n    shop_name: ''\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad: function (options) {\r\n    \r\n    core.get('wxAppSetting', {}, (response) => {\r\n      var sysSet = response.sysset\r\n      \r\n      this.setData({\r\n        shop_logo: sysSet.shoplogo,\r\n        shop_name: sysSet.shopname\r\n      })\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面初次渲染完成\r\n   */\r\n  onReady: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面显示\r\n   */\r\n  onShow: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面隐藏\r\n   */\r\n  onHide: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 页面相关事件处理函数--监听用户下拉动作\r\n   */\r\n  onPullDownRefresh: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 页面上拉触底事件的处理函数\r\n   */\r\n  onReachBottom: function () {\r\n\r\n  },\r\n\r\n  /**\r\n   * 用户点击右上角分享\r\n   */\r\n  onShareAppMessage: function () {\r\n\r\n  },\r\n  bindGetUserInfo: function (res) {\r\n    wx.login({\r\n      success: function (ret) {\r\n        core.post('wxapp/login', { code: ret.code }, function (login_res) {\r\n          if (login_res.error) {\r\n            core.alert('获取用户登录态失败:' + login_res.message);\r\n            return;\r\n          }\r\n          core.get('wxapp/auth', {\r\n            data: res.detail.encryptedData,\r\n            iv: res.detail.iv,\r\n            sessionKey: login_res.session_key\r\n          }, function (auth_res) {\r\n            if (auth_res.isblack == 1) {\r\n              wx.showModal({\r\n                title: '无法访问',\r\n                content: '您在商城的黑名单中，无权访问！',\r\n                success: function (res) {\r\n                  if (res.confirm) {\r\n                    app.close();\r\n                  }\r\n                  if (res.cancel) {\r\n                    app.close();\r\n                  }\r\n                }\r\n              })\r\n            }\r\n            res.detail.userInfo.openid = auth_res.openId\r\n            res.detail.userInfo.id = auth_res.id\r\n            res.detail.userInfo.uniacid = auth_res.uniacid\r\n            app.setCache('userinfo', res.detail.userInfo);\r\n            app.setCache('userinfo_openid', res.detail.userInfo.openid);\r\n            app.setCache('userinfo_id', auth_res.id);\r\n            app.getSet();\r\n            wx.reLaunch({\r\n              url: '/pages/index/index'\r\n            })\r\n          })\r\n        })\r\n      },\r\n      fail: function () {\r\n        core.alert('获取用户信息失败!');\r\n      }\r\n    })\r\n  },\r\n  close () {\r\n    wx.navigateBack({\r\n\r\n      delta: 0\r\n\r\n    })\r\n  }\r\n})"]}